FROM cypress/base
RUN mkdir -p /opt/justto-web
WORKDIR /opt/justto-web
COPY package.json .
RUN npm install

# copy spec files and website files
COPY public public
COPY src src
COPY tests tests
COPY .env .env
COPY vue.config.js vue.config.js
COPY styleguide.config.js styleguide.config.js
COPY cypress.json cypress.json

# rerun E2E tests only if any of the previous files change
RUN $(npm bin)/cypress run --headless -b chrome -e BASE_URL=homol.justto.com.br
