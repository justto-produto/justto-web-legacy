(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[1339,1046],{31046:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var o=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-editor jus-ckeditor__parent",attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,"custom-class":e.customClass,"before-close":e.handleClose,fullscreen:e.fullscreen,width:e.width,"destroy-on-close":"","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[e.title.length?t("span",[e._v(" "+e._s(e.title)+" ")]):e._t("title")],2),!e.textOnly&&e.dialogVisible?t("ckeditor",{ref:"templateEditor",staticClass:"reply-editor__editor",attrs:{type:"classic",editor:e.editor,value:e.editorModel,config:e.editorConfig},on:{input:e.setModel}}):t("el-input",{attrs:{value:e.editorModel,rows:18,type:"textarea",resize:"none"},on:{input:e.setModel}}),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCancel}},[e._v(" "+e._s(e.buttonCancel)+" ")]),t("el-button",{attrs:{disabled:!e.canSendMessage,type:"primary"},on:{click:e.handleConfirm}},[e._v(" "+e._s(e.buttonConfirm)+" ")])],1)],1)},n=[],r=i(89985),s={name:"DialogEditor",mixins:[r.Z],props:{title:{type:String,default:""},textOnly:{type:Boolean,default:!1},customClass:{type:String,default:""},width:{type:String,default:"50%"},fullscreen:{type:Boolean,default:!1},canSendMessage:{type:Boolean,default:!0},buttonConfirm:{type:String,default:"Salvar"},buttonCancel:{type:String,default:"Cancelar"}},data:()=>({dialogVisible:!1,editorReady:!0,editorModel:""}),computed:{editorInstance(){return this.$refs.templateEditor}},methods:{openDialogEditor(e){this.editorModel=e,this.dialogVisible=!0},ready(){this.editorReady=!0},handleClose(e){this.dialogVisible=!1,e()},setModel(e){this.editorModel=e,this.$emit("input",e)},handleConfirm(){this.$emit("confirm",this.editorModel),this.dialogVisible=!1},handleCancel(){this.$emit("cancel",this.editorModel),this.dialogVisible=!1}}},a=s,l=(i(7622),i(1001)),d=(0,l.Z)(a,o,n,!1,null,null,null),u=d.exports},89985:function(e,t,i){"use strict";i.d(t,{Z:function(){return S}});var o=i(61927),n=i(53083),r=i(82311),s=i(30418),a=i(16726),l=i(84687),d=i(75304),u=i(4434),c=i(93124),m=i(86537),h=i(98009),p=i(24697),g=i(28927),b=i(13264),f=i(95994),v=i(31789),w=i(92619),k=i(70756),_=i(97525),y=i(4424),C=i(35898),A=i(57759),M=i(97865),V=i(37259),Z=i(40917);class I extends A.Z{constructor(e){super(e),this.editor=e,this.buttonView=null,this.createButton(),this.editor.ui.componentFactory.add("preview",(()=>this.buttonView))}createButton(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="18.409" height="18"><path data-name="RetÃ¢ngulo 67" fill="none" d="M.204 0h18v18h-18z"/><g data-name="Grupo 3101"><g data-name="Grupo 26"><path data-name="Caminho 253" d="M9.205 12.018a3.043 3.043 0 10-3.019-3.043 3.031 3.031 0 003.019 3.043z" fill="none" stroke="#000" stroke-width=".8"/><path data-name="Caminho 254" d="M9.204 10.745a1.839 1.839 0 10-1.781-1.838 1.814 1.814 0 001.781 1.838z" fill="#191919" fill-rule="evenodd"/><path data-name="Caminho 11629" d="M9.761 9.397a1.032 1.032 0 10-1-1.032 1.019 1.019 0 001 1.032z" fill="#fff" fill-rule="evenodd"/><path data-name="Caminho 255" d="M17.909 8.902a10.174 10.174 0 00-17.409 0 10.174 10.174 0 0017.409 0z" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/></g></g></svg>';this.buttonView=new M.Z,this.buttonView.set({label:"Visualizar Mensagem",icon:e,tooltip:!0}),this.buttonView.on("execute",(()=>{const e=Array(...document.querySelectorAll(".ck-content")).pop();if(e){const{getSelectedIds:t}=V["default"].getters,i=t.length?t[0]:Number(location.href.split("/").pop()),o=e.innerHTML;Z.YB.$emit("SEE-PREVIEW",{template:o,disputeId:i})}}))}}class x extends A.Z{constructor(e){super(e),this.editor=e,this.buttonView=null,this.createButton(),this.editor.ui.componentFactory.add("imageAttachment",(()=>this.buttonView))}createButton(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="18" style="margin-left: 10px !important;" height="18"><path data-name="Caminho 13974" d="M8.948 4.948a.611.611 0 10-1.222 0c0 .009.005.017.005.026V13.5a3.254 3.254 0 11-6.508 0V3.273a2.034 2.034 0 114.067 0v8.591a.813.813 0 11-1.626 0V4.942a.106.106 0 000-.017.611.611 0 10-1.222 0 .106.106 0 000 .017v6.922a2.034 2.034 0 104.068 0V3.273a3.254 3.254 0 11-6.508 0V13.5a4.474 4.474 0 108.948 0V4.974h-.005c-.002-.009.003-.017.003-.026z"/></svg>';this.buttonView=new M.Z,this.buttonView.set({label:"Inserir Imagem",icon:e,tooltip:!0,withText:!1}),this.buttonView.on("execute",(()=>V["default"].dispatch("toggleImageUploadDialog",!0)))}}class T extends A.Z{constructor(e){super(e),this.editor=e,this.registerConverters()}registerConverters(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"",key:"data-mention",classes:"",attributes:{href:!0,"data-user-id":!0}},model:{key:"mention",value:e=>{const t=this.editor.plugins.get("Mention").toMentionAttribute(e,{link:e.getAttribute("href"),userId:e.getAttribute("data-user-id")});return t}},converterPriority:"high"}),this.editor.conversion.for("downcast").attributeToElement({model:"mention",view:(e,{writer:t})=>{if(!e)return;const i="image"===e.type,o="memberMention"===e.type;return t.createAttributeElement(i?"img":o?"em":"span",{class:"justto-variable","data-mention":e.id,src:e.id,...o?{class:"justto-mention","account-id":e.accountId}:{}},{priority:20,id:e.uid})},converterPriority:"high"})}}var E=i(90408),S={data(){return{editor:o.Z}},computed:{...(0,E.Se)({variables:"getAvaliableVariablesToTemplate",members:"workspaceMembersByDispute"}),editorConfig(){return{plugins:[n.Z,r.Z,s.Z,a.Z,p.Z,g.Z,b.Z,l.Z,d.Z,u.Z,c.Z,m.Z,h.Z,f.Z,v.Z,w.Z,k.Z,...this.dontUseTablePlugin?[]:[y.Z,C.Z],...this.useImageAttachmentPlugin?[x]:[],...this.useMentionPlugin?[_.Z,T]:[],...this.usePreviewPlugin?[I]:[]],mention:this.useMentionPlugin?{feeds:[{marker:"{",feed:this.getFeedItems,minimumCharacters:1,itemRenderer:this.customItemRenderer},{marker:"@",feed:this.getFeedPersonItems,minimumCharacters:0,itemRenderer:this.customMemberItemRenderer}]}:{},toolbar:{items:["bold","italic","underline","removeFormat","link","bulletedList","numberedList","|","insertTable","|","outdent","indent","|","blockQuote","undo","redo","imageStyle",...this.useImageAttachmentPlugin?["imageAttachment"]:[],...this.usePreviewPlugin?["preview"]:[]],viewportTopOffset:30,shouldNotGroupWhenFull:!0},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}},variablesList(){const e=[],t=[];return Object.keys(this.variables).map((i=>({id:`{{${i}}}`,name:`${this.variables[i]}`,type:e.includes(i)?"img":t.includes(i)?"link":"text"})))}},beforeMount(){this.getAvaliableVariablesToTemplate()},methods:{...(0,E.nv)(["getAvaliableVariablesToTemplate"]),setImgTag(e){this.$nextTick((()=>{const t=document.querySelector(".ck-editor__editable").ckeditorInstance;t.model.change((i=>{const o=i.createElement("image",{src:e});t.model.insertContent(o,t.model.document.selection)}))}))},customItemRenderer(e){return e.name},customMemberItemRenderer(e){return e.person?.name||e.accountEmail},getFeedItems(e){function t({name:t,id:i}){const o=(0,Z.Ue)(e).replace(/{/g,"");return(0,Z.Ue)(t).includes(o)||(0,Z.Ue)(i).includes(o)}return this.variablesList.filter(t)},getFeedPersonItems(e){function t({name:t,person:i}){const o=(0,Z.Ue)(e).replace(/{/g,"");return i?(0,Z.Ue)(i.name).includes(o):(0,Z.Ue)(t).includes(o)}return this.members.filter(t).map((e=>({...e,type:"memberMention",id:`@${this.customMemberItemRenderer(e)}`})))},ckeditorFocus(e){}}}},43473:function(e,t,i){"use strict";i.r(t);var o=i(87537),n=i.n(o),r=i(23645),s=i.n(r),a=s()(n());a.push([e.id,".jus-ckeditor__parent .negotiator-fullscreen-editor .el-dialog__body .ck-editor .ck-editor__main .ck-editor__editable{height:50vh}.dialog-editor .cke_top{border:none}.dialog-editor .cke.cke_chrome{border:2px solid #f3f4f5;border-radius:6px}","",{version:3,sources:["webpack://./src/components/dialogs/DialogEditor.vue"],names:[],mappings:"AAQU,sHACE,WAAA,CASV,wBAAA,WAAA,CAEA,+BACE,wBAAA,CACA,iBAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.jus-ckeditor__parent {\n  .negotiator-fullscreen-editor {\n    .el-dialog__body {\n      .ck-editor {\n        .ck-editor__main {\n          .ck-editor__editable {\n            height: 50vh;\n          }\n        }\n      }\n    }\n  }\n}\n\n.dialog-editor {\n  .cke_top { border: none; }\n\n  .cke.cke_chrome {\n    border: 2px solid $--color-light-gray;\n    border-radius: 6px;\n  }\n}\n"],sourceRoot:""}]),t["default"]=a},7622:function(e,t,i){var o=i(43473);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var n=i(39185).Z;n("242159e7",o,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=1339.js.map