(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[1504],{51504:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reply-editor__container"},[t("div",{staticClass:"reply-editor__body jus-ckeditor__parent"},[t("el-input",{model:{value:e.state.title,callback:function(t){e.$set(e.state,"title",t)},expression:"state.title"}}),t("ckeditor",{ref:"templateEditor",attrs:{editor:e.editor,config:e.editorConfig,type:"classic"},on:{ready:function(t){return e.editorReady()}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),t("div",{staticClass:"reply-editor__footer"},[t("el-row",{staticClass:"reply-editor__footer-row",attrs:{type:"flex",justify:"end",gutter:20}},[t("el-col",{staticClass:"reply-editor__footer-column",attrs:{span:10}},[t("div",{staticClass:"messages-container__hint"},[t("strong",{staticClass:"messages-container__hint-hint"},[e._v("Dica importante!")]),t("div",{staticClass:"messages-container__hint-text"},[t("div",{staticClass:"messages-container__hint-text-click",on:{click:function(t){e.isSlideInfoVisible=!0}}},[e._v(" CLIQUE AQUI ")]),t("div",[e._v("e saiba como utilizar variáveis e preview das mensagens rápidas")])])]),t("SlideInfo",{attrs:{images:e.itemsSlider},on:{close:function(t){e.isSlideInfoVisible=!1}},model:{value:e.isSlideInfoVisible,callback:function(t){e.isSlideInfoVisible=t},expression:"isSlideInfoVisible"}}),t("div",[t("el-button",{on:{click:function(t){return e.cancel()}}},[e._v(" Cancelar ")]),t("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.save()}}},[e._v(" Salvar ")])],1)],1)],1)],1)])},r=[],n=o(90408),a=o(89985),l={components:{SlideInfo:()=>o.e(1097).then(o.bind(o,61097))},mixins:[a.Z],props:{template:{type:Object,required:!0},disputeId:{type:Number,required:!0}},data(){return{state:{title:"",body:""},editorLoaded:!1,useMentionPlugin:!0,usePreviewPlugin:!0,isSlideInfoVisible:!1,itemsSlider:[{title:"Utilizando variáveis da disputa em suas mensagens rápidas",subtitle:"São inumeras variáveis que você pode utilizar para compor suas mensagens rápidas. No local em que você coloca uma variável, o sistema vai utilizar os dados da disputa na mensagem.",src:"https://storage.googleapis.com/justto_app/conteudos/variaveis%26preview1.png"},{title:"Utilizando variáveis da disputa em suas mensagens rápidas",src:"https://storage.googleapis.com/justto_app/conteudos/variaveis%26preview2.png"},{title:"Visualizando como ficará sua mensagem",src:"https://storage.googleapis.com/justto_app/conteudos/variaveis%26preview3.png",footer:"Pronto! Agora você tem o template prontinho para usar sempre que precisar!"}]}},computed:{...(0,n.Se)(["loading"]),text:{get(){return this.state.body},set(e){this.state.body=e}}},watch:{template(){this.isEditorReady&&this.loadTemplate()}},mounted(){this.isEditorReady&&this.loadTemplate()},beforeDestroy(){this.state={title:"",body:""}},methods:{...(0,n.nv)(["editTemplate","showLoading","hideLoading"]),loadTemplate(){const e=this.formatBody();this.state={...this.template,body:e}},editorReady(){this.isEditorReady=!0,this.loadTemplate()},cancel(){this.$emit("cancel"),this.hideLoading()},save(){this.showLoading(),this.editTemplate({template:this.state,disputeId:this.disputeId}).then((e=>{this.$emit("input",e),this.$emit("update")})).catch((e=>{this.$jusNotification({error:e})})).finally(this.cancel)},formatBody(){const{body:e}=this.template;if(e){const t=e.indexOf("<body>")+6,o=e.indexOf("</body>")-7;if(t>5&&o>0)return e.substring(t,o).trim()}return e}}},s=l,c=(o(12589),o(62239),o(1001)),d=(0,c.Z)(s,i,r,!1,null,"7b74240e",null),u=d.exports},89985:function(e,t,o){"use strict";o.d(t,{Z:function(){return F}});var i=o(61927),r=o(53083),n=o(82311),a=o(30418),l=o(16726),s=o(84687),c=o(75304),d=o(4434),u=o(93124),m=o(86537),p=o(98009),h=o(24697),g=o(28927),f=o(13264),A=o(95994),y=o(31789),$=o(92619),b=o(70756),_=o(97525),w=o(4424),C=o(35898),x=o(57759),v=o(97865),k=o(37259),E=o(40917);class I extends x.Z{constructor(e){super(e),this.editor=e,this.buttonView=null,this.createButton(),this.editor.ui.componentFactory.add("preview",(()=>this.buttonView))}createButton(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="18.409" height="18"><path data-name="Retângulo 67" fill="none" d="M.204 0h18v18h-18z"/><g data-name="Grupo 3101"><g data-name="Grupo 26"><path data-name="Caminho 253" d="M9.205 12.018a3.043 3.043 0 10-3.019-3.043 3.031 3.031 0 003.019 3.043z" fill="none" stroke="#000" stroke-width=".8"/><path data-name="Caminho 254" d="M9.204 10.745a1.839 1.839 0 10-1.781-1.838 1.814 1.814 0 001.781 1.838z" fill="#191919" fill-rule="evenodd"/><path data-name="Caminho 11629" d="M9.761 9.397a1.032 1.032 0 10-1-1.032 1.019 1.019 0 001 1.032z" fill="#fff" fill-rule="evenodd"/><path data-name="Caminho 255" d="M17.909 8.902a10.174 10.174 0 00-17.409 0 10.174 10.174 0 0017.409 0z" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/></g></g></svg>';this.buttonView=new v.Z,this.buttonView.set({label:"Visualizar Mensagem",icon:e,tooltip:!0}),this.buttonView.on("execute",(()=>{const e=Array(...document.querySelectorAll(".ck-content")).pop();if(e){const{getSelectedIds:t}=k["default"].getters,o=t.length?t[0]:Number(location.href.split("/").pop()),i=e.innerHTML;E.YB.$emit("SEE-PREVIEW",{template:i,disputeId:o})}}))}}class j extends x.Z{constructor(e){super(e),this.editor=e,this.buttonView=null,this.createButton(),this.editor.ui.componentFactory.add("imageAttachment",(()=>this.buttonView))}createButton(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="18" style="margin-left: 10px !important;" height="18"><path data-name="Caminho 13974" d="M8.948 4.948a.611.611 0 10-1.222 0c0 .009.005.017.005.026V13.5a3.254 3.254 0 11-6.508 0V3.273a2.034 2.034 0 114.067 0v8.591a.813.813 0 11-1.626 0V4.942a.106.106 0 000-.017.611.611 0 10-1.222 0 .106.106 0 000 .017v6.922a2.034 2.034 0 104.068 0V3.273a3.254 3.254 0 11-6.508 0V13.5a4.474 4.474 0 108.948 0V4.974h-.005c-.002-.009.003-.017.003-.026z"/></svg>';this.buttonView=new v.Z,this.buttonView.set({label:"Inserir Imagem",icon:e,tooltip:!0,withText:!1}),this.buttonView.on("execute",(()=>k["default"].dispatch("toggleImageUploadDialog",!0)))}}class Z extends x.Z{constructor(e){super(e),this.editor=e,this.registerConverters()}registerConverters(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"",key:"data-mention",classes:"",attributes:{href:!0,"data-user-id":!0}},model:{key:"mention",value:e=>{const t=this.editor.plugins.get("Mention").toMentionAttribute(e,{link:e.getAttribute("href"),userId:e.getAttribute("data-user-id")});return t}},converterPriority:"high"}),this.editor.conversion.for("downcast").attributeToElement({model:"mention",view:(e,{writer:t})=>{if(!e)return;const o="image"===e.type,i="memberMention"===e.type;return t.createAttributeElement(o?"img":i?"em":"span",{class:"justto-variable","data-mention":e.id,src:e.id,...i?{class:"justto-mention","account-id":e.accountId}:{}},{priority:20,id:e.uid})},converterPriority:"high"})}}var B=o(90408),F={data(){return{editor:i.Z}},computed:{...(0,B.Se)({variables:"getAvaliableVariablesToTemplate",members:"workspaceMembersByDispute"}),editorConfig(){return{plugins:[r.Z,n.Z,a.Z,l.Z,h.Z,g.Z,f.Z,s.Z,c.Z,d.Z,u.Z,m.Z,p.Z,A.Z,y.Z,$.Z,b.Z,...this.dontUseTablePlugin?[]:[w.Z,C.Z],...this.useImageAttachmentPlugin?[j]:[],...this.useMentionPlugin?[_.Z,Z]:[],...this.usePreviewPlugin?[I]:[]],mention:this.useMentionPlugin?{feeds:[{marker:"{",feed:this.getFeedItems,minimumCharacters:1,itemRenderer:this.customItemRenderer},{marker:"@",feed:this.getFeedPersonItems,minimumCharacters:0,itemRenderer:this.customMemberItemRenderer}]}:{},toolbar:{items:["bold","italic","underline","removeFormat","link","bulletedList","numberedList","|","insertTable","|","outdent","indent","|","blockQuote","undo","redo","imageStyle",...this.useImageAttachmentPlugin?["imageAttachment"]:[],...this.usePreviewPlugin?["preview"]:[]],viewportTopOffset:30,shouldNotGroupWhenFull:!0},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}},variablesList(){const e=[],t=[];return Object.keys(this.variables).map((o=>({id:`{{${o}}}`,name:`${this.variables[o]}`,type:e.includes(o)?"img":t.includes(o)?"link":"text"})))}},beforeMount(){this.getAvaliableVariablesToTemplate()},methods:{...(0,B.nv)(["getAvaliableVariablesToTemplate"]),setImgTag(e){this.$nextTick((()=>{const t=document.querySelector(".ck-editor__editable").ckeditorInstance;t.model.change((o=>{const i=o.createElement("image",{src:e});t.model.insertContent(i,t.model.document.selection)}))}))},customItemRenderer(e){return e.name},customMemberItemRenderer(e){return e.person?.name||e.accountEmail},getFeedItems(e){function t({name:t,id:o}){const i=(0,E.Ue)(e).replace(/{/g,"");return(0,E.Ue)(t).includes(i)||(0,E.Ue)(o).includes(i)}return this.variablesList.filter(t)},getFeedPersonItems(e){function t({name:t,person:o}){const i=(0,E.Ue)(e).replace(/{/g,"");return o?(0,E.Ue)(o.name).includes(i):(0,E.Ue)(t).includes(i)}return this.members.filter(t).map((e=>({...e,type:"memberMention",id:`@${this.customMemberItemRenderer(e)}`})))},ckeditorFocus(e){}}}},48373:function(e,t,o){"use strict";o.r(t);var i=o(87537),r=o.n(i),n=o(23645),a=o.n(n),l=a()(r());l.push([e.id,".reply-editor__container .reply-editor__body .ck-editor{height:90%!important}.reply-editor__container .reply-editor__body .ck-editor .ck-editor__main{height:100%!important}.reply-editor__container .reply-editor__body .ck-editor .ck-editor__main .ck-content{height:90%!important}","",{version:3,sources:["webpack://./src/components/layouts/DisuteQuickReplyEditor.vue"],names:[],mappings:"AAGI,wDACE,oBAAA,CAEA,yEACE,qBAAA,CAEA,qFACE,oBAAA",sourcesContent:["\n.reply-editor__container {\n  .reply-editor__body {\n    .ck-editor {\n      height: 90% !important;\n\n      .ck-editor__main {\n        height: 100% !important;\n\n        .ck-content {\n          height: 90% !important;\n        }\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),t["default"]=l},99424:function(e,t,o){"use strict";o.r(t);var i=o(87537),r=o.n(i),n=o(23645),a=o.n(n),l=a()(r());l.push([e.id,".reply-editor__container[data-v-7b74240e]{margin:0 0 16px 0;padding:0 0 16px 0;height:80vh}.reply-editor__container .reply-editor__body[data-v-7b74240e]{height:90%;margin-top:8px;display:flex;flex-direction:column;justify-content:space-between;gap:16px}.reply-editor__container .reply-editor__footer[data-v-7b74240e]{margin-top:16px}.reply-editor__container .reply-editor__footer .reply-editor__footer-row .reply-editor__footer-column[data-v-7b74240e]{width:100%;display:flex;justify-content:space-between}.reply-editor__container .reply-editor__footer .reply-editor__footer-row .reply-editor__footer-column div[data-v-7b74240e]:not(.messages-container__hint):not(.el-dialog__wrapper){display:flex}.messages-container__hint[data-v-7b74240e]{display:flex;flex-direction:column;text-align:left;font-size:11px}.messages-container__hint .messages-container__hint-hint[data-v-7b74240e]{margin-right:4px}.messages-container__hint .messages-container__hint-text[data-v-7b74240e]{display:flex;flex-direction:row;word-break:break-word}.messages-container__hint .messages-container__hint-text .messages-container__hint-text-click[data-v-7b74240e]{font-size:9px;text-align:center;background-color:#0756e4;padding:3px 4px;color:#fff;margin-right:4px;font-weight:700;border-radius:4px;cursor:pointer}","",{version:3,sources:["webpack://./src/components/layouts/DisuteQuickReplyEditor.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAEA,0CACE,iBAAA,CACA,kBAAA,CACA,WAAA,CAEA,8DACE,UAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,QAAA,CAGF,gEACE,eAAA,CAGE,uHACE,UAAA,CACA,YAAA,CACA,6BAAA,CAEA,mLACE,YAAA,CAOV,2CACE,YAAA,CACA,qBAAA,CACA,eAAA,CACA,cAAA,CACA,0EACE,gBAAA,CAEF,0EACE,YAAA,CACA,kBAAA,CACA,qBAAA,CACA,+GACE,aAAA,CACA,iBAAA,CACA,wBCpCY,CDqCZ,eAAA,CACA,UAAA,CACA,gBAAA,CACA,eAAA,CACA,iBAAA,CACA,cAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n.reply-editor__container {\n  margin: 0 0 16px 0;\n  padding: 0 0 16px 0;\n  height: 80vh;\n\n  .reply-editor__body {\n    height: 90%;\n    margin-top: 8px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    gap: 16px;\n  }\n\n  .reply-editor__footer {\n    margin-top: 16px;\n\n    .reply-editor__footer-row {\n      .reply-editor__footer-column {\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n\n        div:not(.messages-container__hint):not(.el-dialog__wrapper) {\n          display: flex;\n        }\n      }\n    }\n  }\n}\n\n.messages-container__hint {\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n  font-size: 11px;\n  .messages-container__hint-hint {\n    margin-right: 4px;\n  }\n  .messages-container__hint-text {\n    display: flex;\n    flex-direction: row;\n    word-break: break-word;\n    .messages-container__hint-text-click {\n      font-size: 9px;\n      text-align: center;\n      background-color: $--color-primary;\n      padding: 3px 4px;\n      color: white;\n      margin-right: 4px;\n      font-weight: 700;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),t["default"]=l},12589:function(e,t,o){var i=o(48373);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var r=o(39185).Z;r("f01c79be",i,!0,{sourceMap:!0,shadowMode:!1})},62239:function(e,t,o){var i=o(99424);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var r=o(39185).Z;r("57642d6d",i,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=1504.js.map