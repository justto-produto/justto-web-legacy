(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[1983],{31983:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return d}});var i=function(){var a=this,e=a._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.$store.state.loading,expression:"$store.state.loading"}],staticClass:"campaign-step"},[e("h2",{staticClass:"new-import-view__title"},[a._v(" Configuração de campanhas ")]),e("p",[a._v(" O sistema trabalha com o conceito de campanhas. Campanha é um agrupamento de disputas dentro da mesma importação com "+a._s(a.$tc("PARTY_RESPONDENT",a.isRecoveryStrategy)+"s")+" em comum. Por isso, ao importar, o sistema automaticamente divide suas disputas em campanhas para que você possa configurá-las separadamente. "),e("br"),e("br"),e("br")]),a.validationInProgress?e("el-alert",{attrs:{closable:!1,type:"info"}},[e("div",{staticClass:"el-loading-parent--relative"},[e("div",{staticClass:"el-loading-mask"},[e("div",{staticClass:"el-loading-spinner"},[e("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[e("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])]),e("div",[e("h2",[a._v("Validação de duplicidade em andamento")]),a._v(" Aguarde um momento enquanto o sistema valida disputas duplicadas e expiradas. ")])]):a._e(),a.strategyList.length||a.loadingStrategies?a._e():e("el-alert",{attrs:{closable:!1,type:"error"}},[e("div",[e("h2",[a._v("Atenção.")]),e("p",[a._v(" Estratégias não encontradas. Tente novamente clicando "),e("el-button",{attrs:{type:"text"},on:{click:a.getStrategies}},[a._v(" aqui ")]),a._v(". ")],1)])]),!a.strategyList.length&&a.loadingStrategies?e("el-alert",{attrs:{closable:!1,type:"info"}},[e("div",{staticClass:"el-loading-parent--relative"},[e("div",{staticClass:"el-loading-mask"},[e("div",{staticClass:"el-loading-spinner"},[e("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[e("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])]),e("div",[e("h2",[a._v("Carregando estratégias")]),e("span",[a._v("Aguarde um momento enquanto o sistema carrega as estratégias disponíveis para esta campanha.")])])]):a._e(),!a.validationInProgress&&a.duplicatedDisputes.length+a.summaryWarnings.duplicated+a.summaryWarnings.expired>0?e("el-alert",{attrs:{type:"error"}},[e("h2",[a._v("Atenção!")]),a.summaryWarnings.duplicated||a.summaryWarnings.expired?e("div",[a.summaryWarnings.duplicated?e("span",[a._v(" - Encontramos "+a._s(a.summaryWarnings.duplicated)+" registro"),a.summaryWarnings.duplicated>1?e("span",[a._v("s")]):a._e(),a._v(" duplicado"),a.summaryWarnings.duplicated>1?e("span",[a._v("s")]):a._e(),e("br")]):a._e(),a.summaryWarnings.expired?e("span",[a._v(" - Encontramos "+a._s(a.summaryWarnings.expired)+" disputa"),a.summaryWarnings.expired>1?e("span",[a._v("s")]):a._e(),a._v(" expirada"),a.summaryWarnings.expired>1?e("span",[a._v("s")]):a._e(),e("br")]):a._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:a.summaryWarnings.duplicated&&a.isJusttoAdmin,expression:"summaryWarnings.duplicated && isJusttoAdmin"}],staticClass:"summary-duplucated-container"},[e("span",[a._v("O que deseja fazer com as duplicidades?")]),e("el-radio-group",{model:{value:a.duplicatedActionToDo,callback:function(e){a.duplicatedActionToDo=e},expression:"duplicatedActionToDo"}},[e("el-radio-button",{attrs:{label:"IGNORE"}},[a._v(" Ignorar duplicadas ")]),e("el-radio-button",{attrs:{label:"UPDATE"}},[a._v(" Atualizar dados ")]),e("el-radio-button",{attrs:{label:"DUPLICATE"}},[a._v(" Duplicar disputas ")])],1),"IGNORE"===a.duplicatedActionToDo?e("span",[e("strong",[a._v("Nenhum campo será atualizado.")])]):"UPDATE"===a.duplicatedActionToDo?e("span",[e("strong",[a._v("Os seguintes campos serão atualizados:")]),e("ul",[e("li",[a._v("Dados da parte")]),e("li",[a._v("Alçada máxima")]),e("li",[a._v("Estratégia na plataforma")]),e("li",[a._v("Descrição")])])]):a._e()],1),e("a",{on:{click:a.handleValidateDisputes}},[a._v(" "+a._s(a.showDetails?"ocultar detalhes":"ver detalhes")+" ")])]):a._e(),a.showDetails&&!a.duplicatedDisputes.length?e("span",[a._v(" Carregando disputas duplicadas "),e("i",{staticClass:"el-icon-loading"})]):a._e(),a._l(a.duplicatedDisputes,(function(t,i){return e("ul",{directives:[{name:"show",rawName:"v-show",value:a.showDetails,expression:"showDetails"}],key:t.code+i},[e("li",[a._v(" "+a._s(t.code)+" - Disputa "),"DUPLICATED_DISPUTE"===t.status||"DUPLICATE_AND_EXPIRED"===t.status||"DUPLICATED"===t.status?e("span",["IGNORE"===a.duplicatedActionToDo?e("span",[e("strong",[a._v("não será importada")]),a._v(" porque já está cadastrada (campanha "+a._s(t.duplicatedBy.campaignName)+"). ")]):a._e(),"UPDATE"===a.duplicatedActionToDo?e("span",[a._v(" já está cadastrada e "),e("strong",[a._v("será atualizada")]),a._v(" com os novos dados (campanha "+a._s(t.duplicatedBy.campaignName)+"). ")]):a._e(),"DUPLICATE"===a.duplicatedActionToDo?e("span",[a._v(" já está cadastrada e "),e("strong",[a._v("será duplicada")]),a._v(" quando prosseguir a importação (campanha "+a._s(t.duplicatedBy.campaignName)+"). ")]):a._e()]):a._e(),"DUPLICATED_ROW"===t.status?e("span",["IGNORE"===a.duplicatedActionToDo?e("span",[e("strong",[a._v("será importada apenas 1 vez")]),a._v(" pois está duplicada na planilha ")]):a._e(),"UPDATE"===a.duplicatedActionToDo?e("span",[a._v(" está duplicada na planilha. Irá importar "),e("strong",[a._v("apenas 1 vez")]),a._v(" e terá os dados atualizados pelas linhas duplicadas ")]):a._e(),"DUPLICATE"===a.duplicatedActionToDo?e("span",[a._v(" está duplicada na planilha. Irá "),e("strong",[a._v("criar uma disputa para cada registro duplicado")]),a._v(" da planilha ")]):a._e()]):a._e(),"EXPIRED"===t.status?e("span",[e("strong",[a._v("será importada")]),a._v(" com data já expirada ("+a._s(a._f("moment")(t.expirationDate.dateTime,"DD/MM/YY"))+"). ")]):a._e()])])}))],2):a._e(),e("div",{staticClass:"import-view__container"},[a.validationInProgress?a._e():e("div",{staticClass:"import-view__content"},a._l(a.mappedCampaigns,(function(t,i){return e("jus-import-feedback-card",{key:t.cluster,attrs:{show:1===a.mappedCampaigns.length||!a.mappedCampaigns[1].replicate,"mapped-campaign":a.mappedCampaigns[i],index:i+1,"original-quantity":a.mappedCampaigns.length,"data-testid":"import-feedback"},on:{"update:mappedCampaign":function(e){return a.$set(a.mappedCampaigns,i,e)},"update:mapped-campaign":function(e){return a.$set(a.mappedCampaigns,i,e)}}})})),1)])],1)},n=[],s=t(90408),r={name:"CampaignStep",components:{JusImportFeedbackCard:()=>t.e(9021).then(t.bind(t,49021))},props:{campaignIsMapped:{type:Boolean,default:!1},mappedCampaigns:{type:Array,default:()=>[]},duplicatedAction:{type:String,default:"IGNORE"}},data(){return{duplicatedDisputes:[],summaryWarnings:{duplicated:0,expired:0},loadingStrategies:!1,showDetails:!1}},computed:{...(0,s.Se)({loading:"loading",isJusttoAdmin:"isJusttoAdmin",strategyList:"getMyStrategiesLite",importedFileName:"importedFileName",validationInProgress:"validationInProgress",isRecoveryStrategy:"isWorkspaceRecovery"}),duplicatedActionToDo:{get(){return this.duplicatedAction},set(a){this.$emit("update:duplicatedAction",a)}}},watch:{campaignIsMapped(a){a&&this.handleValidateSummary()}},async beforeMount(){this.startDuplicateValidations(),this.strategyList.length||this.getStrategies(),this.handleValidateSummary()},methods:{...(0,s.nv)(["showLoading","hideLoading","getMyStrategiesLite","validateGeneseRunner","startDuplicateValidations","finishDuplicateValidations","validateGeneseRunnerSummary"]),async getStrategies(){this.loadingStrategies=!0,this.showLoading();for(const a in[0,1,2,3,4]){if(await new Promise((e=>setTimeout(e,3e3*a))),!this.loading)return void(this.loadingStrategies=!1);this.getMyStrategiesLite().then(this.hideLoading).catch((()=>{this.$jusSegment(`Tentativa ${Number(a)+Number(1)} de buscar as estratégias para a importação`)}))}this.loadingStrategies=!1},handleValidateSummary(){this.validateGeneseRunnerSummary().then((({summary:a})=>{this.summaryWarnings=a})).catch((a=>{this.$jusNotification({error:a}),this.finishDuplicateValidations()})).finally(this.finishDuplicateValidations)},handleValidateDisputes(){this.showDetails=!this.showDetails,this.showDetails&&this.$store.dispatch("validateGeneseRunner").then((({disputes:a})=>{this.duplicatedDisputes=a})).catch((a=>this.$jusNotification({error:a})))}}},p=r,o=(t(7152),t(1001)),l=(0,o.Z)(p,i,n,!1,null,null,null),d=l.exports},10070:function(a,e,t){"use strict";t.r(e);var i=t(87537),n=t.n(i),s=t(23645),r=t.n(s),p=r()(n());p.push([a.id,".campaign-step>p{text-align:center;max-width:600px;margin:auto}.campaign-step .import-view__content{display:flex;flex-direction:column;align-items:center}.campaign-step .el-input__prefix{font-size:1.3rem;left:10px}.campaign-step .el-input--prefix .el-input__inner{padding-left:40px}.campaign-step .el-input--suffix .el-input__inner{padding-right:40px}.campaign-step .el-alert{margin-top:20px;padding-bottom:12px}.campaign-step .el-alert .el-radio-button__inner{line-height:0}.campaign-step .el-alert .el-alert__content{width:100%}.campaign-step .el-alert h2{margin:0 0 10px}.campaign-step .el-alert p{font-size:14px}.campaign-step .el-alert ul{padding-left:14px}.campaign-step .el-alert.el-alert--info p{display:flex}.campaign-step .el-alert.el-alert--info .el-loading-parent--relative{width:42px;margin-right:20px}.campaign-step .el-alert.el-alert--info .el-loading-parent--relative .el-loading-mask{background-color:transparent}.summary-duplucated-container{display:flex;gap:8px;flex-direction:column;margin:16px 0}","",{version:3,sources:["webpack://./src/views/main/import/partials/CampaignStep.vue"],names:[],mappings:"AAEE,iBACE,iBAAA,CACA,eAAA,CACA,WAAA,CAEF,qCACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAEF,iCACE,gBAAA,CACA,SAAA,CAEF,kDACE,iBAAA,CAEF,kDACE,kBAAA,CAEF,yBACE,eAAA,CACA,mBAAA,CACA,iDACE,aAAA,CAEF,4CACE,UAAA,CAEF,4BACE,eAAA,CAEF,2BACE,cAAA,CAEF,4BACE,iBAAA,CAGA,0CACE,YAAA,CAEF,qEACE,UAAA,CACA,iBAAA,CACA,sFACE,4BAAA,CAMV,8BACE,YAAA,CACA,OAAA,CACA,qBAAA,CACA,aAAA",sourcesContent:["\n.campaign-step {\n  >p {\n    text-align: center;\n    max-width: 600px;\n    margin: auto;\n  }\n  .import-view__content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .el-input__prefix {\n    font-size: 1.3rem;\n    left: 10px;\n  }\n  .el-input--prefix .el-input__inner {\n    padding-left: 40px;\n  }\n  .el-input--suffix .el-input__inner {\n    padding-right: 40px;\n  }\n  .el-alert {\n    margin-top: 20px;\n    padding-bottom: 12px;\n    .el-radio-button__inner {\n      line-height: 0\n    }\n    .el-alert__content {\n      width: 100%;\n    }\n    h2 {\n      margin: 0 0 10px;\n    }\n    p {\n      font-size: 14px;\n    }\n    ul {\n      padding-left: 14px;\n    }\n    &.el-alert--info {\n      p {\n        display: flex;\n      }\n      .el-loading-parent--relative  {\n        width: 42px;\n        margin-right: 20px;\n        .el-loading-mask {\n          background-color: transparent;\n        }\n      }\n    }\n  }\n}\n.summary-duplucated-container {\n  display: flex;\n  gap: 8px;\n  flex-direction: column;\n  margin: 16px 0;\n}\n"],sourceRoot:""}]),e["default"]=p},7152:function(a,e,t){var i=t(10070);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[a.id,i,""]]),i.locals&&(a.exports=i.locals);var n=t(39185).Z;n("441e3666",i,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=1983.js.map