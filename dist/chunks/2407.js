(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[2407],{92407:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{title:"Entre em contato por telefone",visible:e.dialogVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"custom-class":"engagement-limit-dialog",width:"auto",center:"","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"engagement-limit__content"},[t("el-alert",{staticClass:"engagement-limit__alert",attrs:{title:"Recomendação",type:"info",closable:!1,center:""}},[t("p",[e._v(" Já executamos várias tentativas automáticas de contato, "),t("br"),e._v(" continuaremos tentando via e-mail. "),t("br"),t("br"),e._v(" Porém, recomendamos que tente realizar ligações telefonicas! ")])]),t("h3",{staticClass:"engagement-limit__label"},[e._v(" Contatos disponíveis: ")]),e._l(e.summarizedPartyContacts,(function(i){return t("div",{directives:[{name:"show",rawName:"v-show",value:(i.phones||[]).length>0,expression:"(contact.phones || []).length > 0"}],key:`party#${i.id}`,staticClass:"engagement-limit__content-item"},[t("el-checkbox",{staticClass:"engagement-limit__content-item__checkbox",attrs:{value:e.isAllCheck(i.id),indeterminate:e.isIndeterminate(i.id)&&!e.isAllCheck(i.id)},on:{change:function(t){return e.handleCheckAllChange(i.id)}}},[t("div",[e._v(" "+e._s(i.name)+" ("+e._s(e._f("capitalize")(e.translatedPartyType(i)))+") ")])]),t("el-checkbox-group",{model:{value:e.toCall,callback:function(t){e.toCall=t},expression:"toCall"}},e._l(i.phones||[],(function(i){return t("el-checkbox",{key:`phone#${i.id}`,attrs:{label:i.id}},[e._v(" "+e._s(e._f("phoneNumber")(i.number))+" ")])})),1)],1)}))],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"secondary",size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Ignorar ")]),t("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.toCall.length},on:{click:e.handlemMakeCall}},[e._v(" Ligar "+e._s(e.toCall.length?`para ${e.toCall.length} contato(s)`:"")+" ")]),t("br"),t("br"),e.toCall.length>1?t("sub",[e._v(" *Os contatos seráo adicionados à fila de ligações, "),t("br"),e._v(" que ira executar chamadas para todos "),t("br"),e._v(" os contatos selecionados em sequência. ")]):e._e()],1)])},a=[],l=i(90408),s={props:{disputeId:{type:Number,required:!0}},data:()=>({isLoading:!1,toCall:[]}),computed:{...(0,l.Se)({engagementLimit:"getEngagementLimit",isRecovery:"isWorkspaceRecovery",appInstance:"getAppInstance",dispute:"dispute"}),dialogVisible:{get(){return this.engagementLimit},set(e){this.setEngageLimit({value:String(e)})}},summarizedPartyContacts(){return(this.dispute.disputeRoles||[]).filter((({party:e})=>"CLAIMANT"===e)).map((({id:e,name:t,phones:i,party:n,roles:a})=>({id:e,name:t,party:n,roles:a,phones:i.filter((({archived:e,blocked:t,isMain:i,isValid:n})=>!e&&!t&&i&&n))})))},countContactsSelected(){return e=>(this.summarizedPartyContacts.find((({id:t})=>t===e))?.phones||[]).filter((({id:e})=>this.toCall.includes(e))).length},isIndeterminate(){return e=>this.countContactsSelected(e)>0},isAllCheck:{get(){return e=>{const t=(this.summarizedPartyContacts.find((({id:t})=>t===e))?.phones||[]).length;return t>0&&t===this.countContactsSelected(e)}}},translatedPartyType(){return e=>{let t="UNKNOWN";return e.roles.includes("PARTY")?t=e.roles.includes("LAWYER")?"OWN_CAUSE":"PARTY":e.roles.includes("LAWYER")&&(t="LAWYER"),this.$tc(`roles.${t}.CLAIMANT`,this.isRecovery)}}},watch:{engagementLimit:{handler:"fetchData",deep:!0}},methods:{...(0,l.nv)({getDispute:"getDispute",addCall:"addCall"}),...(0,l.OI)({setEngageLimit:"handleEngageLimit"}),fetchData(e){e&&(this.isLoading=!0,this.getDispute(this.disputeId).finally((()=>{this.isLoading=!1})))},handleCheckAllChange(e){const t=(this.summarizedPartyContacts.find((({id:t})=>t===e))?.phones||[]).map((({id:e})=>e)),i=t.filter((e=>this.toCall.includes(e))).length>0,n=t.filter((e=>this.toCall.includes(e))).length===t.length;this.toCall=n||i?!n&&i?[...this.toCall,...t.filter((e=>!this.toCall.includes(e)))]:[...this.toCall.filter((e=>!t.includes(e)))]:[...this.toCall,...t]},handlemMakeCall(){this.toCall.forEach((e=>{const t=(this.dispute?.disputeRoles||[]).find((t=>{const i=(t?.phones||[]).map((({id:e})=>e));return i.includes(e)})),i=t.id,n=t.name,a=t?.phones.find((({id:t})=>t===e))?.number,l={disputeId:Number(this.disputeId),disputeStatus:this.dispute.status,toRoleId:i,toRoleName:n,number:a,appInstance:this.appInstance,contacts:{emails:t?.emails,phones:t?.phones}};this.addCall(l)})),this.dialogVisible=!1}}},o=s,d=(i(55872),i(1001)),r=(0,d.Z)(o,n,a,!1,null,null,null),c=r.exports},65832:function(e,t,i){"use strict";i.r(t);var n=i(87537),a=i.n(n),l=i(23645),s=i.n(l),o=s()(a());o.push([e.id,".engagement-limit-dialog .el-dialog__body .engagement-limit__content{display:flex;flex-direction:column;gap:16px}.engagement-limit-dialog .el-dialog__body .engagement-limit__content .engagement-limit__label{margin:0;font-weight:600}.engagement-limit-dialog .el-dialog__body .engagement-limit__content .engagement-limit__content-item{display:flex;flex-direction:column;gap:8px}.engagement-limit-dialog .el-dialog__body .engagement-limit__content .engagement-limit__content-item .el-checkbox-group{display:flex;flex-direction:column;padding-left:16px}","",{version:3,sources:["webpack://./src/components/dialogs/EngagementLimitDialog.vue"],names:[],mappings:"AAGI,qEACE,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,8FACE,QAAA,CACA,eAAA,CAGF,qGACE,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,wHACE,YAAA,CACA,qBAAA,CACA,iBAAA",sourcesContent:["\n.engagement-limit-dialog {\n  .el-dialog__body {\n    .engagement-limit__content {\n      display: flex;\n      flex-direction: column;\n      gap: 16px;\n\n      .engagement-limit__label {\n        margin: 0;\n        font-weight: 600;\n      }\n\n      .engagement-limit__content-item {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n\n        .el-checkbox-group {\n          display: flex;\n          flex-direction: column;\n          padding-left: 16px;\n        }\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),t["default"]=o},55872:function(e,t,i){var n=i(65832);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(39185).Z;a("c8573212",n,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=2407.js.map