(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[3138],{3138:function(e,s,o){"use strict";o.r(s),o.d(s,{default:function(){return p}});var t=function(){var e=this,s=e._self._c;return s("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.isVisible,"custom-class":"change-workspace-dialog","append-to-body":"",title:"Alterar Equipe",width:"40%"},on:{"update:visible":function(s){e.isVisible=s}}},[s("el-select",{attrs:{placeholder:"Selecione",filterable:"","data-testid":"select-workspace"},model:{value:e.selectedWorkspace,callback:function(s){e.selectedWorkspace=s},expression:"selectedWorkspace"}},e._l(e.workspaces,(function(o,t){return s("el-option",{key:o.id,attrs:{value:t,label:o.workspace.teamName,disabled:o.workspace.id==e.loggedWorkspaceId,"data-testid":"select-workspace"}})})),1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(s){e.isVisible=!1}}},[e._v(" Cancelar ")]),s("el-button",{attrs:{disabled:""===e.selectedWorkspace,type:"primary"},on:{click:e.getMembersAndRedirect}},[e._v(" Alterar ")])],1)],1)},i=[],a=o(90408),c={props:{visible:{type:Boolean,default:()=>!1}},data:()=>({selectedWorkspace:""}),computed:{...(0,a.Se)({loggedWorkspaceId:"workspaceId",workspaces:"getUserWorkspaces",customHome:"getCustomHome"}),isVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{...(0,a.nv)({getMyWorkspaces:"myWorkspace"}),goToWorkspace(e,s=null){const o=this.$loading({lock:!0,text:"Alterando Equipe..."}),t=this.$store.getters.workspaceTeamName;e.workspace&&this.$store.commit("setWorkspace",e.workspace),e.profile&&this.$store.commit("setProfile",e.profile),e.person&&this.$store.commit("setLoggedPerson",e.person),this.$store.dispatch("getWorkspaceMembers").then((()=>{this.$jusSegment("Troca de time/workspace",{description:`Alterado de ${e.workspace.name} para ${t}`})})).catch((e=>{this.$jusNotification({error:e})})).finally((()=>{const{href:e}=window.location;this.isVisible=!1,setTimeout((()=>{o.close()}),1e3),s?window.location.replace(e.split("#")[0]+`#/negotiation/${s}`):window.location.replace(e.split("#")[0]+`#${this.customHome||"/negotiation"}`),window.location.reload()}))},getMembersAndRedirect(){const e=this.$loading({lock:!0,text:"Alterando Equipe..."}),s=this.workspaces[this.selectedWorkspace];s.person?this.goToWorkspace(s):this.$store.dispatch("ensureWorkspaceAccesss",s.workspace.id).then((o=>{this.$store.commit("setToken",o),this.getMyWorkspaces().then((e=>{const o=e.find((e=>e.workspace.id===s.workspace.id));this.goToWorkspace(o)})).finally((()=>{setTimeout(e.close,1e3)}))}))}}},r=c,l=(o(40555),o(1001)),n=(0,l.Z)(r,t,i,!1,null,null,null),p=n.exports},80921:function(e,s,o){"use strict";o.r(s);var t=o(87537),i=o.n(t),a=o(23645),c=o.n(a),r=c()(i());r.push([e.id,".change-workspace-dialog .el-dialog__body{display:flex;flex-direction:column}","",{version:3,sources:["webpack://./src/components/dialogs/JusChangeWorkspace.vue"],names:[],mappings:"AAEE,0CACE,YAAA,CACA,qBAAA",sourcesContent:["\n.change-workspace-dialog {\n  .el-dialog__body {\n    display: flex;\n    flex-direction: column;\n  }\n}\n"],sourceRoot:""}]),s["default"]=r},40555:function(e,s,o){var t=o(80921);t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);var i=o(39185).Z;i("349692ec",t,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=3138.js.map