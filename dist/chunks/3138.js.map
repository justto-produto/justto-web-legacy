{"version":3,"file":"chunks/3138.js","mappings":"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","sources":["webpack://@projuris/justto-web/./src/components/dialogs/JusChangeWorkspace.vue","webpack://@projuris/justto-web/src/components/dialogs/JusChangeWorkspace.vue","webpack://@projuris/justto-web/./src/components/dialogs/JusChangeWorkspace.vue?a206","webpack://@projuris/justto-web/./src/components/dialogs/JusChangeWorkspace.vue?9538","webpack://@projuris/justto-web/./src/components/dialogs/JusChangeWorkspace.vue?0056","webpack://@projuris/justto-web/./src/components/dialogs/JusChangeWorkspace.vue?497c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"visible\":_vm.isVisible,\"custom-class\":\"change-workspace-dialog\",\"append-to-body\":\"\",\"title\":\"Alterar Equipe\",\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.isVisible=$event}}},[_c('el-select',{attrs:{\"placeholder\":\"Selecione\",\"filterable\":\"\",\"data-testid\":\"select-workspace\"},model:{value:(_vm.selectedWorkspace),callback:function ($$v) {_vm.selectedWorkspace=$$v},expression:\"selectedWorkspace\"}},_vm._l((_vm.workspaces),function(workspace,index){return _c('el-option',{key:workspace.id,attrs:{\"value\":index,\"label\":workspace.workspace.teamName,\"disabled\":workspace.workspace.id == _vm.loggedWorkspaceId,\"data-testid\":\"select-workspace\"}})}),1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.isVisible = false}}},[_vm._v(\" Cancelar \")]),_c('el-button',{attrs:{\"disabled\":_vm.selectedWorkspace === '',\"type\":\"primary\"},on:{\"click\":_vm.getMembersAndRedirect}},[_vm._v(\" Alterar \")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"isVisible\"\n    custom-class=\"change-workspace-dialog\"\n    append-to-body\n    title=\"Alterar Equipe\"\n    width=\"40%\"\n  >\n    <el-select\n      v-model=\"selectedWorkspace\"\n      placeholder=\"Selecione\"\n      filterable\n      data-testid=\"select-workspace\"\n    >\n      <el-option\n        v-for=\"(workspace, index) in workspaces\"\n        :key=\"workspace.id\"\n        :value=\"index\"\n        :label=\"workspace.workspace.teamName\"\n        :disabled=\"workspace.workspace.id == loggedWorkspaceId\"\n        data-testid=\"select-workspace\"\n      />\n    </el-select>\n    <span\n      slot=\"footer\"\n      class=\"dialog-footer\"\n    >\n      <el-button @click=\"isVisible = false\">\n        Cancelar\n      </el-button>\n      <el-button\n        :disabled=\"selectedWorkspace === ''\"\n        type=\"primary\"\n        @click=\"getMembersAndRedirect\"\n      >\n        Alterar\n      </el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\n\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: () => (false)\n    }\n  },\n\n  data: () => ({\n    selectedWorkspace: ''\n  }),\n\n  computed: {\n    ...mapGetters({\n      loggedWorkspaceId: 'workspaceId',\n      workspaces: 'getUserWorkspaces',\n      customHome: 'getCustomHome'\n    }),\n\n    isVisible: {\n      get() {\n        return this.visible\n      },\n      set(is) {\n        this.$emit('update:visible', is)\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions({\n      getMyWorkspaces: 'myWorkspace'\n    }),\n\n    goToWorkspace(workspace, specificDispute = null) {\n      const loading = this.$loading({\n        lock: true,\n        text: 'Alterando Equipe...'\n      })\n\n      const oldWorkspace = this.$store.getters.workspaceTeamName\n\n      if (workspace.workspace) {\n        this.$store.commit('setWorkspace', workspace.workspace)\n      }\n\n      if (workspace.profile) {\n        this.$store.commit('setProfile', workspace.profile)\n      }\n\n      if (workspace.person) {\n        this.$store.commit('setLoggedPerson', workspace.person)\n      }\n\n      this.$store.dispatch('getWorkspaceMembers')\n        .then(() => {\n          this.$jusSegment('Troca de time/workspace', {\n            description: `Alterado de ${workspace.workspace.name} para ${oldWorkspace}`\n          })\n        }).catch(error => {\n          this.$jusNotification({ error })\n        }).finally(() => {\n          const { href } = window.location\n\n          this.isVisible = false\n\n          setTimeout(() => {\n            loading.close()\n          }, 1000)\n\n          if (specificDispute) {\n            window.location.replace(href.split('#')[0] + `#/negotiation/${specificDispute}`)\n          } else {\n            window.location.replace(href.split('#')[0] + `#${this.customHome || '/negotiation'}`)\n          }\n          window.location.reload()\n        })\n    },\n\n    getMembersAndRedirect() {\n      const loading = this.$loading({\n        lock: true,\n        text: 'Alterando Equipe...'\n      })\n\n      const selectedWorkspace = this.workspaces[this.selectedWorkspace]\n\n      if (selectedWorkspace.person) {\n        this.goToWorkspace(selectedWorkspace)\n      } else {\n        this.$store.dispatch('ensureWorkspaceAccesss', selectedWorkspace.workspace.id).then((res) => {\n          this.$store.commit('setToken', res)\n\n          this.getMyWorkspaces().then(response => {\n            const updatedWorkspace = response.find(el => {\n              return el.workspace.id === selectedWorkspace.workspace.id\n            })\n\n            this.goToWorkspace(updatedWorkspace)\n          }).finally(() => { setTimeout(loading.close, 1000) })\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.change-workspace-dialog {\n  .el-dialog__body {\n    display: flex;\n    flex-direction: column;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JusChangeWorkspace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JusChangeWorkspace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JusChangeWorkspace.vue?vue&type=template&id=66f011cc&\"\nimport script from \"./JusChangeWorkspace.vue?vue&type=script&lang=js&\"\nexport * from \"./JusChangeWorkspace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JusChangeWorkspace.vue?vue&type=style&index=0&id=66f011cc&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".change-workspace-dialog .el-dialog__body{display:flex;flex-direction:column}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/dialogs/JusChangeWorkspace.vue\"],\"names\":[],\"mappings\":\"AAEE,0CACE,YAAA,CACA,qBAAA\",\"sourcesContent\":[\"\\n.change-workspace-dialog {\\n  .el-dialog__body {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JusChangeWorkspace.vue?vue&type=style&index=0&id=66f011cc&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"349692ec\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","attrs","isVisible","on","$event","model","value","selectedWorkspace","callback","$$v","expression","_l","workspaces","workspace","index","key","id","teamName","loggedWorkspaceId","staticClass","slot","_v","getMembersAndRedirect","staticRenderFns","props","visible","type","Boolean","default","data","computed","mapGetters","customHome","get","set","is","$emit","methods","mapActions","getMyWorkspaces","goToWorkspace","specificDispute","loading","$loading","lock","text","oldWorkspace","$store","getters","workspaceTeamName","commit","profile","person","dispatch","then","$jusSegment","description","name","catch","error","$jusNotification","finally","href","window","location","setTimeout","close","replace","split","reload","res","response","updatedWorkspace","find","el","component","___CSS_LOADER_EXPORT___","push","module","content","__esModule","locals","exports","add"],"sourceRoot":""}