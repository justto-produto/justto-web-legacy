"use strict";(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[3400],{53400:function(e,s,o){o.r(s),o.d(s,{default:function(){return c}});var t=function(){var e=this,s=e._self._c;return s("article",{directives:[{name:"loading",rawName:"v-loading",value:e.localLoading,expression:"localLoading"}],staticClass:"edit-user-container"},[s("el-form",{ref:"editUserForm",attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"Nome",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(s){e.$set(e.form,"name",s)},expression:"form.name"}},[s("span",{staticClass:"is-pointer",attrs:{slot:"append"},domProps:{textContent:e._s("Alterar")},on:{click:function(s){return e.editName()}},slot:"append"})])],1),s("el-form-item",{attrs:{label:"Antiga senha",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password","show-password":""},model:{value:e.form.oldPassword,callback:function(s){e.$set(e.form,"oldPassword",s)},expression:"form.oldPassword"}})],1),s("el-row",{attrs:{gutter:12}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Nova senha",prop:"password"}},[s("el-input",{attrs:{"show-password":"",type:"password",autocomplete:"false"},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Confirmar senha",prop:"confirmPassword"}},[s("el-input",{attrs:{disabled:!e.passwordIsValid,"show-password":"",type:"password",autocomplete:"false"},model:{value:e.form.confirmPassword,callback:function(s){e.$set(e.form,"confirmPassword",s)},expression:"form.confirmPassword"}},[s("input",{attrs:{slot:"preppend"},slot:"preppend"}),s("span",{staticClass:"is-pointer",attrs:{slot:"append"},domProps:{textContent:e._s("Alterar")},on:{click:function(s){return e.editPassword()}},slot:"append"})])],1)],1)],1),s("el-form-item",{attrs:{label:"Telefone de contato",prop:"phone"}},[s("el-input",{directives:[{name:"mask",rawName:"v-mask",value:["### (##) # ####-####",,"## (##) # ####-####","(##) ####-####","(##) #####-####"],expression:"['### (##) # ####-####',, '## (##) # ####-####', '(##) ####-####', '(##) #####-####']"}],model:{value:e.form.phone,callback:function(s){e.$set(e.form,"phone",s)},expression:"form.phone"}},[s("span",{staticClass:"is-pointer",attrs:{slot:"append"},domProps:{textContent:e._s("Alterar")},on:{click:function(s){return e.editPhone()}},slot:"append"})])],1)],1)],1)},a=[],r=o(90408),i=o(18814),n={data(){return{localLoading:!1,form:{name:"",oldPassword:"",password:"",confirmPassword:"",phone:""},rules:{phone:[{required:!0,message:"Este campo obrigatório",trigger:"submit"},{validator:i.a$,message:"Telefone inválido",trigger:"change"}],password:[{required:!0,message:"Este campo obrigatório",trigger:"submit"},{min:6,max:12,message:"Este campo deve ter de 6 a 12 caracteres",trigger:"blur"}],oldPassword:[{required:!0,message:"Este campo obrigatório",trigger:"submit"},{min:6,max:12,message:"Este campo deve ter de 6 a 12 caracteres",trigger:"blur"}],confirmPassword:[{required:!0,message:"Este campo obrigatório",trigger:"submit"},{min:6,max:12,message:"Este campo deve ter de 6 a 12 caracteres",trigger:"blur"}]}}},computed:{...(0,r.Se)({accountId:"accountId",id:"loggedPersonId",name:"loggedPersonName",hasName:"loggedPersonHasName",phone:"loggedPersonPhone"}),passwordIsValid(){const e=this.form.password.trim().length;return e>=6&&e<=12},confirmPasswordIsValid(){const e=this.form.confirmPassword.trim().length,s=this.form.confirmPassword===this.form.password;return e>=6&&e<=12&&s}},mounted(){Object.assign(this.form,{name:this.hasName?this.name:"",phone:this.phone?.number||""}),this.$nextTick().then((e=>this.$forceUpdate()))},methods:{...(0,r.nv)(["setMainPhone","updatePassword","changeMemberName","changeLoggedPersonName","changeAccountName","changeLoggedPersonPhone"]),emitClose(){this.localLoading=!1,this.$emit("close")},editName(){this.localLoading=!0,this.changeMemberName({updateWorkspace:!1,updatePerson:!0,accountId:this.accountId,name:this.form.name}).then((()=>{this.changeLoggedPersonName(this.form.name),this.changeAccountName(this.form.name),this.$jusSegment("Nome do usuário alterado na edição"),this.$jusNotification({title:"Yay!",message:"Nome alterado com sucesso.",type:"success"})})).catch((e=>this.$jusNotification({error:e}))).finally(this.emitClose)},editPhone(){this.localLoading=!0,this.$refs.editUserForm.validateField("phone",(e=>{e?this.localLoading=!1:this.setMainPhone({phoneDTO:{number:this.form.phone},personId:this.id}).then((e=>{this.changeLoggedPersonPhone(e),this.$jusNotification({title:"Yay!",message:"Telefone de contato alterado com sucesso.",type:"success"})})).catch((e=>{this.$jusNotification({error:e})})).finally(this.emitClose)}))},editPassword(){this.passwordIsValid&&this.confirmPasswordIsValid&&(this.localLoading=!0,this.$refs.editUserForm.validate((e=>{const{password:s,oldPassword:o}=this.form;e&&s!==o?this.updatePassword({password:s,oldPassword:o}).then((()=>{this.form.oldPassword=s,this.$jusSegment("Senha do usuário alterada"),this.$jusNotification({title:"Yay!",message:"Senha alterada com sucesso.",type:"success"})})).catch((e=>{this.$jusNotification({error:e})})).finally(this.emitClose):this.localLoading=!1})))}}},l=n,d=o(1001),m=(0,d.Z)(l,t,a,!1,null,null,null),c=m.exports}}]);
//# sourceMappingURL=3400.js.map