(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[3494],{53494:function(n,e,i){"use strict";i.r(e),i.d(e,{default:function(){return A}});var o=function(){var n=this,e=n._self._c;return e("section",{staticClass:"interaction-container",class:`${n.interaction.direction||""} ${n.type}`},[e("el-tooltip",{attrs:{placement:"top-end","open-delay":500}},[e("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},domProps:{innerHTML:n._s(n.avatarProps.name)},slot:"content"}),n.showAvatar?e("JusAvatarUser",n._b({},"JusAvatarUser",n.avatarProps,!1)):n._e()],1),e("div",{class:`${n.interaction.direction||""} ${n.coloringType}-${n.messageType} ${n.flat?"":"interaction-container__balloon"} ${n.scheduled||"SCHEDULER"===n.type?"SCHEDULED":""}`},[e("div",{staticClass:"interaction-container__balloon-content"},[e(n.type,{tag:"component",attrs:{value:n.interaction,occurrence:n.value,"hide-grouping":n.hideGrouping,"hide-info":n.isGrouping}}),n.showRecomendation&&n.needRecomendationList.includes(n.interaction.id)?e("Recomendation",{attrs:{"interaction-id":n.interaction.id}}):n._e()],1)]),n.showReply&&!n.flat?e("span",{staticClass:"interaction-container__reply",class:{"active-icon":n.isInRecipients}},[e("jus-icon",{staticClass:"interaction-container__reply-icon",attrs:{icon:"reply","is-active":n.isInRecipients},on:{click:n.reply}}),e("jus-icon",{staticClass:"interaction-container__reply-icon-remove",attrs:{icon:"rejected-red"},on:{click:n.reply}})],1):n._e(),e("div",{staticClass:"display-break"}),e("InteractionStatus",{attrs:{value:n.interaction,occurrence:n.value,"hide-grouping":n.hideGrouping}}),n.showGrouped&&n.groupedOccurrences.length?e("div",{staticClass:"break-point"}):n._e(),n.showGrouped&&n.groupedOccurrences.length?e("div",{staticClass:"interaction-container__grouped"},n._l(n.groupedOccurrences,(function(n){return e("Interaction",{key:n.id,attrs:{value:n,"show-grouped":!1,"hide-grouping":!0}})})),1):n._e(),e("WarningLGPD",{attrs:{"is-phone-number":"whatsapp"===n.messageType||"sms"===n.messageType,"party-name":n.personName},on:{confirm:n.handleLgpdWarning,close:function(e){n.LGPDWarningDialogVisible=!1}},model:{value:n.LGPDWarningDialogVisible,callback:function(e){n.LGPDWarningDialogVisible=e},expression:"LGPDWarningDialogVisible"}})],1)},t=[],r=i(90408);const a=["NEGOTIATOR_ACCESS","NEGOTIATOR_PROPOSAL","NEGOTIATOR_COUNTERPROSAL","NEGOTIATOR_CHECKOUT","NEGOTIATOR_ACCEPTED","NEGOTIATOR_REJECTED"];var c={name:"Interaction",components:{COMMUNICATION:()=>i.e(6758).then(i.bind(i,76758)),ATTACHMENT:()=>i.e(4857).then(i.bind(i,35628)),NEGOTIATOR:()=>i.e(7668).then(i.bind(i,47668)),SCHEDULER:()=>i.e(3892).then(i.bind(i,43892)),PHONE:()=>Promise.all([i.e(5873),i.e(9899)]).then(i.bind(i,19899)),MANUAL:()=>i.e(1472).then(i.bind(i,30986)),NPS:()=>i.e(3742).then(i.bind(i,23742)),WarningLGPD:()=>i.e(954).then(i.bind(i,20954)),Recomendation:()=>i.e(4752).then(i.bind(i,54752)),WHATSAPP:()=>i.e(6517).then(i.bind(i,96517)),InteractionStatus:()=>i.e(3452).then(i.bind(i,93452))},props:{value:{type:Object,required:!0},showGrouped:{type:Boolean,default:!0},hideGrouping:{type:Boolean,default:!1},scheduled:{type:Boolean,default:!1}},data(){return{modalLoading:!1,LGPDWarningDialogVisible:!1}},computed:{...(0,r.Se)({isJusttoAdmin:"isJusttoAdmin",recipients:"getEditorRecipients",flat:"getExportTicketModalVisible",lastInteraction:"disputeLastInteractions",unanswered:"getUnansweredOccurrences",with:"getWindowWidth",isAdminProfile:"isAdminProfile",negotiators:"getTicketOverviewNegotiators",getGroupedOccurrencesById:"getGroupedOccurrencesById",properties:"userProperties",isGrouping:"isOmnichannelGrouping",coloringType:"omnichannelColoringType"}),type(){return"INBOUND"===this.interaction?.direction&&"WHATSAPP"===this.interaction?.message?.communicationType&&["FILE","VIDEO","IMAGE","AUDIO"].includes(this.interaction?.message?.contentType)?"WHATSAPP":"OUTBOUND"===this.interaction?.direction&&"PHONE_CALL"===this.interaction?.type&&["WAITING","CANCELED","FAILED"].includes(this.interaction?.message?.status)&&("system"===this.interaction?.message?.createdBy||this.interaction?.message?.scheduledTime?.dateTime)?"SCHEDULER":this.value.interaction.type.split("_")[0]},isInRecipients(){return this.recipients.map((({value:n})=>n)).includes(this.replyAdress)},messageType(){const n={EMAIL:"email",WHATSAPP:"whatsapp",NEGOTIATOR_MESSAGE:"negotiation",SMS:"sms",NPS:"nps"};if(this.interaction?.message?.communicationType){const{communicationType:e}=this.interaction.message;if(Object.keys(n).includes(e))return n[e]}else if((this.interaction?.type||"").includes("NEGOTIATOR"))return"negotiation";return"default"},interaction(){return this.value.interaction},personName(){return"MANUAL"===this.type?this.interaction?.properties?.USER:this.interaction?.message?.parameters?.SENDER_NAME?this.interaction?.message?.parameters?.SENDER_NAME:this.interaction?.message?.parameters?.SENDER_EMAIL?this.interaction?.message?.parameters?.SENDER_EMAIL:this.interaction?.properties?.PERSON_NAME?this.interaction.properties.PERSON_NAME:""},isInboundInteraction(){return"INBOUND"===this.interaction?.direction},showAvatar(){return this.isJusttineMessage||!this.isInboundInteraction&&(this.isJusttoAdmin||this.isAdminProfile||this.negotiators.length>1)},avatarProps(){if(this.isJusttineMessage){const n="\n        Sou JUSTTINE, sua assistente virtual<br>\n        Enviei esta mensagem para você, ok?<br>\n        Criei ela a partir da estratégia que você definiu na disputa.";return{name:n,src:i(63849),size:"sm"}}return{name:this.personName||this.interaction.createdBy,size:"sm",purple:this.isInboundInteraction&&"MANUAL"!==this.type}},isJusttineMessage(){return["EMAIL","WHATSAPP","SMS"].includes(this.interaction?.message?.communicationType)&&"PROCESSED_BY_USER"!==this.interaction?.message?.status&&("system"===this.interaction?.message?.createdBy||"justto"===this.interaction?.message?.sender)&&"OUTBOUND"===this.interaction?.direction},showReply(){const{type:n,direction:e,message:i}=this.interaction;return"INBOUND"===e&&(!["ATTACHMENT"].includes(n)&&["EMAIL","WHATSAPP","NEGOTIATOR_MESSAGE"].includes(i?.communicationType)||a.includes(n)||(this.disputeLastInteractions||[]).length)},replyAdress(){return this.interaction?.properties?.PERSON_EMAIL?this.interaction.properties.PERSON_EMAIL:this.interaction?.message?.sender?this.interaction.message.sender:this.interaction?.message?.parameters?.SENDER_EMAIL?this.interaction.message.parameters.SENDER_EMAIL:this.interaction?.message?.parameters?.SENDER?this.interaction.message.parameters.SENDER:null},showRecomendation(){return this.isJusttoAdmin&&this.isInboundInteraction&&["COMMUNICATION"].includes(this.interaction.type)&&!!this.interaction.message},needRecomendationList(){return this.unanswered.filter((n=>Boolean(n?.interaction?.id))).map((({interaction:{id:n}})=>n))},groupedOccurrences(){return this.getGroupedOccurrencesById(this.value?.id)}},methods:{...(0,r.nv)(["addRecipient","verifyRecipient"]),handleLgpdWarning(){this.reply(),this.LGPDWarningDialogVisible=!1},reply(n){let e=null;this.value.interaction?.message?.messageId&&(e=this.value.interaction.message.messageId);const i={disputeId:this.$route.params.id,type:this.messageType,value:this.replyAdress,key:"address",inReplyTo:e};this.verifyRecipient(i).then((n=>{"AUTHORIZED"===n.value?(delete i.disputeId,this.addRecipient(i)):this.LGPDWarningDialogVisible=!0}))}}},l=c,s=(i(60283),i(1001)),d=(0,s.Z)(l,o,t,!1,null,"2bdcf488",null),A=d.exports},29011:function(n,e,i){"use strict";i.r(e);var o=i(87537),t=i.n(o),r=i(23645),a=i.n(r),c=a()(t());c.push([n.id,".interaction-container[data-v-2bdcf488]{display:flex;gap:6px;align-items:center;flex-wrap:wrap;height:auto;margin:10px 24px 0 24px}.interaction-container .break-point[data-v-2bdcf488]{flex-basis:100%;width:0}.interaction-container.INBOUND[data-v-2bdcf488]{flex-direction:row}.interaction-container.OUTBOUND[data-v-2bdcf488]{flex-direction:row-reverse}.interaction-container.MANUAL .interaction-container__balloon[data-v-2bdcf488]{background-color:#fff!important}.interaction-container.MANUAL[data-v-2bdcf488]{flex-direction:row-reverse}.interaction-container .jus-avatar-user[data-v-2bdcf488]{align-self:baseline}.interaction-container .interaction-container__balloon[data-v-2bdcf488]{overflow-x:hidden;max-width:80%;border-radius:6px;overflow-y:hidden;border:none;box-shadow:0 3px 6px #00000029;margin-bottom:6px;display:flex;flex-direction:row}.interaction-container .interaction-container__balloon .interaction-container__balloon-avatar[data-v-2bdcf488]{margin:6px}.interaction-container .interaction-container__balloon .interaction-container__balloon-content[data-v-2bdcf488]{width:100%;position:relative;display:flex;min-width:10vw;align-items:center}.interaction-container .interaction-container__balloon.COLORFUL-whatsapp[data-v-2bdcf488]{background-color:#8ae698}.interaction-container .interaction-container__balloon.COLORFUL-email[data-v-2bdcf488]{background-color:#d5f1fb}.interaction-container .interaction-container__balloon.COLORFUL-negotiation[data-v-2bdcf488]{background-color:#9461f74f}.interaction-container .interaction-container__balloon.COLORFUL-sms[data-v-2bdcf488]{background-color:#ececec}.interaction-container .interaction-container__balloon.INBOUND[data-v-2bdcf488]{flex-direction:row}.interaction-container .interaction-container__balloon.MANUAL[data-v-2bdcf488],.interaction-container .interaction-container__balloon.OUTBOUND[data-v-2bdcf488]{flex-direction:row-reverse}.interaction-container .interaction-container__balloon.SCHEDULED[data-v-2bdcf488]{border:2px dashed #424242}.interaction-container .interaction-container__reply[data-v-2bdcf488]{display:flex;height:20px}.interaction-container .interaction-container__reply .interaction-container__reply-icon[data-v-2bdcf488]{width:20px;cursor:pointer}.interaction-container .interaction-container__reply .interaction-container__reply-icon-remove[data-v-2bdcf488]{width:20px;cursor:pointer;display:none}.interaction-container .active-icon:hover .interaction-container__reply-icon[data-v-2bdcf488]{display:none}.interaction-container .active-icon:hover .interaction-container__reply-icon-remove[data-v-2bdcf488]{display:block}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAGA,wCACE,YAAA,CACA,OAAA,CACA,kBAAA,CACA,cAAA,CACA,WAAA,CACA,uBAAA,CAEA,qDACE,eAAA,CACA,OAAA,CAGF,gDACE,kBAAA,CAGF,iDACE,0BAAA,CAIA,+EACE,+BAAA,CAIJ,+CACE,0BAAA,CAGF,yDACE,mBAAA,CAGF,wEACE,iBAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CACA,WAAA,CACA,8BAAA,CACA,iBAAA,CAEA,YAAA,CACA,kBAAA,CAEA,+GACE,UAAA,CAGF,gHACE,UAAA,CACA,iBAAA,CAEA,YAAA,CACA,cAAA,CACA,kBAAA,CAGF,0FACE,wBCXoB,CDatB,uFACE,wBCLe,CDOjB,6FACE,0BCMkB,CDDpB,qFACE,wBAAA,CAGF,gFACE,kBAAA,CAYF,gKACE,0BAAA,CAGF,kFACE,yBAAA,CAoBJ,sEACE,YAAA,CACA,WAAA,CAEA,yGACE,UAAA,CACA,cAAA,CAGF,gHACE,UAAA,CACA,cAAA,CACA,YAAA,CAKF,8FACE,YAAA,CAGF,qGACE,aAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.interaction-container {\n  display: flex;\n  gap: 6px;\n  align-items: center;\n  flex-wrap: wrap;\n  height: auto;\n  margin: 10px 24px 0px 24px;\n\n  .break-point {\n    flex-basis: 100%;\n    width: 0;\n  }\n\n  &.INBOUND {\n    flex-direction: row;\n  }\n\n  &.OUTBOUND {\n    flex-direction: row-reverse;\n  }\n\n  &.MANUAL {\n    .interaction-container__balloon {\n      background-color: white !important;\n    }\n  }\n\n  &.MANUAL {\n    flex-direction: row-reverse;\n  }\n\n  .jus-avatar-user {\n    align-self: baseline;\n  }\n\n  .interaction-container__balloon {\n    overflow-x: hidden;\n    max-width: 80%;\n    border-radius: 6px;\n    overflow-y: hidden;\n    border: none;\n    box-shadow: 0px 3px 6px #00000029;\n    margin-bottom: 6px;\n\n    display: flex;\n    flex-direction: row;\n\n    .interaction-container__balloon-avatar {\n      margin: 6px;\n    }\n\n    .interaction-container__balloon-content {\n      width: 100%;\n      position: relative;\n\n      display: flex;\n      min-width: 10vw;\n      align-items: center;\n    }\n\n    &.COLORFUL-whatsapp {\n      background-color: $--color-whatsapp-bg;\n    }\n    &.COLORFUL-email {\n      background-color: $--color-email-bg;\n    }\n    &.COLORFUL-negotiation {\n      background-color: $--color-negotiator-bg;// $--color-light-gray;\n    }\n    // &.COLORFUL-EMAIL_CNA {\n    //   background-color: #B6FFFB;\n    // }\n    &.COLORFUL-sms {\n      background-color: #ececec;\n    }\n\n    &.INBOUND {\n      flex-direction: row;\n      // background: mix($--color-light-gray, $--color-white, 50%);\n\n      &.NEGOTIATOR {\n        // background: mix($--color-light-gray, $--color-white, 50%);\n      }\n    }\n\n    &.OUTBOUND {\n      flex-direction: row-reverse;\n    }\n\n    &.MANUAL {\n      flex-direction: row-reverse;\n    }\n\n    &.SCHEDULED {\n      border: 2px dashed $--color-black;\n    }\n\n    // &.ballon-email {\n    //   border-color: #DFF4FE;\n    // }\n\n    // &.ballon-sms {\n    //   border-color: #ECECEC;\n    // }\n\n    // &.ballon-negotiator-message-2 {\n    //   border-color: #FFC5A5;\n    // }\n\n    // &.ballon-whatsapp {\n    //   border-color: #a3f4c3;\n    // }\n  }\n\n  .interaction-container__reply {\n    display: flex;\n    height: 20px;\n\n    .interaction-container__reply-icon {\n      width: 20px;\n      cursor: pointer;\n    }\n\n    .interaction-container__reply-icon-remove {\n      width: 20px;\n      cursor: pointer;\n      display: none;\n    }\n  }\n\n  .active-icon:hover {\n    .interaction-container__reply-icon {\n      display: none;\n    }\n\n    .interaction-container__reply-icon-remove {\n      display: block;\n    }\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),e["default"]=c},60283:function(n,e,i){var o=i(29011);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[n.id,o,""]]),o.locals&&(n.exports=o.locals);var t=i(39185).Z;t("2587bbbb",o,!0,{sourceMap:!0,shadowMode:!1})},63849:function(n,e,i){"use strict";n.exports=i.p+"img/profile.d1d2afdf.png"}}]);
//# sourceMappingURL=3494.js.map