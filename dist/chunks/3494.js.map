{"version":3,"file":"chunks/3494.js","mappings":"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","sources":["webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue","webpack://@projuris/justto-web/src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue?9754","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue?ceab","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue?04d0","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue?b655"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"interaction-container\",class:`${_vm.interaction.direction || ''} ${_vm.type}`},[_c('el-tooltip',{attrs:{\"placement\":\"top-end\",\"open-delay\":500}},[_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"content\"},domProps:{\"innerHTML\":_vm._s(_vm.avatarProps.name)},slot:\"content\"}),(_vm.showAvatar)?_c('JusAvatarUser',_vm._b({},'JusAvatarUser',_vm.avatarProps,false)):_vm._e()],1),_c('div',{class:`${_vm.interaction.direction || ''} ${_vm.coloringType}-${_vm.messageType} ${!_vm.flat ? 'interaction-container__balloon' : ''} ${(_vm.scheduled || _vm.type === 'SCHEDULER') ? 'SCHEDULED' : ''}`},[_c('div',{staticClass:\"interaction-container__balloon-content\"},[_c(_vm.type,{tag:\"component\",attrs:{\"value\":_vm.interaction,\"occurrence\":_vm.value,\"hide-grouping\":_vm.hideGrouping,\"hide-info\":_vm.isGrouping}}),(_vm.showRecomendation && _vm.needRecomendationList.includes(_vm.interaction.id))?_c('Recomendation',{attrs:{\"interaction-id\":_vm.interaction.id}}):_vm._e()],1)]),(_vm.showReply && !_vm.flat)?_c('span',{staticClass:\"interaction-container__reply\",class:{ 'active-icon': _vm.isInRecipients }},[_c('jus-icon',{staticClass:\"interaction-container__reply-icon\",attrs:{\"icon\":\"reply\",\"is-active\":_vm.isInRecipients},on:{\"click\":_vm.reply}}),_c('jus-icon',{staticClass:\"interaction-container__reply-icon-remove\",attrs:{\"icon\":\"rejected-red\"},on:{\"click\":_vm.reply}})],1):_vm._e(),_c('div',{staticClass:\"display-break\"}),_c('InteractionStatus',{attrs:{\"value\":_vm.interaction,\"occurrence\":_vm.value,\"hide-grouping\":_vm.hideGrouping}}),(_vm.showGrouped && _vm.groupedOccurrences.length)?_c('div',{staticClass:\"break-point\"}):_vm._e(),(_vm.showGrouped && _vm.groupedOccurrences.length)?_c('div',{staticClass:\"interaction-container__grouped\"},_vm._l((_vm.groupedOccurrences),function(occurrence){return _c('Interaction',{key:occurrence.id,attrs:{\"value\":occurrence,\"show-grouped\":false,\"hide-grouping\":true}})}),1):_vm._e(),_c('WarningLGPD',{attrs:{\"is-phone-number\":_vm.messageType === 'whatsapp' || _vm.messageType === 'sms',\"party-name\":_vm.personName},on:{\"confirm\":_vm.handleLgpdWarning,\"close\":function($event){_vm.LGPDWarningDialogVisible = false}},model:{value:(_vm.LGPDWarningDialogVisible),callback:function ($$v) {_vm.LGPDWarningDialogVisible=$$v},expression:\"LGPDWarningDialogVisible\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section\n    class=\"interaction-container\"\n    :class=\"`${interaction.direction || ''} ${type}`\"\n  >\n    <el-tooltip\n      placement=\"top-end\"\n      :open-delay=\"500\"\n    >\n      <div\n        slot=\"content\"\n        style=\"text-align: center;\"\n        v-html=\"avatarProps.name\"\n      />\n\n      <JusAvatarUser\n        v-if=\"showAvatar\"\n        v-bind=\"avatarProps\"\n      />\n    </el-tooltip>\n\n    <div :class=\"`${interaction.direction || ''} ${coloringType}-${messageType} ${!flat ? 'interaction-container__balloon' : ''} ${(scheduled || type === 'SCHEDULER') ? 'SCHEDULED' : ''}`\">\n      <div class=\"interaction-container__balloon-content\">\n        <component\n          :is=\"type\"\n          :value=\"interaction\"\n          :occurrence=\"value\"\n          :hide-grouping=\"hideGrouping\"\n          :hide-info=\"isGrouping\"\n        />\n\n        <Recomendation\n          v-if=\"showRecomendation && needRecomendationList.includes(interaction.id)\"\n          :interaction-id=\"interaction.id\"\n        />\n      </div>\n    </div>\n\n    <span\n      v-if=\"showReply && !flat\"\n      :class=\"{ 'active-icon': isInRecipients }\"\n      class=\"interaction-container__reply\"\n    >\n      <jus-icon\n        class=\"interaction-container__reply-icon\"\n        icon=\"reply\"\n        :is-active=\"isInRecipients\"\n        @click=\"reply\"\n      />\n      <jus-icon\n        class=\"interaction-container__reply-icon-remove\"\n        icon=\"rejected-red\"\n        @click=\"reply\"\n      />\n    </span>\n\n    <div class=\"display-break\" />\n\n    <InteractionStatus\n      :value=\"interaction\"\n      :occurrence=\"value\"\n      :hide-grouping=\"hideGrouping\"\n    />\n\n    <div\n      v-if=\"showGrouped && groupedOccurrences.length\"\n      class=\"break-point\"\n    />\n\n    <div\n      v-if=\"showGrouped && groupedOccurrences.length\"\n      class=\"interaction-container__grouped\"\n    >\n      <Interaction\n        v-for=\"occurrence in groupedOccurrences\"\n        :key=\"occurrence.id\"\n        :value=\"occurrence\"\n        :show-grouped=\"false\"\n        :hide-grouping=\"true\"\n      />\n    </div>\n\n    <!-- Dialog de warning para LGPD -->\n    <WarningLGPD\n      v-model=\"LGPDWarningDialogVisible\"\n      :is-phone-number=\"messageType === 'whatsapp' || messageType === 'sms'\"\n      :party-name=\"personName\"\n      @confirm=\"handleLgpdWarning\"\n      @close=\"LGPDWarningDialogVisible = false\"\n    />\n  </section>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\n\nconst negotiatorTypes = [\n  'NEGOTIATOR_ACCESS',\n  'NEGOTIATOR_PROPOSAL',\n  'NEGOTIATOR_COUNTERPROSAL',\n  'NEGOTIATOR_CHECKOUT',\n  'NEGOTIATOR_ACCEPTED',\n  'NEGOTIATOR_REJECTED'\n]\n\nexport default {\n  name: 'Interaction',\n\n  components: {\n    COMMUNICATION: () => import('./partials/Communication'),\n    ATTACHMENT: () => import('@/components/others/AttachmentOccurrence'),\n    NEGOTIATOR: () => import('./partials/Negotiator'),\n    SCHEDULER: () => import('./partials/Scheduler'),\n    PHONE: () => import('./partials/Phone.vue'),\n    MANUAL: () => import('./partials/Manual'),\n    NPS: () => import('./partials/Nps'),\n    WarningLGPD: () => import('@/components/dialogs/WarningLGPD'),\n    Recomendation: () => import('@/components/buttons/Recomendation.vue'),\n    WHATSAPP: () => import('./partials/Whatsapp.vue'),\n    InteractionStatus: () => import('./partials/InteractionStatus')\n  },\n\n  props: {\n    value: {\n      type: Object,\n      required: true\n    },\n\n    showGrouped: {\n      type: Boolean,\n      default: true\n    },\n\n    hideGrouping: {\n      type: Boolean,\n      default: false\n    },\n\n    scheduled: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      modalLoading: false,\n      LGPDWarningDialogVisible: false\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      isJusttoAdmin: 'isJusttoAdmin',\n      recipients: 'getEditorRecipients',\n      flat: 'getExportTicketModalVisible',\n      lastInteraction: 'disputeLastInteractions',\n      unanswered: 'getUnansweredOccurrences',\n      with: 'getWindowWidth',\n      isAdminProfile: 'isAdminProfile',\n      negotiators: 'getTicketOverviewNegotiators',\n      getGroupedOccurrencesById: 'getGroupedOccurrencesById',\n      properties: 'userProperties',\n      isGrouping: 'isOmnichannelGrouping',\n      coloringType: 'omnichannelColoringType'\n    }),\n\n    type() {\n      if (this.interaction?.direction === 'INBOUND' && this.interaction?.message?.communicationType === 'WHATSAPP' && ['FILE', 'VIDEO', 'IMAGE', 'AUDIO'].includes(this.interaction?.message?.contentType)) {\n        return 'WHATSAPP'\n      }\n\n      // Detecta ligações agendadas.\n      if (this.interaction?.direction === 'OUTBOUND' && this.interaction?.type === 'PHONE_CALL' && ['WAITING', 'CANCELED', 'FAILED'].includes(this.interaction?.message?.status) && (this.interaction?.message?.createdBy === 'system' || this.interaction?.message?.scheduledTime?.dateTime)) {\n        return 'SCHEDULER'\n      }\n\n      return this.value.interaction.type.split('_')[0]\n    },\n\n    isInRecipients() {\n      return this.recipients.map(({ value }) => value).includes(this.replyAdress)\n    },\n\n    messageType() {\n      const mapCommunicationTypes = {\n        EMAIL: 'email',\n        WHATSAPP: 'whatsapp',\n        NEGOTIATOR_MESSAGE: 'negotiation',\n        SMS: 'sms',\n        NPS: 'nps'\n      }\n      if (this.interaction?.message?.communicationType) {\n        const { communicationType } = this.interaction.message\n        if (Object.keys(mapCommunicationTypes).includes(communicationType)) {\n          return mapCommunicationTypes[communicationType]\n        }\n      } else if ((this.interaction?.type || '').includes('NEGOTIATOR')) {\n        return 'negotiation'\n      }\n      return 'default'\n    },\n\n    interaction() {\n      return this.value.interaction\n    },\n\n    personName() {\n      if (this.type === 'MANUAL') {\n        return this.interaction?.properties?.USER\n      }\n\n      if (this.interaction?.message?.parameters?.SENDER_NAME) {\n        return this.interaction?.message?.parameters?.SENDER_NAME\n      } else if (this.interaction?.message?.parameters?.SENDER_EMAIL) {\n        return this.interaction?.message?.parameters?.SENDER_EMAIL\n      } else if (this.interaction?.properties?.PERSON_NAME) {\n        return this.interaction.properties.PERSON_NAME\n      }\n\n      return ''\n    },\n\n    isInboundInteraction() {\n      return this.interaction?.direction === 'INBOUND'\n    },\n\n    showAvatar() {\n      // TODO: Critérios de aceite: https://justto.atlassian.net/browse/SAAS-4454\n\n      return this.isJusttineMessage || (\n        !this.isInboundInteraction &&\n        (this.isJusttoAdmin || this.isAdminProfile || this.negotiators.length > 1)\n      )\n    },\n\n    avatarProps() {\n      if (this.isJusttineMessage) {\n        const justtineMessage = `\n        Sou JUSTTINE, sua assistente virtual<br>\n        Enviei esta mensagem para você, ok?<br>\n        Criei ela a partir da estratégia que você definiu na disputa.`\n\n        return {\n          name: justtineMessage,\n          src: require('@/assets/justtine/profile.png'),\n          size: 'sm'\n        }\n      } else {\n        return {\n          name: this.personName || this.interaction.createdBy,\n          size: 'sm',\n          purple: this.isInboundInteraction && this.type !== 'MANUAL'\n        }\n      }\n    },\n\n    isJusttineMessage() {\n      return ['EMAIL', 'WHATSAPP', 'SMS'].includes(this.interaction?.message?.communicationType) &&\n      this.interaction?.message?.status !== 'PROCESSED_BY_USER' &&\n      (this.interaction?.message?.createdBy === 'system' || this.interaction?.message?.sender === 'justto') &&\n      this.interaction?.direction === 'OUTBOUND'\n    },\n\n    showReply() {\n      const { type, direction, message } = this.interaction\n      return (\n        direction === 'INBOUND' &&\n        (\n          (!['ATTACHMENT'].includes(type) && ['EMAIL', 'WHATSAPP', 'NEGOTIATOR_MESSAGE'].includes(message?.communicationType)) ||\n          (negotiatorTypes.includes(type) || (this.disputeLastInteractions || []).length)\n        )\n      )\n    },\n\n    replyAdress() {\n      if (this.interaction?.properties?.PERSON_EMAIL) {\n        return this.interaction.properties.PERSON_EMAIL\n      } else if (this.interaction?.message?.sender) {\n        return this.interaction.message.sender\n      } else if (this.interaction?.message?.parameters?.SENDER_EMAIL) {\n        return this.interaction.message.parameters.SENDER_EMAIL\n      } else if (this.interaction?.message?.parameters?.SENDER) {\n        return this.interaction.message.parameters.SENDER\n      }\n      return null\n    },\n\n    showRecomendation() {\n      return this.isJusttoAdmin && this.isInboundInteraction && ['COMMUNICATION'].includes(this.interaction.type) && !!this.interaction.message\n    },\n\n    needRecomendationList() {\n      return this.unanswered\n        .filter(occurrence => Boolean(occurrence?.interaction?.id))\n        .map(({ interaction: { id } }) => (id))\n    },\n\n    groupedOccurrences() {\n      return this.getGroupedOccurrencesById(this.value?.id)\n    }\n  },\n\n  methods: {\n    ...mapActions(['addRecipient', 'verifyRecipient']),\n\n    handleLgpdWarning() {\n      this.reply()\n      this.LGPDWarningDialogVisible = false\n    },\n\n    reply(_event) {\n      let inReplyTo = null\n      if (this.value.interaction?.message?.messageId) {\n        inReplyTo = this.value.interaction.message.messageId\n      }\n      const reply = {\n        disputeId: this.$route.params.id,\n        type: this.messageType,\n        value: this.replyAdress,\n        key: 'address',\n        inReplyTo\n      }\n      this.verifyRecipient(reply)\n        .then((data) => {\n          if (data.value === 'AUTHORIZED') {\n            delete reply.disputeId\n            this.addRecipient(reply)\n          } else {\n            this.LGPDWarningDialogVisible = true\n          }\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.interaction-container {\n  display: flex;\n  gap: 6px;\n  align-items: center;\n  flex-wrap: wrap;\n  height: auto;\n  margin: 10px 24px 0px 24px;\n\n  .break-point {\n    flex-basis: 100%;\n    width: 0;\n  }\n\n  &.INBOUND {\n    flex-direction: row;\n  }\n\n  &.OUTBOUND {\n    flex-direction: row-reverse;\n  }\n\n  &.MANUAL {\n    .interaction-container__balloon {\n      background-color: white !important;\n    }\n  }\n\n  &.MANUAL {\n    flex-direction: row-reverse;\n  }\n\n  .jus-avatar-user {\n    align-self: baseline;\n  }\n\n  .interaction-container__balloon {\n    overflow-x: hidden;\n    max-width: 80%;\n    border-radius: 6px;\n    overflow-y: hidden;\n    border: none;\n    box-shadow: 0px 3px 6px #00000029;\n    margin-bottom: 6px;\n\n    display: flex;\n    flex-direction: row;\n\n    .interaction-container__balloon-avatar {\n      margin: 6px;\n    }\n\n    .interaction-container__balloon-content {\n      width: 100%;\n      position: relative;\n\n      display: flex;\n      min-width: 10vw;\n      align-items: center;\n    }\n\n    &.COLORFUL-whatsapp {\n      background-color: $--color-whatsapp-bg;\n    }\n    &.COLORFUL-email {\n      background-color: $--color-email-bg;\n    }\n    &.COLORFUL-negotiation {\n      background-color: $--color-negotiator-bg;// $--color-light-gray;\n    }\n    // &.COLORFUL-EMAIL_CNA {\n    //   background-color: #B6FFFB;\n    // }\n    &.COLORFUL-sms {\n      background-color: #ececec;\n    }\n\n    &.INBOUND {\n      flex-direction: row;\n      // background: mix($--color-light-gray, $--color-white, 50%);\n\n      &.NEGOTIATOR {\n        // background: mix($--color-light-gray, $--color-white, 50%);\n      }\n    }\n\n    &.OUTBOUND {\n      flex-direction: row-reverse;\n    }\n\n    &.MANUAL {\n      flex-direction: row-reverse;\n    }\n\n    &.SCHEDULED {\n      border: 2px dashed $--color-black;\n    }\n\n    // &.ballon-email {\n    //   border-color: #DFF4FE;\n    // }\n\n    // &.ballon-sms {\n    //   border-color: #ECECEC;\n    // }\n\n    // &.ballon-negotiator-message-2 {\n    //   border-color: #FFC5A5;\n    // }\n\n    // &.ballon-whatsapp {\n    //   border-color: #a3f4c3;\n    // }\n  }\n\n  .interaction-container__reply {\n    display: flex;\n    height: 20px;\n\n    .interaction-container__reply-icon {\n      width: 20px;\n      cursor: pointer;\n    }\n\n    .interaction-container__reply-icon-remove {\n      width: 20px;\n      cursor: pointer;\n      display: none;\n    }\n  }\n\n  .active-icon:hover {\n    .interaction-container__reply-icon {\n      display: none;\n    }\n\n    .interaction-container__reply-icon-remove {\n      display: block;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Interaction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Interaction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Interaction.vue?vue&type=template&id=2bdcf488&scoped=true&\"\nimport script from \"./Interaction.vue?vue&type=script&lang=js&\"\nexport * from \"./Interaction.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Interaction.vue?vue&type=style&index=0&id=2bdcf488&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bdcf488\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".interaction-container[data-v-2bdcf488]{display:flex;gap:6px;align-items:center;flex-wrap:wrap;height:auto;margin:10px 24px 0 24px}.interaction-container .break-point[data-v-2bdcf488]{flex-basis:100%;width:0}.interaction-container.INBOUND[data-v-2bdcf488]{flex-direction:row}.interaction-container.OUTBOUND[data-v-2bdcf488]{flex-direction:row-reverse}.interaction-container.MANUAL .interaction-container__balloon[data-v-2bdcf488]{background-color:#fff!important}.interaction-container.MANUAL[data-v-2bdcf488]{flex-direction:row-reverse}.interaction-container .jus-avatar-user[data-v-2bdcf488]{align-self:baseline}.interaction-container .interaction-container__balloon[data-v-2bdcf488]{overflow-x:hidden;max-width:80%;border-radius:6px;overflow-y:hidden;border:none;box-shadow:0 3px 6px #00000029;margin-bottom:6px;display:flex;flex-direction:row}.interaction-container .interaction-container__balloon .interaction-container__balloon-avatar[data-v-2bdcf488]{margin:6px}.interaction-container .interaction-container__balloon .interaction-container__balloon-content[data-v-2bdcf488]{width:100%;position:relative;display:flex;min-width:10vw;align-items:center}.interaction-container .interaction-container__balloon.COLORFUL-whatsapp[data-v-2bdcf488]{background-color:#8ae698}.interaction-container .interaction-container__balloon.COLORFUL-email[data-v-2bdcf488]{background-color:#d5f1fb}.interaction-container .interaction-container__balloon.COLORFUL-negotiation[data-v-2bdcf488]{background-color:#9461f74f}.interaction-container .interaction-container__balloon.COLORFUL-sms[data-v-2bdcf488]{background-color:#ececec}.interaction-container .interaction-container__balloon.INBOUND[data-v-2bdcf488]{flex-direction:row}.interaction-container .interaction-container__balloon.MANUAL[data-v-2bdcf488],.interaction-container .interaction-container__balloon.OUTBOUND[data-v-2bdcf488]{flex-direction:row-reverse}.interaction-container .interaction-container__balloon.SCHEDULED[data-v-2bdcf488]{border:2px dashed #424242}.interaction-container .interaction-container__reply[data-v-2bdcf488]{display:flex;height:20px}.interaction-container .interaction-container__reply .interaction-container__reply-icon[data-v-2bdcf488]{width:20px;cursor:pointer}.interaction-container .interaction-container__reply .interaction-container__reply-icon-remove[data-v-2bdcf488]{width:20px;cursor:pointer;display:none}.interaction-container .active-icon:hover .interaction-container__reply-icon[data-v-2bdcf488]{display:none}.interaction-container .active-icon:hover .interaction-container__reply-icon-remove[data-v-2bdcf488]{display:block}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/Interaction.vue\",\"webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss\"],\"names\":[],\"mappings\":\"AAGA,wCACE,YAAA,CACA,OAAA,CACA,kBAAA,CACA,cAAA,CACA,WAAA,CACA,uBAAA,CAEA,qDACE,eAAA,CACA,OAAA,CAGF,gDACE,kBAAA,CAGF,iDACE,0BAAA,CAIA,+EACE,+BAAA,CAIJ,+CACE,0BAAA,CAGF,yDACE,mBAAA,CAGF,wEACE,iBAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CACA,WAAA,CACA,8BAAA,CACA,iBAAA,CAEA,YAAA,CACA,kBAAA,CAEA,+GACE,UAAA,CAGF,gHACE,UAAA,CACA,iBAAA,CAEA,YAAA,CACA,cAAA,CACA,kBAAA,CAGF,0FACE,wBCXoB,CDatB,uFACE,wBCLe,CDOjB,6FACE,0BCMkB,CDDpB,qFACE,wBAAA,CAGF,gFACE,kBAAA,CAYF,gKACE,0BAAA,CAGF,kFACE,yBAAA,CAoBJ,sEACE,YAAA,CACA,WAAA,CAEA,yGACE,UAAA,CACA,cAAA,CAGF,gHACE,UAAA,CACA,cAAA,CACA,YAAA,CAKF,8FACE,YAAA,CAGF,qGACE,aAAA\",\"sourcesContent\":[\"\\n@import '~projuris-acordos-theme/src/common/colors.scss';\\n\\n.interaction-container {\\n  display: flex;\\n  gap: 6px;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  height: auto;\\n  margin: 10px 24px 0px 24px;\\n\\n  .break-point {\\n    flex-basis: 100%;\\n    width: 0;\\n  }\\n\\n  &.INBOUND {\\n    flex-direction: row;\\n  }\\n\\n  &.OUTBOUND {\\n    flex-direction: row-reverse;\\n  }\\n\\n  &.MANUAL {\\n    .interaction-container__balloon {\\n      background-color: white !important;\\n    }\\n  }\\n\\n  &.MANUAL {\\n    flex-direction: row-reverse;\\n  }\\n\\n  .jus-avatar-user {\\n    align-self: baseline;\\n  }\\n\\n  .interaction-container__balloon {\\n    overflow-x: hidden;\\n    max-width: 80%;\\n    border-radius: 6px;\\n    overflow-y: hidden;\\n    border: none;\\n    box-shadow: 0px 3px 6px #00000029;\\n    margin-bottom: 6px;\\n\\n    display: flex;\\n    flex-direction: row;\\n\\n    .interaction-container__balloon-avatar {\\n      margin: 6px;\\n    }\\n\\n    .interaction-container__balloon-content {\\n      width: 100%;\\n      position: relative;\\n\\n      display: flex;\\n      min-width: 10vw;\\n      align-items: center;\\n    }\\n\\n    &.COLORFUL-whatsapp {\\n      background-color: $--color-whatsapp-bg;\\n    }\\n    &.COLORFUL-email {\\n      background-color: $--color-email-bg;\\n    }\\n    &.COLORFUL-negotiation {\\n      background-color: $--color-negotiator-bg;// $--color-light-gray;\\n    }\\n    // &.COLORFUL-EMAIL_CNA {\\n    //   background-color: #B6FFFB;\\n    // }\\n    &.COLORFUL-sms {\\n      background-color: #ececec;\\n    }\\n\\n    &.INBOUND {\\n      flex-direction: row;\\n      // background: mix($--color-light-gray, $--color-white, 50%);\\n\\n      &.NEGOTIATOR {\\n        // background: mix($--color-light-gray, $--color-white, 50%);\\n      }\\n    }\\n\\n    &.OUTBOUND {\\n      flex-direction: row-reverse;\\n    }\\n\\n    &.MANUAL {\\n      flex-direction: row-reverse;\\n    }\\n\\n    &.SCHEDULED {\\n      border: 2px dashed $--color-black;\\n    }\\n\\n    // &.ballon-email {\\n    //   border-color: #DFF4FE;\\n    // }\\n\\n    // &.ballon-sms {\\n    //   border-color: #ECECEC;\\n    // }\\n\\n    // &.ballon-negotiator-message-2 {\\n    //   border-color: #FFC5A5;\\n    // }\\n\\n    // &.ballon-whatsapp {\\n    //   border-color: #a3f4c3;\\n    // }\\n  }\\n\\n  .interaction-container__reply {\\n    display: flex;\\n    height: 20px;\\n\\n    .interaction-container__reply-icon {\\n      width: 20px;\\n      cursor: pointer;\\n    }\\n\\n    .interaction-container__reply-icon-remove {\\n      width: 20px;\\n      cursor: pointer;\\n      display: none;\\n    }\\n  }\\n\\n  .active-icon:hover {\\n    .interaction-container__reply-icon {\\n      display: none;\\n    }\\n\\n    .interaction-container__reply-icon-remove {\\n      display: block;\\n    }\\n  }\\n}\\n\",\"/* Colors\\n-------------------------- */\\n\\n$--color-white: #fff !default;\\n$--color-black: #424242 !default;\\n$--color-gray: #979797 !default;\\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\\n$--color-light-gray: #f3f4f5 !default;\\n$--color-whatsapp: #075E54 !default;\\n\\n$--pj-color-darker-blue: #0A0022 !default;\\n$--pj-color-dark-blue: #280BA0 !default;\\n$--pj-color-blue: #0756e4 !default;\\n$--pj-color-light-blue: #018EF0 !default;\\n$--pj-color-lighter-blue: #30A9FB !default;\\n$--pj-color-white-blue: #F0F9FE !default;\\n$--pj-color-disabled-blue: #9ad2f9 !default;\\n\\n$-pg-color-overlay: #19415F !default;\\n\\n$--pj-color-red: #CC4148 !default;\\n$--pj-color-light-red: #EC767C !default;\\n$--pj-color-disable-red: #FFF2F3 !default;\\n\\n$--color-primary: $--pj-color-blue !default;\\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\\n\\n$--color-secondary: $--pj-color-light-blue !default;\\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\\n\\n$--color-primary-dark: $--pj-color-dark-blue !default;\\n$--color-success: #14CC30 !default;\\n$--color-warning: #FFC900 !default;\\n$--color-danger: #FF4B54 !default;\\n$--color-info: #2FBBEC !default;\\n\\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\\n\\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\\n\\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\\n\\n$--color-text-primary: $--color-black !default;\\n$--color-text-secondary: $--color-gray !default;\\n\\n$--color-nps-promoter: #14CC30 !default;\\n$--color-nps-neutral: #979797 !default;\\n$--color-nps-detractor: #FF4B54 !default;\\n\\n$--color-negotiator-bg: #9461f74f !default;\\n$--color-email-bg: $--color-info-light !default;\\n$--color-whatsapp-bg: $--color-success-light-5 !default;\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Interaction.vue?vue&type=style&index=0&id=2bdcf488&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2587bbbb\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","staticClass","class","interaction","direction","type","attrs","staticStyle","domProps","_s","avatarProps","name","slot","showAvatar","_b","_e","coloringType","messageType","flat","scheduled","tag","value","hideGrouping","isGrouping","showRecomendation","needRecomendationList","includes","id","showReply","isInRecipients","on","reply","showGrouped","groupedOccurrences","length","_l","occurrence","key","personName","handleLgpdWarning","$event","LGPDWarningDialogVisible","model","callback","$$v","expression","staticRenderFns","negotiatorTypes","components","COMMUNICATION","ATTACHMENT","NEGOTIATOR","SCHEDULER","PHONE","MANUAL","NPS","WarningLGPD","Recomendation","WHATSAPP","InteractionStatus","props","Object","required","Boolean","default","data","modalLoading","computed","mapGetters","isJusttoAdmin","recipients","lastInteraction","unanswered","with","isAdminProfile","negotiators","getGroupedOccurrencesById","properties","message","communicationType","contentType","status","createdBy","scheduledTime","dateTime","split","map","replyAdress","mapCommunicationTypes","EMAIL","NEGOTIATOR_MESSAGE","SMS","keys","USER","parameters","SENDER_NAME","SENDER_EMAIL","PERSON_NAME","isInboundInteraction","isJusttineMessage","justtineMessage","src","require","size","purple","sender","disputeLastInteractions","PERSON_EMAIL","SENDER","filter","methods","mapActions","_event","inReplyTo","messageId","disputeId","$route","params","verifyRecipient","then","addRecipient","component","___CSS_LOADER_EXPORT___","push","module","content","__esModule","locals","exports","add"],"sourceRoot":""}