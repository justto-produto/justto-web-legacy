(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[3742],{23742:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return d}});var o=function(){var n=this,e=n._self._c;return e("article",{staticClass:"nps-container"},[e("div",{staticClass:"nps-container__contact"},[e("jus-icon",{attrs:{icon:"nps"}}),e("span",[n._v("de")]),n.person?e("span",[n._v(" "+n._s(n._f("resumedName")(n.person))+" ")]):n._e(),n.senderEmail?e("span",{staticClass:"nps-container__contact-email",on:{click:n.copyToClipboard}},[n._v(" <"+n._s(n.senderEmail)+"> ")]):n._e()],1),e("div",{staticClass:"nps-container__evaluation"},[e("span",{staticClass:"nps-container__evaluation-stars"},n._l([1,2,3,4,5],(function(t){return e("jus-icon",{key:`star-${t}`,attrs:{icon:"nps-star","is-active":t<=n.npsStars}})})),1),e("span",{staticClass:"nps-container__evaluation-status"},[e("el-tag",{class:n.npsEvaluationText,attrs:{effect:"dark",size:"mini"},domProps:{textContent:n._s(n.npsEvaluationText)}})],1)]),e("div",{staticClass:"nps-container__reasons"},n._l(n.npsReasons,(function(t){return e("el-tag",{key:`reason-${t}`,staticClass:"nps-container__reasons-item",class:t,attrs:{effect:"plain",size:"mini"}},[n._v(" "+n._s(n._f("capitalize")(t.trim()))+" ")])})),1),n.person?e("div",{staticClass:"nps-container__person-name"},[n._v(" "+n._s(n._f("resumedName")(n.person))+" avaliou seu atendimento com "+n._s(n.npsStars)+" estrela(s) ")]):n._e(),e("div",{staticClass:"nps-container__comment"},[e("span",{staticClass:"nps-container__comment-date"},[n._v(" "+n._s(n.npsResume.length?"Comentado:":"Avaliado:")+" "+n._s(n._f("moment")(n.npsEvaluateDate,"DD/MM/YYYY HH:MM"))+" ")]),n.npsResume.length?e("span",{staticClass:"nps-container__comment-text"},[n._v(' "'+n._s(n.npsResume)+'" ')]):n._e()]),e("div",{staticClass:"nps-container__reply"},[e("div",{staticClass:"nps-container__reply-about"},[e("jus-icon",{staticClass:"nps-container__reply-about-icon",attrs:{icon:"reply"}}),n.npsReplyDate?e("span",{staticClass:"nps-container__reply-about-date"},[n._v(" "+n._s(n._f("moment")(n.npsReplyDate,"[Respondido:] DD/MM/YYYY HH:MM"))+" ")]):e("span",{staticClass:"nps-container__reply-about-date"},[n._v(" Responda esta avaliação. ")])],1),e("el-input",{staticClass:"nps-container__reply-input",attrs:{type:"textarea",rows:3,readonly:n.npsReplyHasText,placeholder:"Sua resposta aqui.",resize:"none"},on:{focus:function(e){return n.toggleSendButton(!0)},blur:function(e){return n.toggleSendButton(!1)}},model:{value:n.npsReply,callback:function(e){n.npsReply=e},expression:"npsReply"}}),n.showSendBtn&&!n.npsReplyHasText?e("el-button",{staticClass:"nps-container__reply-btn",attrs:{type:"primary",size:"mini",circle:"",plain:""},on:{click:function(e){return n.sendReplyNps()}}},[e("jus-icon",{attrs:{icon:"send"}})],1):n.loadingSendBtn?e("el-button",{staticClass:"nps-container__reply-btn",attrs:{icon:"el-icon-loading",type:"primary",size:"mini",circle:"",plain:""}}):n._e()],1)])},r=[],a=t(4593),i=t(90408),s={mixins:[a.Z],props:{value:{type:Object,required:!0},occurrence:{type:Object,required:!0}},data:()=>({npsReplyText:"",loadingSendBtn:!1,showSendBtn:!1}),computed:{interaction(){return this.value},npsStars(){return Number(this.interaction?.properties?.NPS_STARS||0)},npsEvaluationText(){return this.npsStars<=2?"detrator":this.npsStars<4?"neutro":"promotor"},npsEvaluateDate(){return this.interaction?.updateAt?.dateTime||this.interaction?.createAt?.dateTime},npsResume(){return this.interaction?.properties?.NPS_COMMENT||""},senderEmail(){return this.interaction?.properties?.PERSON_EMAIL||""},npsReasons(){return this.interaction?.properties?.NPS_REASONS.split(",")||[]},npsReply:{get(){return this.interaction?.properties?.NPS_REPLY||this.npsReplyText},set(n){this.npsReplyText=n}},npsReplyHasText(){return Boolean(this.interaction?.properties?.NPS_REPLY)},npsReplyDate(){return this.interaction?.properties?.NPS_REPLY_DATE}},methods:{...(0,i.nv)({replyNps:"replyNps"}),copyToClipboard(n){navigator.clipboard.writeText(this.senderEmail).then((()=>{this.$message("Copiado com sucesso.")}))},toggleSendButton(n){setTimeout((()=>{this.showSendBtn=n}),250)},sendReplyNps(){this.loadingSendBtn=!0,this.replyNps({disputeId:this.$route.params.id,occurrenceId:this.occurrence?.id,disputeRoleId:this.interaction?.properties?.ROLE_ID,data:{response:this.npsReply}}).then((()=>{this.$jusNotification({type:"success",title:"Yay!",message:"Resposta enviada."}),this.$set(this.occurrence.interaction.properties,"NPS_REPLY",this.npsReply),this.$set(this.occurrence.interaction.properties,"NPS_REPLY_DATE",this.$moment().format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"))})).catch((n=>this.$jusNotification({error:n}))).finally((()=>{this.loadingSendBtn=!1}))}}},c=s,l=(t(66083),t(58912),t(1001)),p=(0,l.Z)(c,o,r,!1,null,"eca60512",null),d=p.exports},4593:function(n,e,t){"use strict";var o=t(40917),r=t(90408);e.Z={computed:{...(0,r.Se)({toPrint:"getExportTicketModalVisible"}),person(){const n=this.directionIn?"SENDER_NAME":"RECEIVER_NAME";if(this.interaction?.message?.parameters[n]){const e=this.interaction?.message?.parameters[n];return this.$options.filters.resumedName(e||"")}return this?.interaction?.properties?.PERSON_NAME?this.$options.filters.resumedName(this?.interaction?.properties?.PERSON_NAME):""},isSimilarName(){return(0,o.z_)(this.person,this.contact,75)},directionIn(){return"INBOUND"===this.interaction?.direction},sendDate(){return this.occurrence.updateAt?.dateTime||this.occurrence.createAt?.dateTime},sendStatus(){const n=this.interaction?.message?.parameters||{},e=Object.keys(n);return e.includes("READ_DATE")?"readed":e.includes("RECEIVER_DATE")?"recived":(e.includes("SEND_DATE"),"sent")},sendStatusDate(){const n=this.interaction?.message?.parameters||{},e=Object.keys(n);return e.includes("READ_DATE")?n?.READ_DATE?.includes("[UTC]")?this.$moment(n?.READ_DATE.slice(n?.READ_DATE.indexOf("[UTC]"))):(0,o.be)(n.READ_DATE):e.includes("RECEIVER_DATE")?n?.RECEIVER_DATE?.includes("[UTC]")?this.$moment(n?.RECEIVER_DATE.slice(n?.RECEIVER_DATE.indexOf("[UTC]"))):(0,o.be)(n.RECEIVER_DATE):e.includes("SEND_DATE")?n?.SEND_DATE?.includes("[UTC]")?this.$moment(n?.SEND_DATE.slice(n?.SEND_DATE.indexOf("[UTC]"))):(0,o.be)(n.SEND_DATE):this.interaction?.createAt?.dateTime},properties(){return this.occurrence?.properties},groupedOccurrences(){try{return this.occurrence?.properties?.GROUPED_OCCURRENCES?.length>2?JSON.parse(this.occurrence?.properties?.GROUPED_OCCURRENCES.replace(/'/g,'"')):[]}catch(n){return[]}},haveGroupedOccurrences(){return this.groupedOccurrences.length>0}}}},83237:function(n,e,t){"use strict";t.r(e);var o=t(87537),r=t.n(o),a=t(23645),i=t.n(a),s=i()(r());s.push([n.id,".nps-container__reply .nps-container__reply-input,.nps-container__reply .nps-container__reply-input .el-textarea__inner{border:none}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/partials/Nps.vue"],names:[],mappings:"AAKI,wHACE,WAAA",sourcesContent:["\n.nps-container__reply {\n  .nps-container__reply-input {\n    border: none;\n\n    .el-textarea__inner {\n      border: none;\n    }\n  }\n}\n"],sourceRoot:""}]),e["default"]=s},29901:function(n,e,t){"use strict";t.r(e);var o=t(87537),r=t.n(o),a=t(23645),i=t.n(a),s=i()(r());s.push([n.id,".nps-container[data-v-eca60512]{background-color:transparent;overflow:hidden;margin:6px;padding:0;display:flex;flex-direction:column;align-items:flex-start;gap:8px}.nps-container .nps-container__contact[data-v-eca60512]{display:flex;align-items:center;gap:4px;font-weight:600}.nps-container .nps-container__contact .nps-container__contact-email[data-v-eca60512]{cursor:copy}.nps-container .nps-container__evaluation[data-v-eca60512]{display:flex;align-items:center;gap:8px}.nps-container .nps-container__evaluation .nps-container__evaluation-stars img[data-v-eca60512]{width:16px}.nps-container .nps-container__evaluation .nps-container__evaluation-status .el-tag[data-v-eca60512]{border:none;text-transform:capitalize;font-weight:500;color:#fff}.nps-container .nps-container__evaluation .nps-container__evaluation-status .el-tag.promotor[data-v-eca60512]{background-color:#14cc30}.nps-container .nps-container__evaluation .nps-container__evaluation-status .el-tag.neutro[data-v-eca60512]{background-color:#979797}.nps-container .nps-container__evaluation .nps-container__evaluation-status .el-tag.detrator[data-v-eca60512]{background-color:#ff4b54}.nps-container .nps-container__reasons[data-v-eca60512]{display:inline}.nps-container .nps-container__reasons .nps-container__reasons-item[data-v-eca60512]{margin:0 2px 4px;font-weight:500;color:#979797;border-color:#979797}.nps-container .nps-container__person-name[data-v-eca60512]{font-size:12px}.nps-container .nps-container__comment[data-v-eca60512]{display:flex;flex-direction:column}.nps-container .nps-container__comment .nps-container__comment-date[data-v-eca60512]{font-size:12px}.nps-container .nps-container__comment .nps-container__comment-text[data-v-eca60512]{font-style:italic;margin:2px 0}.nps-container .nps-container__reply[data-v-eca60512]{padding:4px;background:#fff;border:1px solid #f3f4f5;border-radius:10px;width:100%;position:relative}.nps-container .nps-container__reply .nps-container__reply-about[data-v-eca60512]{display:flex;gap:8px}.nps-container .nps-container__reply .nps-container__reply-about .nps-container__reply-about-icon[data-v-eca60512]{width:16px;height:16px;transform:rotate(180deg)}.nps-container .nps-container__reply .nps-container__reply-about .nps-container__reply-about-date[data-v-eca60512]{color:#979797;font-size:12px}.nps-container .nps-container__reply .nps-container__reply-btn[data-v-eca60512]{position:absolute;bottom:0;right:0;margin:0 4px 4px 0;color:#9461f7;background:#f4effe;border-color:#d4c0fc}.nps-container .nps-container__reply .nps-container__reply-btn span>img[data-v-eca60512]{width:12px;height:12px}.nps-container .nps-container__reply .nps-container__reply-btn[data-v-eca60512]:hover{color:#9461f7;background:#f4effe;border-color:#d4c0fc}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/partials/Nps.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAGA,gCACE,4BAAA,CACA,eAAA,CACA,UAAA,CACA,SAAA,CAEA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,OAAA,CAEA,wDACE,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,eAAA,CAEA,sFACE,WAAA,CAIJ,2DACE,YAAA,CACA,kBAAA,CACA,OAAA,CAGE,gGACE,UAAA,CAKF,qGACE,WAAA,CACA,yBAAA,CACA,eAAA,CACA,UCvCQ,CDyCR,8GACE,wBC2Ba,CDxBf,4GACE,wBCwBY,CDrBd,8GACE,wBCqBc,CDftB,wDACE,cAAA,CAEA,qFACE,gBAAA,CACA,eAAA,CACA,aCQgB,CDPhB,oBCOgB,CDHpB,4DACE,cAAA,CAGF,wDACE,YAAA,CACA,qBAAA,CAEA,qFACE,cAAA,CAGF,qFACE,iBAAA,CACA,YAAA,CAIJ,sDACE,WAAA,CACA,eCvFY,CDwFZ,wBAAA,CACA,kBAAA,CACA,UAAA,CACA,iBAAA,CAEA,kFACE,YAAA,CACA,OAAA,CAEA,mHACE,UAAA,CACA,WAAA,CACA,wBAAA,CAGF,mHACE,aCtGO,CDuGP,cAAA,CAIJ,gFACE,iBAAA,CACA,QAAA,CACA,OAAA,CACA,kBAAA,CAEA,aAAA,CACA,kBAAA,CACA,oBAAA,CAEA,yFACE,UAAA,CACA,WAAA,CAGF,sFACE,aAAA,CACA,kBAAA,CACA,oBAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.nps-container {\n  background-color: transparent;\n  overflow: hidden;\n  margin: 6px;\n  padding: 0px;\n\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 8px;\n\n  .nps-container__contact {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n\n    font-weight: 600;\n\n    .nps-container__contact-email {\n      cursor: copy;\n    }\n  }\n\n  .nps-container__evaluation {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    .nps-container__evaluation-stars {\n      img {\n        width: 16px;\n      }\n    }\n\n    .nps-container__evaluation-status {\n      .el-tag {\n        border: none;\n        text-transform: capitalize;\n        font-weight: 500;\n        color: $--color-white;\n\n        &.promotor {\n          background-color: $--color-nps-promoter;\n        }\n\n        &.neutro {\n          background-color: $--color-nps-neutral;\n        }\n\n        &.detrator {\n          background-color: $--color-nps-detractor;\n        }\n      }\n    }\n  }\n\n  .nps-container__reasons {\n    display: inline;\n\n    .nps-container__reasons-item {\n      margin: 0px 2px 4px;\n      font-weight: 500;\n      color: $--color-nps-neutral;\n      border-color: $--color-nps-neutral;\n    }\n  }\n\n  .nps-container__person-name {\n    font-size: 12px;\n  }\n\n  .nps-container__comment {\n    display: flex;\n    flex-direction: column;\n\n    .nps-container__comment-date {\n      font-size: 12px;\n    }\n\n    .nps-container__comment-text {\n      font-style: italic;\n      margin: 2px 0;\n    }\n  }\n\n  .nps-container__reply {\n    padding: 4px;\n    background: $--color-white;\n    border: solid 1px $--color-light-gray;\n    border-radius: 10px;\n    width: 100%;\n    position: relative;\n\n    .nps-container__reply-about {\n      display: flex;\n      gap: 8px;\n\n      .nps-container__reply-about-icon {\n        width: 16px;\n        height: 16px;\n        transform: rotate(180deg);\n      }\n\n      .nps-container__reply-about-date {\n        color: $--color-text-secondary;\n        font-size: 12px;\n      }\n    }\n\n    .nps-container__reply-btn {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      margin: 0 4px 4px 0;\n\n      color: #9461f7;\n      background: #f4effe;\n      border-color: #d4c0fc;\n\n      span > img {\n        width: 12px;\n        height: 12px;\n      }\n\n      &:hover {\n        color: #9461f7;\n        background: #f4effe;\n        border-color: #d4c0fc;\n      }\n    }\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),e["default"]=s},66083:function(n,e,t){var o=t(83237);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[n.id,o,""]]),o.locals&&(n.exports=o.locals);var r=t(39185).Z;r("8e73166e",o,!0,{sourceMap:!0,shadowMode:!1})},58912:function(n,e,t){var o=t(29901);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[n.id,o,""]]),o.locals&&(n.exports=o.locals);var r=t(39185).Z;r("0f9b287d",o,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=3742.js.map