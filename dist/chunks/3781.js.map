{"version":3,"file":"chunks/3781.js","mappings":"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","sources":["webpack://@projuris/justto-web/./src/components/dialogs/JusImportDialog.vue","webpack://@projuris/justto-web/src/components/dialogs/JusImportDialog.vue","webpack://@projuris/justto-web/./src/components/dialogs/JusImportDialog.vue?3ea1","webpack://@projuris/justto-web/./src/components/dialogs/JusImportDialog.vue?ac39","webpack://@projuris/justto-web/./src/components/dialogs/JusImportDialog.vue?0172","webpack://@projuris/justto-web/./src/components/dialogs/JusImportDialog.vue?cc48"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{staticClass:\"jus-import-dialog\",attrs:{\"close-on-click-modal\":false,\"visible\":_vm.visible,\"title\":\"Nova importação de disputas\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('label',{attrs:{\"for\":\"fileupload\"},on:{\"dragover\":function($event){$event.preventDefault();},\"drop\":function($event){$event.preventDefault();return _vm.handleFile($event)}}},[_c('el-card',{staticClass:\"el-card--dashed-hover\",attrs:{\"shadow\":\"never\"}},[(_vm.isInitial)?_c('div',[_c('jus-icon',{attrs:{\"icon\":\"upload-file\",\"is-active\":\"\"}}),_c('div',[_c('br'),_vm._v(\" Clique aqui e importe sua planilha nos\"),_c('br'),_vm._v(\" formatos XLSX, CSV ou XLS. \")])],1):_vm._e(),(_vm.isSaving)?_c('div',[_c('br'),_c('br'),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(true),expression:\"true\"}],staticClass:\"import-view__loading\"}),_c('div',[_c('br'),_c('br'),_c('br'),_vm._v(\" Carregando... \")])]):_vm._e(),(_vm.isSuccess)?_c('div',[_c('jus-icon',{attrs:{\"icon\":\"spreadsheet-xlsx\"}}),_c('div',[_c('br'),_c('br'),_vm._v(\" \"+_vm._s(_vm.uploadedFile.file_name)+\" \")])],1):_vm._e()]),_c('input',{ref:\"fileupload\",staticClass:\"jus-import-dialog__upload\",attrs:{\"id\":\"fileupload\",\"type\":\"file\"},on:{\"change\":function($event){return _vm.handleFile($event)}}})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialog}},[_vm._v(\"Cancelar\")]),_c('el-button',{attrs:{\"disabled\":!_vm.isSuccess,\"type\":\"primary\"},on:{\"click\":_vm.startImport}},[_vm._v(\" Importar \")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"html\">\n  <el-dialog\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"visible\"\n    class=\"jus-import-dialog\"\n    title=\"Nova importação de disputas\"\n  >\n    <label\n      for=\"fileupload\"\n      @dragover.prevent\n      @drop.prevent=\"handleFile($event)\"\n    >\n      <el-card\n        class=\"el-card--dashed-hover\"\n        shadow=\"never\"\n      >\n        <div v-if=\"isInitial\">\n          <jus-icon\n            icon=\"upload-file\"\n            is-active\n          />\n          <div>\n            <br>\n            Clique aqui e importe sua planilha nos<br> formatos XLSX, CSV ou XLS.\n          </div>\n        </div>\n        <div v-if=\"isSaving\">\n          <br><br>\n          <div\n            v-loading=\"true\"\n            class=\"import-view__loading\"\n          />\n          <div>\n            <br><br><br>\n            Carregando...\n          </div>\n        </div>\n        <div v-if=\"isSuccess\">\n          <jus-icon icon=\"spreadsheet-xlsx\" />\n          <div>\n            <br><br>\n            {{ uploadedFile.file_name }}\n          </div>\n        </div>\n      </el-card>\n      <input\n        id=\"fileupload\"\n        ref=\"fileupload\"\n        type=\"file\"\n        class=\"jus-import-dialog__upload\"\n        @change=\"handleFile($event)\"\n      >\n    </label>\n    <span\n      slot=\"footer\"\n      class=\"dialog-footer\"\n    >\n      <el-button @click=\"closeDialog\">Cancelar</el-button>\n\n      <el-button\n        :disabled=\"!isSuccess\"\n        type=\"primary\"\n        @click=\"startImport\"\n      >\n        Importar\n      </el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nconst STATUS_INITIAL = 0\nconst STATUS_SAVING = 1\nconst STATUS_SUCCESS = 2\n\nexport default {\n  name: 'JusImportDialog',\n  props: {\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      currentStatus: 0,\n      uploadedFile: null,\n      uploadError: null\n    }\n  },\n  computed: {\n    visible: {\n      get() {\n        return this.dialogVisible\n      },\n      set(visible) {\n        this.$emit('update:dialogVisible', visible)\n      }\n    },\n    isInitial() {\n      return this.currentStatus === STATUS_INITIAL\n    },\n    isSaving() {\n      return this.currentStatus === STATUS_SAVING\n    },\n    isSuccess() {\n      return this.currentStatus === STATUS_SUCCESS\n    }\n  },\n  methods: {\n    startImport() {\n      // SEGMENT TRACK\n      this.$jusSegment('Importação 2/4 Importação iniciada', { fileName: this.uploadedFile.file_name })\n      this.$router.push('/import/new')\n      this.$store.dispatch('hideLoading')\n    },\n    handleFile(e) {\n      this.$notify.closeAll()\n      const file = e.dataTransfer ? e.dataTransfer.files[0] : e.target.files[0]\n      const isLt20M = file.size / 1024 / 1024 < 20\n      const isValid =\n        file.name.toLowerCase().endsWith('.xlsx') ||\n        file.name.toLowerCase().endsWith('.xls') ||\n        file.name.toLowerCase().endsWith('.csv')\n      if (!isValid) {\n        this.$jusNotification({\n          title: 'Ops!',\n          message: 'Arquivo em formato inválido.',\n          type: 'warning'\n        })\n      }\n      if (!isLt20M) {\n        this.$jusNotification({\n          title: 'Ops!',\n          message: 'Arquivo não pode ultrapassar 20MB.',\n          type: 'warning'\n        })\n      }\n      if (isLt20M && isValid) {\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('created_person_id', this.$store.getters.loggedPersonId)\n        formData.append('created_name', this.$store.getters.loggedPersonName)\n        formData.append('created_by', this.$store.getters.accountEmail)\n        this.saveFile(formData)\n        // SEGMENT TRACK\n        this.$jusSegment('Importação 1/4 Ulpoad concluido', { fileName: file.name })\n      } else {\n        this.removeFile()\n      }\n    },\n    saveFile(formData) {\n      this.currentStatus = STATUS_SAVING\n      this.$store.dispatch('uploadImportFile', formData).then(response => {\n        this.currentStatus = STATUS_SUCCESS\n        this.uploadedFile = response\n        this.$store.commit('setImportsFile', response)\n      }).catch(error => {\n        this.handleError(error.response)\n        this.removeFile()\n        this.currentStatus = STATUS_INITIAL\n      })\n    },\n    handleError(error) {\n      const errorMessage = {}\n      if (error.status === 406) {\n        errorMessage.message = error.data.error\n        errorMessage.type = 'warning'\n      } else if (error.data.error) {\n        errorMessage.message = 'Arquivo vazio ou fora do formato padrão. Verifique o seu conteúdo e tente novamente.'\n        errorMessage.type = 'warning'\n      } else if (error.data.file.length) {\n        errorMessage.message = ''\n\n        error.data.file.forEach(err => {\n          if (err.startsWith('Ensure this filename')) {\n            errorMessage.message = `${errorMessage.message}Nome do arquivo deve ter no máximo 100 caracteres.<br>`\n          } else {\n            errorMessage.message = `${errorMessage.message}${err}<br>`\n          }\n        })\n\n        errorMessage.type = 'error'\n      } else {\n        errorMessage.message = 'Houve uma falha de conexão com o servidor. Tente novamente ou entre em contato com o administrador do sistema.'\n        errorMessage.type = 'error'\n      }\n      this.currentStatus = STATUS_INITIAL\n      this.$jusNotification({\n        title: 'Ops!',\n        message: errorMessage.message,\n        dangerouslyUseHTMLString: true,\n        type: errorMessage.type\n      })\n    },\n    closeDialog() {\n      this.visible = false\n      this.removeFile()\n    },\n    removeFile() {\n      const input = this.$refs.fileupload\n      input.type = 'text'\n      input.type = 'file'\n      this.$store.commit('removeImportsFile')\n      this.currentStatus = STATUS_INITIAL\n      this.uploadedFile = null\n      this.uploadError = null\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.jus-import-dialog {\n  .el-card {\n    padding: 30px;\n    margin: 20px 0;\n    cursor: pointer;\n  }\n  img {\n    width: 60px;\n  }\n  .el-card__body > div{\n    text-align: center;\n  }\n  &__upload {\n    display: none\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JusImportDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JusImportDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JusImportDialog.vue?vue&type=template&id=21bede24&lang=html&\"\nimport script from \"./JusImportDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./JusImportDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JusImportDialog.vue?vue&type=style&index=0&id=21bede24&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".jus-import-dialog .el-card{padding:30px;margin:20px 0;cursor:pointer}.jus-import-dialog img{width:60px}.jus-import-dialog .el-card__body>div{text-align:center}.jus-import-dialog__upload{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/dialogs/JusImportDialog.vue\"],\"names\":[],\"mappings\":\"AAEE,4BACE,YAAA,CACA,aAAA,CACA,cAAA,CAEF,uBACE,UAAA,CAEF,sCACE,iBAAA,CAEF,2BACE,YAAA\",\"sourcesContent\":[\"\\n.jus-import-dialog {\\n  .el-card {\\n    padding: 30px;\\n    margin: 20px 0;\\n    cursor: pointer;\\n  }\\n  img {\\n    width: 60px;\\n  }\\n  .el-card__body > div{\\n    text-align: center;\\n  }\\n  &__upload {\\n    display: none\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JusImportDialog.vue?vue&type=style&index=0&id=21bede24&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0676a2c5\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","staticClass","attrs","visible","on","$event","preventDefault","handleFile","isInitial","_v","_e","isSaving","directives","name","rawName","value","expression","isSuccess","_s","uploadedFile","file_name","ref","slot","closeDialog","startImport","staticRenderFns","STATUS_INITIAL","STATUS_SAVING","STATUS_SUCCESS","props","dialogVisible","type","Boolean","default","data","currentStatus","uploadError","computed","get","set","$emit","methods","$jusSegment","fileName","$router","push","$store","dispatch","e","$notify","closeAll","file","dataTransfer","files","target","isLt20M","size","isValid","toLowerCase","endsWith","$jusNotification","title","message","formData","FormData","append","getters","loggedPersonId","loggedPersonName","accountEmail","saveFile","removeFile","then","response","commit","catch","error","handleError","errorMessage","status","length","forEach","err","startsWith","dangerouslyUseHTMLString","input","$refs","fileupload","component","___CSS_LOADER_EXPORT___","module","id","content","__esModule","locals","exports","add"],"sourceRoot":""}