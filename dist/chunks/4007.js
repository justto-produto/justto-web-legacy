(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[4007],{54007:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return d}});var t=function(){var e=this,l=e._self._c;return l("article",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"call-queue__container"},[e.isActiveToCall||e.hasCallInQueue?l("div",{staticClass:"call-queue__container-feedback"},[l("audio",{ref:"ringAudio",attrs:{id:"ringAudio",src:"https://s3.sa-east-1.amazonaws.com/justto.app/discador/notification-new-dialer.mp3",loop:""}}),l("audio",{ref:"endAudio",attrs:{src:"https://s3.sa-east-1.amazonaws.com/justto.app/discador/CallEndTuTuTu.mp3",loop:""}}),e.isActiveToCall&&e.isOpenCall?l("div",{staticClass:"call-queue__container-feedback-hangup"},[l("el-button",{staticClass:"in-call-btn",attrs:{type:"text"}},[e._v(" "+e._s(e.endingCall?"Encerrando chamada":"Em chamada")+" ")]),l("el-tooltip",{attrs:{content:e.netSpeedBtnText,"open-delay":500}},[l("el-button",{staticClass:"speed-btn",attrs:{type:e.netSpeedBtnStatus,size:"mini",icon:"el-icon-phone-outline",round:"",plain:""}},[e._v(" "+e._s(e.netSpeedMbps)+" ")])],1),l("br"),l("el-button",{attrs:{disabled:e.endingCall,type:"danger",icon:e.endingCall?"el-icon-loading":""},on:{click:function(l){return e.hangUpCall()}}},[e._v(" "+e._s(e.endingCall?"Desligando":"Desligar")+" ")])],1):e._e(),!e.isOpenCall&&e.hasCallInQueue?l("div",[e.isPendingToAnswerCurrentCall?l("div",[l("p",[e._v("Entrando na chamada")])]):l("div",{staticClass:"waiting-dialer"},[l("p",[l("span",[e._v(" Sua ligação está sendo realizada "),l("el-tooltip",{attrs:{content:"Aguardando disponibilidade de um discador. Por favor aguarde!",placement:"top-end"}},[l("i",{staticClass:"el-icon-info"})])],1)]),e._m(0),l("p",[l("el-skeleton",{staticClass:"load-skeleton",attrs:{rows:1,animated:""}})],1),e.isActiveToCall&&(e.isAdminProfile||e.isJusttoAdmin)?l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openBuyDialerDialog}},[e._v(" Adquira discadores dedicados ")]):e._e()],1)]):e._e(),!e.isInCorrectDispute&&e.hasCallInQueue?l("div",[l("el-button",{attrs:{size:"mini",type:"secondary",icon:"el-icon-phone-outline"},on:{click:e.redirectToDispute}},[l("span",[e._v("Ir para a disputa")])])],1):e._e()]):e._e(),e._l(e.callQueue,(function(n,t){return l("div",{key:`callQueueItem-${t}`,staticClass:"call-queue__container-call-queue"},[l("div",{staticClass:"call-queue__container-call-queue-line"},[l("router-link",{attrs:{to:`/management/dispute/${n.disputeId}`}},[e._v(" #"+e._s(n.disputeId)+" ("+e._s(e.$tc(`ticket-status.${n.disputeStatus}`))+") ")]),l("el-tag",{staticClass:"call-queue__container-call-queue-line-item",attrs:{size:"mini"}},[e._v(" "+e._s(e.$tc(`call.status.${n.status}`))+" ")])],1),l("div",{staticClass:"call-queue__container-call-queue-line"},[l("div",{staticClass:"call-queue__container-call-queue-line-item"},[e._v(" "+e._s(e._f("resumedName")(n.toRoleName))+" ")]),l("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(e._f("phoneNumber")(n.number))+" ")]),l("el-button",{attrs:{disabled:e.endingCall,type:"danger",icon:e.endingCall?"el-icon-loading":"el-icon-delete-solid",size:"mini",circle:"",plain:""},on:{click:function(l){return e.remove(n.id)}}})],1)])})),0===e.callQueue.length?l("div",{staticClass:"call-queue__container-empty-queue"},[e.enabledScheduledCalls&&e.scheduledCallsQueue.length>0?l("i",{staticClass:"el-icon-loading"}):e._e(),e.enabledScheduledCalls?l("div",{staticClass:"call-queue__container-empty-queue-label"},[e._v(" "+e._s(e.scheduledCallsQueue.length?"Localizando sua próxima chamada.":"Sem chamadas agendadas.")+" ")]):l("div",{staticClass:"call-queue__container-empty-queue-label"},[e._v(" Sem chamadas pendentes. ")])]):e._e(),e.isJusttoDev?l("ScheduledCallSwitch"):e._e(),l("ScheduledCallsQueue"),l("CallHelp",{attrs:{ending:e.endingCall},on:{"queue:hide":function(l){return e.$emit("hide")},"call:end":function(l){return e.hangUpCall()}}})],2)},a=[function(){var e=this,l=e._self._c;return l("h4",[e._v(" Existem outras pessoas na sua frente utilizando o telefone. "),l("br"),e._v(" Por favor aguarde ou adquira um telefone dedicado pra você. ")])}],i=(n(57658),n(90408)),o=n(62383),r={components:{CallHelp:()=>n.e(1270).then(n.bind(n,51270)),ScheduledCallSwitch:()=>n.e(6187).then(n.bind(n,26187)),ScheduledCallsQueue:()=>n.e(1579).then(n.bind(n,71579))},props:{loading:{type:Boolean,default:!1}},data:()=>({endingCall:!1,forwardedDisputeId:null}),computed:{...(0,i.Se)({dialer:"getDialer",isOpenCall:"isOpenCall",callQueue:"getCallQueue",isJusttoDev:"isJusttoDev",currentCall:"getCurrentCall",isJusttoAdmin:"isJusttoAdmin",backups:"getMessagesBackupById",isAdminProfile:"isAdminProfile",isActiveToCall:"isActiveToCall",hasCallInQueue:"hasCallInQueue",netSpeed:"getSipConnectionSpeed",currentAppInstance:"getAppInstance",disputeInterface:"preferedInterface",scheduledCallsQueue:"getScheduledCallsQueue",enabledScheduledCalls:"canMakeScheduledCalls",isPendingToAnswerCurrentCall:"isPendingToAnswerCurrentCall"}),netSpeedMbps(){return(this.netSpeed/1024).toFixed(0)+" Kbps"},netSpeedBtnStatus(){return this.netSpeed<=1024?"danger":this.netSpeed<=5120?"warning":"success"},netSpeedBtnText(){const e="Conexão muito instável.",l="Conexão instável.",n="Conexão estável.";return this.netSpeed<=1024?e:this.netSpeed<=5120?l:n},currentDisputeId(){return this.$route.params?.id},isInDispute(){return["dispute","ticket"].includes(this.$route?.name)},isInCorrectDispute(){return this.isInDispute&&Number(this.currentCall?.disputeId)===Number(this.currentDisputeId)},isInCall(){return"ACTIVE_CALL"===this.currentCall?.status}},watch:{currentCall:{deep:!0,handler:"handleCallUpdate"}},methods:{...(0,i.nv)({openBuyDialerDialog:"openBuyDialerDialog",answerCurrentCall:"answerCurrentCall",removeCall:"SOCKET_REMOVE_CALL",callTerminated:"callTerminated",endCall:"endCall",leaveDialer:"leaveDialer"}),answerCall(e){this.answerCurrentCall(e).then((l=>{e&&(l?this.$jusSegment("START_DIALER_CALL",{...this.currentCall}):this.$jusNotification({title:"Ops!",message:"Não foi possível continuar a chamada.",type:"warning"}))}))},redirectToDispute(){const{disputeId:e}=this.currentCall,l="NEGOTIATION"===this.disputeInterface?`/negotiation/${e}`:`management/dispute/${e}`;this.forwardedDisputeId=e,this.$router.push({path:l})},backToFowwarded(){this.forwardedDisputeId=null,history.back()},remove(e){const{ACTIVE_CALL:l,RECEIVING_CALL:n,COMPLETED_CALL:t}=o.CALL_STATUS,a=this.currentCall?.status===o.CALL_STATUS.ENQUEUED,i=[l,n,t].includes(this.currentCall?.status)&&Number.isInteger(this.currentCall?.id),r=!a&&!i,c=this.dialer?.id;e!==this.currentCall?.id||a?this.removeCall({callId:e}):(i&&this.hangUpCall(),r&&this.leaveDialer({dialerId:c,callId:this.currentCall?.id}))},hangUpCall(){this.endingCall=!0,this.endCall({dialerId:this.dialer.id,callId:this.currentCall.id}).then((()=>{this.$refs?.ringAudio&&this.$refs.ringAudio.pause();const e=this.$refs.endAudio;e.play(),this.endingCall=!1,setTimeout((()=>{e.pause()}),1500)}))},handleCallUpdate(e,l){if([l?.status,e?.status].includes("COMPLETED_CALL")){this.$jusSegment("END_DIALER_CALL",{...e||l});const{message:n,note:t}=this.backups(this.forwardedDisputeId);this.forwardedDisputeId&&(n||t)?this.$confirm(`Você estava trabalhando na disputa <b>#${this.forwardedDisputeId}</b> antes de fazer a ligação telefônica.<br><br><b>Deseja voltar para ela?<b>`,`Voltar pra disputa #${this.forwardedDisputeId}`,{confirmButtonText:`Sim, voltar pra disputa #${this.forwardedDisputeId}.`,cancelButtonText:"Não, permanecer nesta disputa.",customClass:"back-forward-dispute-confirm",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,closeOnPressEscape:!0,showClose:!1,center:!0}).then(this.backToFowwarded).finally((()=>{this.forwardedDisputeId=null})):this.forwardedDisputeId=null}else["RECEIVING_CALL"].includes(e?.status)?(this.$refs.ringAudio.play(),setTimeout((()=>this.answerCall(!0)),4e3)):!["RECEIVING_CALL"].includes(e?.status)&&this.$refs.ringAudio&&this.$refs.ringAudio.pause()}}},c=r,u=(n(60547),n(1001)),s=(0,u.Z)(c,t,a,!1,null,null,null),d=s.exports},1609:function(e,l,n){"use strict";n.r(l);var t=n(87537),a=n.n(t),i=n(23645),o=n.n(i),r=o()(a());r.push([e.id,".call-queue__container{display:flex;flex-direction:column;gap:16px;min-width:300px;width:100%}.call-queue__container .call-queue__container-feedback{display:flex;flex-direction:column;align-items:center;gap:8px;width:100%}.call-queue__container .call-queue__container-feedback *{text-align:center}.call-queue__container .call-queue__container-feedback div{display:flex;justify-content:center;flex-direction:column}.call-queue__container .call-queue__container-feedback div .in-call-btn{cursor:text}.call-queue__container .call-queue__container-feedback div .in-call-btn span{font-weight:600}.call-queue__container .call-queue__container-feedback div .speed-btn{position:absolute;top:0;right:0;border:none;margin:4px 4px 0 0;padding:4px 8px!important}.call-queue__container .call-queue__container-feedback div .speed-btn span{font-size:10px}.call-queue__container .call-queue__container-feedback div p:not(.end-call__text){font-size:18px;font-weight:700}.call-queue__container .call-queue__container-feedback div .end-call__text{color:#ff4b54;font-size:12px}.call-queue__container .call-queue__container-feedback div .waiting-dialer{max-width:25vw;word-break:break-word;display:flex;flex-direction:column;align-items:center}.call-queue__container .call-queue__container-feedback div .waiting-dialer .load-skeleton .el-skeleton .is-first{width:100%}.call-queue__container .call-queue__container-feedback-time-running-call{display:block;text-align:center}.call-queue__container .call-queue__container-call-queue{border:none;box-shadow:0 3px 6px #00000029;border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:8px}.call-queue__container .call-queue__container-call-queue .call-queue__container-call-queue-line{display:flex;flex-direction:row;gap:8px;justify-content:space-between;align-items:center;gap:16px}.call-queue__container .call-queue__container-call-queue .call-queue__container-call-queue-line .el-button:hover{border-color:#fff}.call-queue__container .call-queue__container-call-queue .call-queue__container-call-queue-line .el-button:hover .el-icon-delete:before{color:#fff}.call-queue__container .call-queue__container-empty-queue{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}.call-queue__container .call-queue__container-empty-queue .call-queue__container-empty-queue-icon{height:24px;width:24px}.call-queue__container .call-queue__container-empty-queue .call-queue__container-empty-queue-label{font-weight:600}.call-queue__container .call-queue__container-empty-queue .el-icon-loading:before{font-size:24px}.call-queue__container .call-queue__back-button{display:flex;justify-content:center}.back-forward-dispute-confirm{min-width:50vw}","",{version:3,sources:["webpack://./src/views/main/dialer/CallQueue.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAGA,uBACE,YAAA,CACA,qBAAA,CACA,QAAA,CACA,eAAA,CACA,UAAA,CAEA,uDACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,OAAA,CACA,UAAA,CAEA,yDACE,iBAAA,CAGF,2DACE,YAAA,CACA,sBAAA,CACA,qBAAA,CAEA,wEACE,WAAA,CAEA,6EACE,eAAA,CAIJ,sEACE,iBAAA,CACA,KAAA,CACA,OAAA,CAEA,WAAA,CACA,kBAAA,CACA,yBAAA,CAEA,2EACE,cAAA,CAIJ,kFACE,cAAA,CACA,eAAA,CAGF,2EACE,aCLS,CDMT,cAAA,CAGF,2EACE,cAAA,CACA,qBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CAII,iHACE,UAAA,CAQZ,yEACE,aAAA,CACA,iBAAA,CAGF,yDACE,WAAA,CACA,8BAAA,CACA,iBAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,gGACE,YAAA,CACA,kBAAA,CACA,OAAA,CACA,6BAAA,CACA,kBAAA,CACA,QAAA,CAEA,iHACE,iBAAA,CAEA,wIACE,UAAA,CAMR,0DACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,OAAA,CAEA,kGACE,WAAA,CACA,UAAA,CAGF,mGACE,eAAA,CAGF,kFACE,cAAA,CAIJ,gDACE,YAAA,CACA,sBAAA,CAQJ,8BACE,cAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.call-queue__container {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  min-width: 300px;\n  width: 100%;\n\n  .call-queue__container-feedback {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8px;\n    width: 100%;\n\n    * {\n      text-align: center;\n    }\n\n    div {\n      display: flex;\n      justify-content: center;\n      flex-direction: column;\n\n      .in-call-btn {\n        cursor: text;\n\n        span {\n          font-weight: 600;\n        }\n      }\n\n      .speed-btn {\n        position: absolute;\n        top: 0;\n        right: 0;\n\n        border: none;\n        margin: 4px 4px 0 0;\n        padding: 4px 8px !important;\n\n        span {\n          font-size: 10px;\n        }\n      }\n\n      p:not(.end-call__text) {\n        font-size: 18px;\n        font-weight: bold;\n      }\n\n      .end-call__text {\n        color: $--color-danger;\n        font-size: 12px;\n      }\n\n      .waiting-dialer {\n        max-width: 25vw;\n        word-break: break-word;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n\n        .load-skeleton {\n          .el-skeleton {\n            .is-first {\n              width: 100%;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .call-queue__container-feedback-time-running-call {\n    display: block;\n    text-align: center;\n  }\n\n  .call-queue__container-call-queue {\n    border: none;\n    box-shadow: 0px 3px 6px #00000029;\n    border-radius: 6px;\n    padding: 8px;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n\n    .call-queue__container-call-queue-line {\n      display: flex;\n      flex-direction: row;\n      gap: 8px;\n      justify-content: space-between;\n      align-items: center;\n      gap: 16px;\n\n      .el-button:hover {\n        border-color: white;\n\n        .el-icon-delete::before {\n          color: white;\n        }\n      }\n    }\n  }\n\n  .call-queue__container-empty-queue {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n\n    .call-queue__container-empty-queue-icon {\n      height: 24px;\n      width: 24px;\n    }\n\n    .call-queue__container-empty-queue-label {\n      font-weight: 600;\n    }\n\n    .el-icon-loading::before {\n      font-size: 24px;\n    }\n  }\n\n  .call-queue__back-button {\n    display: flex;\n    justify-content: center;\n  }\n\n  // div:not(.el-dialog__wrapper):not(.el-collapse):not(.el-collapse>*) {\n  //   z-index: 3000;\n  // }\n}\n\n.back-forward-dispute-confirm {\n  min-width: 50vw;\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),l["default"]=r},60547:function(e,l,n){var t=n(1609);t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);var a=n(39185).Z;a("2ec99fa0",t,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=4007.js.map