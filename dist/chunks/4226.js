(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[4226],{34226:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return d}});var i=function(){var a=this,e=a._self._c;return e("article",{directives:[{name:"loading",rawName:"v-loading",value:a.isAttachmentLoading,expression:"isAttachmentLoading"}],ref:"dragAreaElm",staticClass:"jus-drag-area",class:{"jus-drag-area--dragging":a.maskIsVisible},on:{dragenter:a.handleDragenter}},[a._t("default"),e("label",{attrs:{for:`input-file-drag-area-${a._uid}`},on:{dragover:function(e){return e.preventDefault(),a.handleDragenter.apply(null,arguments)},dragleave:a.handleDragleave,drop:function(e){return e.preventDefault(),a.handleDrop.apply(null,arguments)}}},[e("el-card",{staticClass:"el-card--dashed-hover jus-drag-area__mask",attrs:{"body-style":{"text-align":"center"},shadow:"never"}},[e("div",{staticClass:"jus-drag-area__mask-action"}),e("div",[e("jus-icon",{attrs:{icon:"upload-file","is-active":""}}),e("br"),a._v(" Arraste aqui os anexos que deseja importar! ")],1)])],1),e("input",{staticClass:"jus-drag-area__input-file",attrs:{id:`input-file-drag-area-${a._uid}`,"data-max-size":"20971520",type:"file"},on:{change:a.handleDrop}}),e("el-dialog",{attrs:{visible:a.attachmentDialog.isVisible,"append-to-body":"",title:"Enviar Anexos","custom-class":"attachment-dialog","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"before-close":a.closeAttachmentDialog},on:{"update:visible":function(e){return a.$set(a.attachmentDialog,"isVisible",e)}}},[e("div",{staticClass:"attachment-dialog__container"},[e("span",{staticClass:"attachment-dialog__container-message"},[a._v(" "+a._s(a.attachmentDialog.message)+" ")]),e("div",{staticClass:"attachment-dialog__container-check"},[e("el-switch",{class:a.attachmentDialog.confidential?"inactive":"active",model:{value:a.attachmentDialog.confidential,callback:function(e){a.$set(a.attachmentDialog,"confidential",e)},expression:"attachmentDialog.confidential"}}),e("span",[e("strong",[a._v(" "+a._s(a.attachmentDialog.confidential?"Não exibir":"Exibir")+" ")]),a._v(" anexo no portal de negociações ")])],1)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){a.attachmentDialog.isVisible=!1}}},[a._v(" Cancelar ")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.uploadFiles(a.attachmentDialog)}}},[a._v(" Continuar ")])],1)])],2)},n=[],s=t(90408),o={name:"JusDragArea",props:{visible:{type:Boolean,default:!1}},data:()=>({isDragging:!1,isAttachmentLoading:!1,attachmentDialog:{isVisible:!1,message:"",confidential:!1,files:[]}}),computed:{maskIsVisible:a=>a.visible||a.isDragging},methods:{...(0,s.nv)(["uploadAttachment","getDisputeAttachments","hideLoadingAttachments","getTicketOverviewAttachments"]),handleDragenter(a){a.dataTransfer.types.includes("Files")&&(this.isDragging=!0)},handleDragleave(a){this.isDragging=!1},handleDrop(a){const{files:e}=a.dataTransfer||a.target;this.uploadVerification(e),this.isDragging=!1},closeAttachmentDialog(a){a(),this.attachmentDialog.message="",this.attachmentDialog.confidential=!1,this.attachmentDialog.files=[]},uploadFiles({files:a,confidential:e}){Promise.all([...Object.keys(a).map((t=>this.saveFile(a[t],e)))]).then((()=>{this.attachmentDialog.isVisible=!1}))},uploadVerification(a){const e=Object.keys(a),t=20971520,i=Array(...a).filter((a=>a.size>t)).length>0;i?this.$jusNotification({title:"Arquivo muito grande!",message:"Não suportamos arquivos com mais de 20 Mb.",type:"warning"}):(1===e.length?this.attachmentDialog.message=`Tem certeza que deseja fazer o upload do arquivo "${a[0].name}"?`:this.attachmentDialog.message=`Tem certeza que deseja fazer o upload de ${e.length} arquivos?`,this.attachmentDialog.files=a,this.attachmentDialog.isVisible=!0)},updateAttachments(a){return window.location.href.includes("negotiation")?this.getTicketOverviewAttachments(a):window.location.href.includes("dispute")?this.getDisputeAttachments(a):new Promise((a=>a))},saveFile(a,e=!1){this.isAttachmentLoading=!0;const t="Solicitação de upload do arquivo",i=this.$route.params.id,n=new FormData;return n.append("file",a),this.uploadAttachment({disputeId:i,formData:n,file:a,confidential:e}).then((()=>{this.updateAttachments(i).then((()=>{this.$jusNotification({title:"Yay!",message:"Anexo(s) adicionado(s) com sucesso",type:"success"}),this.$jusSegment(t,{fileName:a.name})}))})).catch((e=>{this.$jusNotification({error:e}),this.$jusSegment(`${t} falhou`,{fileName:a.name})})).finally((()=>{this.$emit("closeDialog"),this.isAttachmentLoading=!1,this.hideLoadingAttachments()}))}}},r=o,l=(t(8652),t(46041),t(1001)),c=(0,l.Z)(r,i,n,!1,null,"23cc1084",null),d=c.exports},83630:function(a,e,t){"use strict";t.r(e);var i=t(87537),n=t.n(i),s=t(23645),o=t.n(s),r=o()(n());r.push([a.id,".jus-drag-area[data-v-23cc1084]{position:relative;height:100%}.jus-drag-area .jus-drag-area__mask[data-v-23cc1084]{display:none;cursor:pointer}.jus-drag-area .jus-drag-area__input-file[data-v-23cc1084]{display:none}.jus-drag-area.jus-drag-area--dragging .jus-drag-area__mask[data-v-23cc1084]{align-items:center;display:flex;height:100%;justify-content:center;left:0;position:absolute;top:0;z-index:2;width:100%}.jus-drag-area.jus-drag-area--dragging .jus-drag-area__mask .jus-drag-area__mask-action[data-v-23cc1084]{height:100%;left:0;position:absolute;top:0;width:100%}.attachment-dialog .el-dialog__body .attachment-dialog__container[data-v-23cc1084]{display:flex;flex-direction:column;gap:24px}.attachment-dialog .el-dialog__body .attachment-dialog__container .attachment-dialog__container-check[data-v-23cc1084]{display:flex;gap:16px}","",{version:3,sources:["webpack://./src/components/JusDragArea/JusDragArea.vue"],names:[],mappings:"AAGA,gCACE,iBAAA,CACA,WAAA,CAEA,qDACE,YAAA,CACA,cAAA,CAGF,2DACE,YAAA,CAKA,6EACE,kBAAA,CACA,YAAA,CACA,WAAA,CACA,sBAAA,CACA,MAAA,CACA,iBAAA,CACA,KAAA,CACA,SAAA,CACA,UAAA,CAEA,yGACE,WAAA,CACA,MAAA,CACA,iBAAA,CACA,KAAA,CACA,UAAA,CAQJ,mFACE,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,uHACE,YAAA,CACA,QAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.jus-drag-area {\n  position: relative;\n  height: 100%;\n\n  .jus-drag-area__mask {\n    display: none;\n    cursor: pointer;\n  }\n\n  .jus-drag-area__input-file {\n    display: none;\n  }\n\n  &.jus-drag-area--dragging {\n\n    .jus-drag-area__mask {\n      align-items: center;\n      display: flex;\n      height: 100%;\n      justify-content: center;\n      left: 0;\n      position: absolute;\n      top: 0;\n      z-index: 2;\n      width: 100%;\n\n      .jus-drag-area__mask-action {\n        height: 100%;\n        left: 0;\n        position: absolute;\n        top: 0;\n        width: 100%;\n      }\n    }\n  }\n}\n\n.attachment-dialog {\n  .el-dialog__body {\n    .attachment-dialog__container {\n      display: flex;\n      flex-direction: column;\n      gap: 24px;\n\n      .attachment-dialog__container-check {\n        display: flex;\n        gap: 16px;\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),e["default"]=r},64126:function(a,e,t){"use strict";t.r(e);var i=t(87537),n=t.n(i),s=t(23645),o=t.n(s),r=o()(n());r.push([a.id,".attachment-dialog__container-check .el-switch.inactive .el-switch__core:after{margin:0;left:1px}.attachment-dialog__container-check .el-switch.active .el-switch__core:after{left:20px}","",{version:3,sources:["webpack://./src/components/JusDragArea/JusDragArea.vue"],names:[],mappings:"AAIM,+EACE,QAAA,CACA,QAAA,CAKF,6EACE,SAAA",sourcesContent:["\n.attachment-dialog__container-check {\n  .el-switch {\n    &.inactive {\n      .el-switch__core::after {\n        margin: 0;\n        left: 1px;\n      }\n    }\n\n    &.active {\n      .el-switch__core::after {\n        left: 20px;\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),e["default"]=r},8652:function(a,e,t){var i=t(83630);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[a.id,i,""]]),i.locals&&(a.exports=i.locals);var n=t(39185).Z;n("193bc929",i,!0,{sourceMap:!0,shadowMode:!1})},46041:function(a,e,t){var i=t(64126);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[a.id,i,""]]),i.locals&&(a.exports=i.locals);var n=t(39185).Z;n("570f49b3",i,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=4226.js.map