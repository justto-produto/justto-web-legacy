(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[4613],{34613:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return A}});var a=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"contracts-modal",attrs:{visible:t.isFormVisible,title:`Contratos de ${t.form.customerName}`,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(e){t.isFormVisible=e}}},[e("article",{staticClass:"contracts-cards-container"},[t.filteredContracts.length?e("el-collapse",{model:{value:t.contractsVisibleList,callback:function(e){t.contractsVisibleList=e},expression:"contractsVisibleList"}},t._l(t.filteredContracts,(function(o,a){return e("el-collapse-item",{key:`contract#${a}`,ref:`contract#${a}`,refInFor:!0,staticClass:"contract-card__container",attrs:{name:`contract#${a}`}},[e("div",{staticClass:"contract-card__title",attrs:{slot:"title"},slot:"title"},[e("h4",[e("span",[t._v(" Contrato de "+t._s(t.form.customerName)+" "+t._s(t._f("moment")(o.startedDate,"L"))+" ")]),o.workspaceId?e("el-tag",{attrs:{size:"mini"}},[t._v(" exclusivo ")]):t._e()],1),e("h4",[t._v(" com mensalidade de "+t._s(t._f("currency")(t.cusomersMap[t.form.customerId].monthlySubscriptionFee))+" ")])]),e("div",{staticClass:"contract-card__data"},[e("EditContractForm",{attrs:{plans:t.plans,customer:t.form,contract:o}}),e("EditTariffsForm",{attrs:{contract:o,customer:t.form}}),"VOLUMETRY"===o.tariffType?e("EditDiscountsForm",{attrs:{contract:o,customer:t.form}}):t._e(),o.id?t._e():e("div",{staticClass:"remove-contract__btn"},[e("el-tooltip",{attrs:{content:"Remover contrato não salvo."}},[e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",circle:""},on:{click:t.handleRemoveUnsavedContract}})],1)],1)],1)])})),1):t._e(),e("div",{staticClass:"new-contract__action"},[e("el-button",{attrs:{type:"primary",disabled:t.haveUnsavedContracts},on:{click:t.handleCreateNewContract}},[t._v(" Adicionar contrato ")])],1)],1)])},n=[],i=(o(57658),o(66592)),r=o(90408),c={name:"ContractsCardsModal",components:{EditContractForm:()=>o.e(8951).then(o.bind(o,28951)),EditTariffsForm:()=>o.e(528).then(o.bind(o,4884)),EditDiscountsForm:()=>o.e(7233).then(o.bind(o,7233))},props:{plans:{type:Array,default:()=>[]},visible:{type:Boolean,default:!1}},data(){return{form:{},isFormVisible:!1,tariffTypes:i.GS,franchiseTariffTypes:i.S7,allFilteredContracts:{},saving:!1,contractsVisibleList:[]}},computed:{...(0,r.Se)({clientData:"getCurrentCustomer",workspaceId:"currentWorkspace",contractDiscountList:"contractDiscountList",cusomersMap:"cusomersMappedById"}),contractStatus:t=>t.$t("billing.contract.status"),filteredContracts(){const t=this.form.contracts.filter((t=>t.status===i.Gn.ACTIVE.key||t.status===i.Gn.INACTIVE.key)),e=(t.length?t:this.form.contracts).map((t=>({...t,flags:this.getFlags(t),customTitle:this.makeContractName(t)})));return this.changeAllFilteredContracts(e),e},haveContracts(){return this.filteredContracts.length>0},contractTariffByKey(){return(t,e)=>(t.tariffs||[]).find((({type:t})=>t===e))||{type:e,value:0,volumeLimit:0}},haveUnsavedContracts(){return this.filteredContracts.filter((({id:t})=>!t)).length>0}},watch:{clientData(t){this.form=t},visible(t){this.isFormVisible=!0}},beforeMount(){this.form=this.clientData},methods:{changeAllFilteredContracts(t){this.allFilteredContracts=t},makeContractName(t){return`Contrato #${t.id} - ${t.startedDate}`},getFlags(t){const e=[];return t.workspaceId===this.workspaceId&&e.push({label:"Exclusivo desta Workspace",theme:"info"}),t.status===i.Gn.INACTIVE.key&&e.push({...i.Gn.INACTIVE,theme:"danger"}),e},handleCreateNewContract(){const t=`contract#${this.filteredContracts.length}`;this.form.contracts.push({status:i.Gn.ACTIVE.key}),this.contractsVisibleList.push(t)},handleRemoveUnsavedContract(){const t=this.form.contracts.findIndex((({id:t})=>!t));t<0||this.$delete(this.form.contracts,t)}}},l=c,s=(o(41116),o(1001)),d=(0,s.Z)(l,a,n,!1,null,null,null),A=d.exports},9324:function(t,e,o){"use strict";o.r(e);var a=o(87537),n=o.n(a),i=o(23645),r=o.n(i),c=r()(n());c.push([t.id,'.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse{display:flex;flex-direction:column;gap:8px}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container{width:100%;flex:1!important;border:2px solid #d3d3d3!important;border-radius:8px!important;position:relative}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tab] div[role=button].el-collapse-item__header .contract-card__title{width:100%}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tab] div[role=button].el-collapse-item__header .contract-card__title h4{line-height:2rem;margin:0;font-weight:600}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tab] div[role=button].el-collapse-item__header .contract-card__title h4+h4{font-weight:400;text-indent:.5rem;line-height:1.5rem}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content{padding:0}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data{display:flex;flex-direction:column;gap:16px}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .el-descriptions .el-descriptions__header{margin:0}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .el-descriptions .el-descriptions__body{padding-left:.5rem}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .el-descriptions .el-descriptions__body .el-descriptions__table tbody .el-descriptions-row .el-descriptions-item{padding:0}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .el-descriptions .el-descriptions__body .el-descriptions__table tbody .el-descriptions-row .el-descriptions-item .el-descriptions-item__container .el-descriptions-item__label{margin:0}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .el-descriptions .el-descriptions__body .el-descriptions__table tbody .el-descriptions-row .el-descriptions-item .el-descriptions-item__container .el-descriptions-item__label:after{content:" "}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .remove-contract__btn{position:absolute;right:0;top:0;bottom:0;z-index:10;margin:4px}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container div[role=tablist].el-collapse .el-collapse-item.contract-card__container div[role=tabpanel] .el-collapse-item__content .contract-card__data .remove-contract__btn .el-button{z-index:10}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container .contract-card__container{padding:8px;display:flex;flex-direction:column;gap:16px}.contracts-modal div[role=dialog] .el-dialog__body .contracts-cards-container .new-contract__action{padding:8px;display:flex;flex:1;flex-direction:column;gap:16px}',"",{version:3,sources:["webpack://./src/views/main/billing/partials/ContractsCardsModal.vue"],names:[],mappings:"AAAA,4GAOQ,YACE,CAAA,qBACA,CAAA,OACA,CAAA,uJAEA,UACE,CAAA,gBACA,CAAA,kCACA,CAAA,2BACA,CAAA,iBACA,CAAA,qOAII,UACE,CAAA,wOAEA,gBACE,CAAA,QACA,CAAA,eACA,CAAA,2OAGF,eACE,CAAA,iBACA,CAAA,kBACA,CAAA,qMAON,SACE,CAAA,0NAEA,YACE,CAAA,qBACA,CAAA,QACA,CAAA,oQAGE,QAAA,CAAA,kQAEA,kBACE,CAAA,2UAKM,SACE,CAAA,yYAGE,QACE,CAAA,+YAEA,WACE,CAAA,gPAWlB,iBACE,CAAA,OACA,CAAA,KACA,CAAA,QACA,CAAA,UACA,CAAA,UACA,CAAA,2PAEA,UACE,CAAA,wGASd,WACE,CAAA,YACA,CAAA,qBACA,CAAA,QACA,CAAA,oGAGF,WACE,CAAA,YACA,CAAA,MACA,CAAA,qBACA,CAAA,QACA",sourcesContent:['\n@import \'~projuris-acordos-theme/src/common/colors.scss\';\n\n.contracts-modal {\n  div[role="dialog"] {\n    .el-dialog__body {\n      .contracts-cards-container {\n        div[role="tablist"].el-collapse {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n\n          .el-collapse-item.contract-card__container {\n            width: 100%;\n            flex: 1 !important;\n            border: solid lightgray 2px !important;\n            border-radius: 8px !important;\n            position: relative;\n\n            div[role="tab"] {\n              div[role="button"].el-collapse-item__header {\n                .contract-card__title {\n                  width: 100%;\n\n                  h4 {\n                    line-height: 2rem;\n                    margin: 0;\n                    font-weight: 600;\n                  }\n\n                  h4 + h4 {\n                    font-weight: normal;\n                    text-indent: 0.5rem;\n                    line-height: 1.5rem;\n                  }\n                }\n              }\n            }\n\n            div[role="tabpanel"] {\n              .el-collapse-item__content {\n                padding: 0;\n\n                .contract-card__data {\n                  display: flex;\n                  flex-direction: column;\n                  gap: 16px;\n\n                  .el-descriptions {\n                    .el-descriptions__header { margin: 0; }\n\n                    .el-descriptions__body {\n                      padding-left: 0.5rem;\n\n                      .el-descriptions__table {\n                        tbody {\n                          .el-descriptions-row {\n                            .el-descriptions-item {\n                              padding: 0;\n\n                              .el-descriptions-item__container {\n                                .el-descriptions-item__label {\n                                  margin: 0;\n\n                                  &::after {\n                                    content: \'\\00a0\';\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n\n                  .remove-contract__btn {\n                    position: absolute;\n                    right: 0;\n                    top: 0;\n                    bottom: 0;\n                    z-index: 10;\n                    margin: 4px;\n\n                    .el-button {\n                      z-index: 10;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        .contract-card__container {\n          padding: 8px;\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n\n        .new-contract__action {\n          padding: 8px;\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          gap: 16px;\n        }\n      }\n    }\n  }\n}\n'],sourceRoot:""}]),e["default"]=c},41116:function(t,e,o){var a=o(9324);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var n=o(39185).Z;n("24d76514",a,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=4613.js.map