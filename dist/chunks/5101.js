(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[5101],{55101:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return f}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"last-interactions-table"},[e.data.getDisputeHasLastOutboundInteraction?t("el-popover",{attrs:{trigger:"hover","popper-class":"el-popover--dark"},on:{show:function(t){return e.getMessageSummaryHandler(e.data.getDisputeLastOutboundInteractionMessage,e.data.getDisputeId)},hide:function(t){e.messageSummary={}}}},[t("div",[e.data.getDisputeHasLastOutboundInteraction?t("strong",[t("jus-icon",{attrs:{icon:e.getInteractionIcon(e.data.getDisputeLastOutboundInteraction),"is-white":""}}),e._v(" Último "+e._s(e.getLastInteractionTooltip(e.data.getDisputeLastOutboundInteraction))+" em "+e._s(e._f("moment")(e.data.getDisputeLastOutboundInteractionCreateAt,"DD/MM/YYYY [às] HH:mm"))+" ")],1):e._e()]),e.data.getDisputeLastOutboundInteractionMessage.sender?t("div",[e._v(" De: "+e._s(e._f("phoneNumber")(e.data.getDisputeLastOutboundInteractionMessage.sender))+" ")]):e._e(),e.data.getDisputeLastOutboundInteractionMessage.receiver?t("div",[e._v(" Para: "+e._s(e._f("phoneNumber")(e.data.getDisputeLastOutboundInteractionMessage.receiver))+" ")]):e._e(),e.data.getDisputeLastOutboundInteractionMessage.parameters.READ_DATE&&Object.keys(e.messageSummary).length?t("span",[null!==e.messageSummary.countVisualization?t("div",[e._v(" Total de visualizações: "+e._s(e.messageSummary.countVisualization)+" ")]):e._e(),null!==e.messageSummary.countClick?t("div",[e._v(" Total de clicks: "+e._s(e.messageSummary.countClick)+" ")]):e._e(),null!==e.messageSummary.firstVisualizationDate?t("div",[e._v(" Primeira visualização: "+e._s(e._f("moment")(e.messageSummary.firstVisualizationDate.dateTime,"DD/MM/YYYY [às] HH:mm"))+" ")]):e._e(),null!==e.messageSummary.lastVisualizationDate?t("div",[e._v(" Última visualização: "+e._s(e._f("moment")(e.messageSummary.lastVisualizationDate.dateTime,"DD/MM/YYYY [às] HH:mm"))+" ")]):e._e(),null!==e.messageSummary.firstClickDate?t("div",[e._v(" Primeiro click: "+e._s(e._f("moment")(e.messageSummary.firstClickDate.dateTime,"DD/MM/YYYY [às] HH:mm"))+" ")]):e._e(),null!==e.messageSummary.lastClickDate?t("div",[e._v(" Último click: "+e._s(e._f("moment")(e.messageSummary.lastClickDate.dateTime,"DD/MM/YYYY [às] HH:mm"))+" ")]):e._e()]):e._e(),t("jus-icon",{attrs:{slot:"reference",icon:"status-"+(e.data.getDisputeLastOutboundInteractionMessage.parameters.READ_DATE?"readed":"sent")},slot:"reference"})],1):e._e(),t("el-tooltip",[t("div",{attrs:{slot:"content"},slot:"content"},[t("negotiator-interaction",{attrs:{value:e.data,"dialog-visibility":e.canShowDialogReplyEditor},on:{"update:dialogVisibility":function(t){e.canShowDialogReplyEditor=t},"update:dialog-visibility":function(t){e.canShowDialogReplyEditor=t}}},[t("div",{attrs:{slot:"condition"},slot:"condition"},[e.data.getDisputeHasLastNegotiatorAccess?t("span",[t("span",[e._v(" Último acesso ao sistema ProJuris: "),t("strong",[e._v(e._s(e._f("moment")(e.data.getDisputeLastNegotiatorAccessCreatAt,"DD/MM/YYYY [às] HH:mm")))])])]):t("span",[e._v(" Ainda não houve acesso ao sistema ProJuris de Negociação ")])])])],1),t("jus-icon",{attrs:{"is-active":e.data.getDisputeHasLastNegotiatorAccess,icon:"justto-access"}})],1),e.data.getDisputeHasLastReceivedMessage?t("el-popover",{attrs:{trigger:"hover","popper-class":"el-popover--dark"},on:{"after-enter":function(t){return e.startResponseBox(e.data.getDisputeId)},hide:function(t){return e.hideResponseBox(e.data.getDisputeId)}}},[t("div",[t("div",[e.data.getDisputeHasLastReceivedMessage?t("strong",[t("jus-icon",{attrs:{icon:e.getInteractionIcon(e.data.getDisputeLastReceivedMessage),"is-white":""}}),e._v(" "+e._s(e.getLastInteractionTooltip(e.data.getDisputeLastReceivedMessage))+" recebido em "+e._s(e._f("moment")(e.data.getDisputeLastReceivedMessage.createAt.dateTime,"DD/MM/YYYY [às] HH:mm"))+" ")],1):e._e()]),e.data.getDisputeLastReceivedMessageHasSender?t("div",[e._v(" De: "+e._s(e._f("phoneNumber")(e.data.getDisputeLastReceivedMessageSender))+" ")]):e._e(),e.data.getDisputeLastReceivedMessageHasResume?t("div",{staticClass:"last-interactions-table__last-recived-message-tooltip",domProps:{innerHTML:e._s(`Resumo: ${e.data.getDisputeLastReceivedMessageResume}${e.data.getDisputeLastReceivedMessageResume.length>=140?"...":""}`)}}):e._e(),t("div",{staticClass:"position-relative",staticStyle:{width:"100%","text-align":"right","min-width":"300px"}},[e.responseBoxVisible?t("div",[t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-top-right"},on:{click:function(t){return e.openResponseDialog(e.data)}}},[e._v(" Expandir ")]),t("el-input",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"textarea",rows:"4",placeholder:"Escreva alguma coisa"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.hideResponseBox(e.data.getDisputeId,!0)}}},[e._v(" Cancelar ")]),t("el-button",{attrs:{size:"mini",icon:"el-icon-s-promotion"},on:{click:function(t){return e.sendMessage(e.data)}}},[e._v(" Enviar ")])],1):t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini",icon:"el-icon-s-promotion"},on:{click:function(t){return e.showResponseBox()}}},[e._v(" Responder ")])],1)]),t("span",{attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"position-relative"},[e.data.getDisputeHasLastReceivedMessage?t("jus-icon",{attrs:{icon:e.getInteractionIcon(e.data.getDisputeLastReceivedMessage)}}):e._e(),e.data.getDisputeVisualized?e._e():t("i",{staticClass:"last-interactions-table__interaction-pulse el-icon-warning el-icon-pulse el-icon-primary"})],1)])]):e._e(),e.data.getDisputeHasLastInteraction?t("div",[e._v(" "+e._s(e.getLastInteraction(e.data.getDisputeLastInteractionCreateAt))+" ")]):e._e(),t("el-dialog",{staticClass:"last-interactions-table__response-dialog",attrs:{visible:e.responseDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,title:`Resposta ao processo ${e.responseRow.getDisputeCode}`,"append-to-body":"","modal-append-to-body":""},on:{"update:visible":function(t){e.responseDialogVisible=t}}},[Object.keys(e.responseRow).length?t("div",[t("div",[e._v(" Negociável até "),t("b",[e._v(e._s(e._f("moment")(e.responseRow.getDisputeExpirationDate.dateTime,"DD/MM/YY")))]),e._v(". ")]),t("div",[e._v(" "+e._s(e.$tc("UPPER_RANGE",e.isRecoveryStrategy))+" é de "),t("b",[e._v(e._s(e._f("currency")(e.responseRow.getDisputeUpperRange)))])]),t("div",[e._v(" Última proposta foi de "),t("b",[e._v(e._s(e._f("currency")(e.responseRow.getDisputeLastOfferValue)))])]),e.responseRow.getDisputeLastCounterOfferValue?t("div",[e._v(" Contra proposta de "),t("b",[e._v(e._s(e._f("currency")(e.responseRow.getDisputeLastCounterOfferValue)))])]):t("div",[t("b",[e._v("Ainda não houve contraproposta")])]),t("br"),t("div",[e._v(" Resposta via: "),t("jus-icon",{attrs:{icon:e.answerVia}}),t("b",[e._v(e._s(e._f("capitalize")(e.answerVia)))])],1),t("div",[e._v(" Destinatário: "),t("b",[e._v(e._s(e._f("phoneNumber")(e.responseRow?.getDisputeLastReceivedMessageSender??"")))])]),e.responseDialogVisible?t("quill-editor",{directives:[{name:"loading",rawName:"v-loading",value:e.responseBoxLoading,expression:"responseBoxLoading"}],ref:"messageEditor",class:{"show-toolbar":"email"===e.answerIcon},attrs:{options:e.editorOptions},model:{value:e.richMessage,callback:function(t){e.richMessage=t},expression:"richMessage"}}):e._e()],1):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{disabled:e.responseBoxLoading,plain:""},on:{click:function(t){e.responseDialogVisible=!1}}},[e._v(" Cancelar ")]),t("el-button",{attrs:{loading:e.responseBoxLoading,type:"primary",icon:"el-icon-s-promotion"},on:{click:function(t){return e.sendMessage(e.responseRow)}}},[e._v(" Enviar ")])],1)]),t("negotiator-activeReply",{attrs:{dispute:e.data},on:{close:function(t){e.canShowDialogReplyEditor=!1}},model:{value:e.canShowDialogReplyEditor,callback:function(t){e.canShowDialogReplyEditor=t},expression:"canShowDialogReplyEditor"}})],1)},a=[],i=o(90408),r=o(40917),n=o(56547),l=(o(94034),o(60171),o(14814),o(36431)),c=o.n(l);const d=c()["import"]("attributors/style/size"),u=c()["import"]("attributors/style/align");c().register(u,!0),c().register(d,!0);var p={name:"ManagementLasrInteractions",components:{quillEditor:n.quillEditor,NegotiatorInteraction:()=>o.e(4200).then(o.bind(o,64200)),NegotiatorActiveReply:()=>o.e(2597).then(o.bind(o,12597))},props:{data:{type:Object,required:!0}},data(){return{message:"",messageCache:{},messageSummary:{},responseRow:{},responseBoxVisible:!1,responseBoxLoading:!1,responseDialogVisible:!1,canShowDialogReplyEditor:!1,richMessage:"",replyMessage:""}},computed:{...(0,i.Se)({isRecoveryStrategy:"isWorkspaceRecovery",getMessageResumeByDisputeId:"getMessageResumeByDisputeId"}),editorOptions(){return{placeholder:"Escreva alguma coisa",modules:{toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["blockquote"],["clean"]]}}},answerVia(){return(this.responseRow?.getDisputeLastReceivedMessage?.message?.communicationType??"").toLowerCase()}},methods:{...(0,i.nv)(["getMessageSummary"]),getMessageSummaryHandler(e,t){if(e?.parameters?.READ_DATE){const o=this.getMessageResumeByDisputeId(t);o?this.messageSummary=o.resume:this.getMessageSummary(e.messageId).then((e=>{this.$store.commit("addMessageResume",{resume:e,disputeId:t}),this.messageSummary=e}))}},getInteractionIcon:r.MQ,getLastInteraction:r.wm,getLastInteractionTooltip:r.RI,startResponseBox(e){this.message="",this.messageCache[e]&&(this.message=this.messageCache[e],this.responseBoxVisible=!0)},showResponseBox(){this.responseBoxVisible=!0},hideResponseBox(e,t=!1){t?delete this.messageCache[e]:this.message&&(this.messageCache[e]=this.message),this.message="",this.responseBoxVisible=!1},openResponseDialog(e){this.responseRow=e,this.$nextTick().then((e=>{this.responseDialogVisible=!0,this.richMessage=this.message+""}))},sendMessage(e){if(this.message.trim().replace("\n","")||this.richMessage.trim().replace("\n","")){const t=this.richMessage?this.richMessage:this.message;this.responseBoxLoading=!0,this.$emit("update:responseBoxLoading",!0),this.$store.dispatch("send"+e.getDisputeLastReceivedMessage.message.communicationType.toLowerCase(),{to:[{address:e.getDisputeLastReceivedMessageSender}],message:t,disputeId:e.getDisputeId}).then((()=>{this.message="",this.richMessage="",this.responseDialogVisible=!1,delete this.messageCache[e.getDisputeId],this.$jusNotification({title:"Yay!",message:"Mensagem enviada com sucesso.",type:"success"})})).catch((e=>{this.$jusNotification({error:e})})).finally((()=>{this.responseBoxLoading=!1,this.$emit("update:responseBoxLoading",!1)}))}}}},g=p,m=(o(66977),o(1001)),h=(0,m.Z)(g,s,a,!1,null,null,null),f=h.exports},14857:function(e,t,o){"use strict";o.r(t);var s=o(87537),a=o.n(s),i=o(23645),r=o.n(i),n=r()(a());n.push([e.id,".last-interactions-table .last-interactions-table__interaction-pulse{position:absolute;font-size:14px;bottom:-5px;right:-3px}.last-interactions-table__response-dialog .quill-editor{margin-top:8px;background-color:#eaeaed;padding:0 10px;box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);min-height:300px;height:30vh}.last-interactions-table__response-dialog .quill-editor.show-toolbar .ql-toolbar{display:inherit!important}.last-interactions-table__response-dialog img{width:14px;margin:0 4px 0 2px}.last-interactions-table__last-recived-message-tooltip{display:flex;word-break:break-word;max-width:400px}.follow-up-button.follow-up-tooltip{color:#018ef0;font-weight:700}","",{version:3,sources:["webpack://./src/views/main/management/partials/ManagementLastInteraction.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAIE,qEACE,iBAAA,CACA,cAAA,CACA,WAAA,CACA,UAAA,CAKF,wDACE,cAAA,CACA,wBAAA,CACA,cAAA,CACA,4DAAA,CACA,gBAAA,CACA,WAAA,CACA,iFACE,yBAAA,CAGJ,8CACE,UAAA,CACA,kBAAA,CAIJ,uDACE,YAAA,CACA,qBAAA,CACA,eAAA,CAGF,oCACE,aCxBsB,CDyBtB,eAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.last-interactions-table {\n  .last-interactions-table__interaction-pulse {\n    position: absolute;\n    font-size: 14px;\n    bottom: -5px;\n    right: -3px;\n  }\n}\n\n.last-interactions-table__response-dialog {\n  .quill-editor {\n    margin-top: 8px;\n    background-color: #eaeaed;\n    padding: 0 10px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\n    min-height: 300px;\n    height: 30vh;\n    &.show-toolbar .ql-toolbar {\n      display: inherit !important;\n    }\n  }\n  img {\n    width: 14px;\n    margin: 0 4px 0 2px;\n  }\n}\n\n.last-interactions-table__last-recived-message-tooltip {\n  display: flex;\n  word-break: break-word;\n  max-width: 400px;\n}\n\n.follow-up-button.follow-up-tooltip {\n  color: $--color-secondary;\n  font-weight: bold;\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),t["default"]=n},66977:function(e,t,o){var s=o(14857);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=o(39185).Z;a("0d196b4b",s,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=5101.js.map