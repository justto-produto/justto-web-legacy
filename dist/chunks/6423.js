(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[6423],{96423:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var n=function(){var e=this,r=e._self._c;return e.isGrouping?r("article",[r("Summary",{attrs:{value:e.occurrence}})],1):r("section",{staticClass:"summary-container"},e._l(e.renderItems,(function(t,n){return r("div",{key:`summary-item-${n}`,staticClass:"summary-container__item",attrs:{id:`summary-item-${n}`}},[r("span",{staticClass:"summary-container__item-header"},[e._v(" "+e._s(t.count)+" "+e._s(t.type)+" para "+e._s(t.personName)+" ")]),e._l(e.summarys[t.type],(function(c,o){return r("span",{key:`summary-occurrence-item-${o}`,staticClass:"summary-container__item-occurrence-item"},[r("span",{staticClass:"summary-container__item-occurrence-item-title"},[e._v(" Mensagem "+e._s(o+1)+" do agendamento ")]),r("Scheduler",{staticClass:"summary-container__item-occurrence-item-body",class:{"is-full":e.isInFullMessages(c.summaryOccurrence.messageId)},attrs:{value:c.occurrence.interaction,occurrence:c.occurrence,"hidden-contact-info":"","hidden-send-status":""}}),r("div",{staticClass:"summary-container__item-occurrence-item-status"},[r("span",{staticClass:"summary-container__item-occurrence-item-status-message"},[r("i",{staticClass:"el-icon-edit"}),r("span",{staticClass:"summary-container__item-occurrence-item-status-message-body"},[r("span",{staticClass:"summary-container__item-occurrence-item-status-message-body-normal"},[e._v(" Mensagem criada em aqui ")]),r("span",{staticClass:"summary-container__item-occurrence-item-status-message-body-date"},[e._v(" "+e._s(e._f("moment")(c.summaryOccurrence.createAt.dateTime,"DD/MM [às] HH:mm"))+" ")])])]),e._l(c.summaryOccurrence.messagesStatus||[],(function(c,o){return r("span",{key:`message-status-${o}`,staticClass:"summary-container__item-occurrence-item-status-message"},[r("i",{class:e._f("getIconByStatus")(c.status)}),r("span",{staticClass:"summary-container__item-occurrence-item-status-message-body"},[r("span",{domProps:{innerHTML:e._s(e.buildMessage(c,t.type,n))}})])])}))],2),r("el-divider",{staticClass:"summary-container__item-occurrence-item-divider"})],1)}))],2)})),0)},c=[],o=t(90408);class i{constructor({type:e,count:r,personName:t,disputeRoleId:n}){this.type=e,this.count=r,this.personName=t,this.disputeRoleId=n}get getType(){return this.type}}class a{constructor({communicationType:e,createdBy:r,messageId:t,resume:n,status:c,sender:o,receiver:i}){this.sender=o,this.status=c,this.resume=n,this.receiver=i,this.createdBy=r,this.messageId=t,this.communicationType=e}get getMessageId(){return this.messageId}}class s{constructor({createAt:e,updateAt:r,type:t,properties:n,message:c}){this.type=t,this.createAt=e,this.updateAt=r,this.properties=n,this.message=c?new a(c):null}get messageId(){return this.message?.messageId||(new Date).toISOString()}get messageStatus(){return this.message?.status||"WAITING"}get messageReceiver(){return this.message.receiver||"nao@definido.com"}}class m{constructor({createAt:e,updateAt:r,interaction:t,description:n,disputeId:c,properties:o,type:i}){this.type=i,this.createAt=e,this.updateAt=r,this.disputeId=c,this.properties=o,this.description=n||"",this.interaction=t?new s(t):null}get messageId(){return this.interaction.messageId}get groupedOccurrences(){return JSON.parse((this.properties.GROUPED_OCCURRENCES||"[]").replace(/'/g,'"'))}get messageReceiver(){return this.interaction.messageReceiver}get messagesStatus(){return[{receiver:this.messageReceiver,status:this.interaction.messageStatus,date:this.createAt.dateTime},...this.groupedOccurrences]}}var u={components:{Scheduler:()=>t.e(3892).then(t.bind(t,43892)),Summary:()=>t.e(5950).then(t.bind(t,55950))},filters:{getIconByStatus(e){switch(e){case"WAITING":return"el-icon-timer";case"PROCESSED":case"PROCESSED_BY_USER":return"el-icon-check";case"RETRYING":return"el-icon-refresh";default:return"el-icon-close"}}},props:{occurrence:{type:Object,required:!0},summary:{type:Object,required:!0}},data:()=>({communicationTypes:["EMAIL","WHATSAPP","SMS"]}),computed:{...(0,o.Se)({fullMessages:"getFullMessages",summaryKeys:"getOccurrencesSummaryKeys",summaryOccurrences:"getOccurrencesSummary",userConfigs:"userProperties"}),renderItems(){return[...this.summary.email>0?[new i({type:"email",count:this.summary.email,...this.summary})]:[],...this.summary.whatsApp>0?[new i({type:"whatsApp",count:this.summary.whatsApp,...this.summary})]:[],...this.summary.sms>0?[new i({type:"sms",count:this.summary.sms,...this.summary})]:[]]},summarys(){return{email:(this.summaryOccurrences.EMAIL[this.occurrence.id]||[]).map((e=>({occurrence:e,summaryOccurrence:new m(e)}))),whatsApp:(this.summaryOccurrences.WHATSAPP[this.occurrence.id]||[]).map((e=>({occurrence:e,summaryOccurrence:new m(e)}))),sms:(this.summaryOccurrences.SMS[this.occurrence.id]||[]).map((e=>({occurrence:e,summaryOccurrence:new m(e)})))}},isGrouping(){return"GROUPED"===this.userConfigs?.OMNICHANNEL_GROUPING_TYPE}},mounted(){this.communicationTypes.forEach((e=>{this.getOccurrences(e)}))},methods:{...(0,o.nv)(["getSummaryOccurrecies"]),buildMessage({status:e,date:r,receiver:t},n,c){const{phoneOrEmail:o,capitalize:i}=this.$options.filters,a=e=>this.$moment(e).format("DD/MM [às] HH:mm"),s=document.getElementById(`summary-item-${c}`)||{offsetWidth:0},m=s.offsetWidth<500?"<br/>":"";let u="";switch(e){case"WAITING":u=`${n} agendado para ${a(r)} para <b>${o(t)}</b>.`;break;case"PROCESSED":case"PROCESSED_BY_USER":u=`${n} enviado em ${a(r)} para <b>${o(t)}</b>.`;break;case"FAILED":u=`Falhou o envio para o ${n} <b>${o(t)}</b>${m} em ${a(r)}.`;break;case"CANCELED":u=`Envio de ${n} para <b>${o(t)}</b>${m} cancelado em ${a(r)}.`;break;case"RETRYING":u=`Estamos retentando enviar ${n} para <b>${o(t)}</b>.${m} O primeiro envio falhou em ${a(r)}.`;break;default:u=`${n} com status ${e}.`;break}return i(u)},getOccurrences(e){this.disputeId=this.$route.params.id,this.getSummaryOccurrecies({disputeId:this.disputeId,summaryRoleId:this.summary.disputeRoleId,communicationType:e,summaryOccurrenceId:this.occurrence.id})},stateOccurrence(e){return new m(e)},isInFullMessages(e){return Object.keys(this.fullMessages).map((e=>String(e))).includes(String(e))}}},l=u,d=(t(18570),t(1001)),A=(0,d.Z)(l,n,c,!1,null,null,null),y=A.exports},71891:function(e,r,t){"use strict";t.r(r);var n=t(87537),c=t.n(n),o=t(23645),i=t.n(o),a=i()(c());a.push([e.id,".summary-container{width:85%;margin-top:16px}.summary-container .summary-container__item{width:100%;border:3px solid #fff1c8;border-radius:10px;padding:0 16px 16px;display:flex;flex-direction:column;justify-content:center;align-items:center}.summary-container .summary-container__item .summary-container__item-header{background-color:#fff1c8;color:#424242;padding:8px;border-radius:10px;margin-top:-18px;margin-bottom:16px}.summary-container .summary-container__item .summary-container__item-occurrence-item{display:flex;flex-direction:column;align-items:center;gap:8px}.summary-container .summary-container__item .summary-container__item-occurrence-item:last-child .el-divider{display:none}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-title{color:#0756e4;font-weight:600}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-body{width:100%}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-body.is-full{width:85%;overflow-x:scroll;overflow-y:hidden}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status{display:flex;flex-direction:column;width:100%;align-items:flex-start;gap:4px;font-size:12px}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message{display:flex;gap:4px;justify-content:flex-start;align-items:flex-start}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message [class*=el-icon-]{margin-top:3px}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .el-icon-edit{font-weight:800;color:#bbb}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .el-icon-check{font-weight:800;color:#14cc30}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .el-icon-refresh,.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .el-icon-timer{font-weight:800;color:#ffc900}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .el-icon-close{color:#ff4b54;font-weight:800}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .summary-container__item-occurrence-item-status-message-body{color:#979797}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-status .summary-container__item-occurrence-item-status-message .summary-container__item-occurrence-item-status-message-body b{font-weight:400;color:#424242}.summary-container .summary-container__item .summary-container__item-occurrence-item .summary-container__item-occurrence-item-divider{height:3px;background-color:#fff1c8;width:80%}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/log/Summary.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAGA,mBACE,SAAA,CACA,eAAA,CAEA,4CACE,UAAA,CACA,wBAAA,CACA,kBAAA,CACA,mBAAA,CAEA,YAAA,CACA,qBAAA,CAEA,sBAAA,CACA,kBAAA,CAEA,4EACE,wBAAA,CACA,aCjBU,CDkBV,WAAA,CACA,kBAAA,CAEA,gBAAA,CACA,kBAAA,CAGF,qFACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,OAAA,CAGE,4GACE,YAAA,CAIJ,oIACE,aC9BU,CD+BV,eAAA,CAGF,mIACE,UAAA,CAEA,2IACE,SAAA,CACA,iBAAA,CACA,iBAAA,CAIJ,qIACE,YAAA,CACA,qBAAA,CACA,UAAA,CACA,sBAAA,CACA,OAAA,CACA,cAAA,CAEA,6LACE,YAAA,CACA,OAAA,CACA,0BAAA,CACA,sBAAA,CAEA,+MACE,cAAA,CAGF,2MACE,eAAA,CACA,UAAA,CAGF,4MACE,eAAA,CACA,aClCM,CDqCR,0ZAEE,eAAA,CACA,aCvCM,CD0CR,4MACE,aC1CK,CD2CL,eAAA,CAGF,0PACE,aC3FG,CD6FH,4PACE,eAAA,CACA,aChGE,CD+GV,sIACE,UAAA,CACA,wBAAA,CACA,SAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.summary-container {\n  width: 85%;\n  margin-top: 16px;\n\n  .summary-container__item {\n    width: 100%;\n    border: 3px solid #FFF1C8;\n    border-radius: 10px;\n    padding: 0 16px 16px;\n\n    display: flex;\n    flex-direction: column;\n\n    justify-content: center;\n    align-items: center;\n\n    .summary-container__item-header {\n      background-color: #FFF1C8;\n      color: $--color-black;\n      padding: 8px;\n      border-radius: 10px;\n\n      margin-top: -18px;\n      margin-bottom: 16px;\n    }\n\n    .summary-container__item-occurrence-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 8px;\n\n      &:last-child {\n        .el-divider {\n          display: none;\n        }\n      }\n\n      .summary-container__item-occurrence-item-title {\n        color: $--color-primary;\n        font-weight: 600;\n      }\n\n      .summary-container__item-occurrence-item-body {\n        width: 100%;\n\n        &.is-full {\n          width: 85%;\n          overflow-x: scroll;\n          overflow-y: hidden;\n        }\n      }\n\n      .summary-container__item-occurrence-item-status {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        align-items: flex-start;\n        gap: 4px;\n        font-size: 12px;\n\n        .summary-container__item-occurrence-item-status-message {\n          display: flex;\n          gap: 4px;\n          justify-content: flex-start;\n          align-items: flex-start;\n\n          [class*=\"el-icon-\"] {\n            margin-top: 3px;\n          }\n\n          .el-icon-edit {\n            font-weight: 800;\n            color: #BBBBBB;\n          }\n\n          .el-icon-check {\n            font-weight: 800;\n            color: $--color-success;\n          }\n\n          .el-icon-timer,\n          .el-icon-refresh {\n            font-weight: 800;\n            color: $--color-warning;\n          }\n\n          .el-icon-close {\n            color: $--color-danger;\n            font-weight: 800;\n          }\n\n          .summary-container__item-occurrence-item-status-message-body {\n            color: $--color-text-secondary;\n\n            b {\n              font-weight: normal;\n              color: $--color-text-primary;\n            }\n            /* .summary-container__item-occurrence-item-status-message-body-normal,\n            .summary-container__item-occurrence-item-status-message-body-status,\n            .summary-container__item-occurrence-item-status-message-body-date {\n              color: $--color-text-secondary;\n            }\n\n            .summary-container__item-occurrence-item-status-message-body-adress {\n              color: $--color-text-primary;\n            }*/\n          }\n        }\n      }\n\n      .summary-container__item-occurrence-item-divider {\n        height: 3px;\n        background-color: #FFF1C8;\n        width: 80%;\n      }\n    }\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),r["default"]=a},18570:function(e,r,t){var n=t(71891);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var c=t(39185).Z;c("96489750",n,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=6423.js.map