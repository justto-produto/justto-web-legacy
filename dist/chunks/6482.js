(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[6482],{76482:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("section",{staticClass:"notes-container jus-ckeditor__parent",attrs:{id:"notesTabEditorOmnichannelNegotiation"}},[t("el-button",{staticClass:"notes-container__marker-btn",attrs:{type:"primary",icon:"el-icon-document-add",size:"mini"}},[e._v(" NOTA ")]),t("ckeditor",{ref:"noteEditor",attrs:{editor:e.editor,config:e.editorConfig,type:"classic"},model:{value:e.body,callback:function(t){e.body=t},expression:"body"}}),t("span",{staticClass:"notes-container__button"},[t("el-button",{attrs:{type:"primary",size:"small",disabled:!e.enableButton},on:{click:e.send}},[e.localLoading?t("i",{staticClass:"el-icon-loading"}):t("span",[e._v("Salvar nota")])])],1)],1)},r=[],i=o(32715),a=o(40917),l=o(89985),c=o(90408),s={mixins:[l.Z],data:()=>({localLoading:!1,useMentionPlugin:!0,usePreviewPlugin:!1}),computed:{...(0,c.Se)({editorText:"getNoteEditorText"}),body:{get(){return this.editorText},set(e){this.setNoteEditorText(e)}},enableButton(){return!this.localLoading&&this.editorText.length}},beforeDestroy(){a.YB.$off(i["default"].EDITOR_FOCUS.callback,this.ckeditorFocus)},mounted(){a.YB.$on(i["default"].EDITOR_FOCUS.callback,this.ckeditorFocus)},methods:{...(0,c.nv)(["sendDisputeNote","setNoteEditorText"]),send(e){const{id:t}=this.$route.params;this.localLoading=!0,this.sendDisputeNote({disputeId:t,note:this.editorText}).then((()=>{this.$jusNotification({title:"Yay!",message:"Nota gravada com sucesso.",type:"success"}),this.body=""})).catch((e=>this.$jusNotification({error:e}))).finally((()=>{this.localLoading=!1}))}}},d=s,u=(o(95890),o(45869),o(1001)),m=(0,u.Z)(d,n,r,!1,null,"d133fae6",null),h=m.exports},89985:function(e,t,o){"use strict";o.d(t,{Z:function(){return I}});var n=o(61927),r=o(53083),i=o(82311),a=o(30418),l=o(16726),c=o(84687),s=o(75304),d=o(4434),u=o(93124),m=o(86537),h=o(98009),p=o(24697),f=o(28927),g=o(13264),$=o(95994),A=o(31789),b=o(92619),w=o(70756),x=o(97525),y=o(4424),C=o(35898),v=o(57759),k=o(97865),_=o(37259),E=o(40917);class F extends v.Z{constructor(e){super(e),this.editor=e,this.buttonView=null,this.createButton(),this.editor.ui.componentFactory.add("preview",(()=>this.buttonView))}createButton(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="18.409" height="18"><path data-name="RetÃ¢ngulo 67" fill="none" d="M.204 0h18v18h-18z"/><g data-name="Grupo 3101"><g data-name="Grupo 26"><path data-name="Caminho 253" d="M9.205 12.018a3.043 3.043 0 10-3.019-3.043 3.031 3.031 0 003.019 3.043z" fill="none" stroke="#000" stroke-width=".8"/><path data-name="Caminho 254" d="M9.204 10.745a1.839 1.839 0 10-1.781-1.838 1.814 1.814 0 001.781 1.838z" fill="#191919" fill-rule="evenodd"/><path data-name="Caminho 11629" d="M9.761 9.397a1.032 1.032 0 10-1-1.032 1.019 1.019 0 001 1.032z" fill="#fff" fill-rule="evenodd"/><path data-name="Caminho 255" d="M17.909 8.902a10.174 10.174 0 00-17.409 0 10.174 10.174 0 0017.409 0z" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/></g></g></svg>';this.buttonView=new k.Z,this.buttonView.set({label:"Visualizar Mensagem",icon:e,tooltip:!0}),this.buttonView.on("execute",(()=>{const e=Array(...document.querySelectorAll(".ck-content")).pop();if(e){const{getSelectedIds:t}=_["default"].getters,o=t.length?t[0]:Number(location.href.split("/").pop()),n=e.innerHTML;E.YB.$emit("SEE-PREVIEW",{template:n,disputeId:o})}}))}}class Z extends v.Z{constructor(e){super(e),this.editor=e,this.buttonView=null,this.createButton(),this.editor.ui.componentFactory.add("imageAttachment",(()=>this.buttonView))}createButton(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="18" style="margin-left: 10px !important;" height="18"><path data-name="Caminho 13974" d="M8.948 4.948a.611.611 0 10-1.222 0c0 .009.005.017.005.026V13.5a3.254 3.254 0 11-6.508 0V3.273a2.034 2.034 0 114.067 0v8.591a.813.813 0 11-1.626 0V4.942a.106.106 0 000-.017.611.611 0 10-1.222 0 .106.106 0 000 .017v6.922a2.034 2.034 0 104.068 0V3.273a3.254 3.254 0 11-6.508 0V13.5a4.474 4.474 0 108.948 0V4.974h-.005c-.002-.009.003-.017.003-.026z"/></svg>';this.buttonView=new k.Z,this.buttonView.set({label:"Inserir Imagem",icon:e,tooltip:!0,withText:!1}),this.buttonView.on("execute",(()=>_["default"].dispatch("toggleImageUploadDialog",!0)))}}class j extends v.Z{constructor(e){super(e),this.editor=e,this.registerConverters()}registerConverters(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"",key:"data-mention",classes:"",attributes:{href:!0,"data-user-id":!0}},model:{key:"mention",value:e=>{const t=this.editor.plugins.get("Mention").toMentionAttribute(e,{link:e.getAttribute("href"),userId:e.getAttribute("data-user-id")});return t}},converterPriority:"high"}),this.editor.conversion.for("downcast").attributeToElement({model:"mention",view:(e,{writer:t})=>{if(!e)return;const o="image"===e.type,n="memberMention"===e.type;return t.createAttributeElement(o?"img":n?"em":"span",{class:"justto-variable","data-mention":e.id,src:e.id,...n?{class:"justto-mention","account-id":e.accountId}:{}},{priority:20,id:e.uid})},converterPriority:"high"})}}var T=o(90408),I={data(){return{editor:n.Z}},computed:{...(0,T.Se)({variables:"getAvaliableVariablesToTemplate",members:"workspaceMembersByDispute"}),editorConfig(){return{plugins:[r.Z,i.Z,a.Z,l.Z,p.Z,f.Z,g.Z,c.Z,s.Z,d.Z,u.Z,m.Z,h.Z,$.Z,A.Z,b.Z,w.Z,...this.dontUseTablePlugin?[]:[y.Z,C.Z],...this.useImageAttachmentPlugin?[Z]:[],...this.useMentionPlugin?[x.Z,j]:[],...this.usePreviewPlugin?[F]:[]],mention:this.useMentionPlugin?{feeds:[{marker:"{",feed:this.getFeedItems,minimumCharacters:1,itemRenderer:this.customItemRenderer},{marker:"@",feed:this.getFeedPersonItems,minimumCharacters:0,itemRenderer:this.customMemberItemRenderer}]}:{},toolbar:{items:["bold","italic","underline","removeFormat","link","bulletedList","numberedList","|","insertTable","|","outdent","indent","|","blockQuote","undo","redo","imageStyle",...this.useImageAttachmentPlugin?["imageAttachment"]:[],...this.usePreviewPlugin?["preview"]:[]],viewportTopOffset:30,shouldNotGroupWhenFull:!0},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}},variablesList(){const e=[],t=[];return Object.keys(this.variables).map((o=>({id:`{{${o}}}`,name:`${this.variables[o]}`,type:e.includes(o)?"img":t.includes(o)?"link":"text"})))}},beforeMount(){this.getAvaliableVariablesToTemplate()},methods:{...(0,T.nv)(["getAvaliableVariablesToTemplate"]),setImgTag(e){this.$nextTick((()=>{const t=document.querySelector(".ck-editor__editable").ckeditorInstance;t.model.change((o=>{const n=o.createElement("image",{src:e});t.model.insertContent(n,t.model.document.selection)}))}))},customItemRenderer(e){return e.name},customMemberItemRenderer(e){return e.person?.name||e.accountEmail},getFeedItems(e){function t({name:t,id:o}){const n=(0,E.Ue)(e).replace(/{/g,"");return(0,E.Ue)(t).includes(n)||(0,E.Ue)(o).includes(n)}return this.variablesList.filter(t)},getFeedPersonItems(e){function t({name:t,person:o}){const n=(0,E.Ue)(e).replace(/{/g,"");return o?(0,E.Ue)(o.name).includes(n):(0,E.Ue)(t).includes(n)}return this.members.filter(t).map((e=>({...e,type:"memberMention",id:`@${this.customMemberItemRenderer(e)}`})))},ckeditorFocus(e){}}}},40581:function(e,t,o){"use strict";o.r(t);var n=o(87537),r=o.n(n),i=o(23645),a=o.n(i),l=a()(r());l.push([e.id,".notes-container[data-v-d133fae6]{padding:6px;display:flex;flex-direction:column}.notes-container .notes-container__editor[data-v-d133fae6]{margin:0}.notes-container .notes-container__button[data-v-d133fae6]{display:flex;justify-content:flex-end;margin-top:6px}@media(max-width:900px){.notes-container[data-v-d133fae6]{padding:0}.notes-container .notes-container__editor[data-v-d133fae6]{margin:6px}.notes-container .notes-container__button .el-button[data-v-d133fae6]{width:100%;border-radius:0}}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Notes.vue"],names:[],mappings:"AACA,kCACE,WAAA,CACA,YAAA,CACA,qBAAA,CAEA,2DACE,QAAA,CAGF,2DACE,YAAA,CACA,wBAAA,CACA,cAAA,CAIJ,wBACE,kCACE,SAAA,CAEA,2DACE,UAAA,CAIA,sEACE,UAAA,CACA,eAAA,CAAA",sourcesContent:["\n.notes-container {\n  padding: 6px;\n  display: flex;\n  flex-direction: column;\n\n  .notes-container__editor {\n    margin: 0px;\n  }\n\n  .notes-container__button {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 6px;\n  }\n}\n\n@media (max-width: 900px) {\n  .notes-container {\n    padding: 0;\n\n    .notes-container__editor {\n      margin: 6px;\n    }\n\n    .notes-container__button {\n      .el-button {\n        width: 100%;\n        border-radius: 0;\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),t["default"]=l},98854:function(e,t,o){"use strict";o.r(t);var n=o(87537),r=o.n(n),i=o(23645),a=o.n(i),l=a()(r());l.push([e.id,".notes-container .notes-container__marker-btn{padding:4px 8px;position:absolute;top:54px;left:16px;cursor:default;z-index:1}.notes-container .cke_top{border:none}.notes-container .cke.cke_chrome{border:2px solid #f4effe;border-radius:6px}.notes-container .ck.ck-content.ck-editor__editable{background-color:#f4effe!important;color:#0756e4;text-indent:80px}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Notes.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAIE,8CACE,eAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,cAAA,CACA,SAAA,CAGF,0BAAA,WAAA,CAEA,iCACE,wBAAA,CACA,iBAAA,CAKF,oDACE,kCAAA,CACA,aCZc,CDad,gBAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.notes-container {\n  .notes-container__marker-btn {\n    padding: 4px 8px;\n    position: absolute;\n    top: 54px;\n    left: 16px;\n    cursor: default;\n    z-index: 1;\n  }\n\n  .cke_top { border: none; }\n\n  .cke.cke_chrome {\n    border: 2px solid #F4EFFE;\n    border-radius: 6px;\n  }\n}\n\n.notes-container {\n  .ck.ck-content.ck-editor__editable {\n    background-color: #F4EFFE !important;\n    color: $--color-primary;\n    text-indent: 80px;\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),t["default"]=l},95890:function(e,t,o){var n=o(40581);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var r=o(39185).Z;r("1f080672",n,!0,{sourceMap:!0,shadowMode:!1})},45869:function(e,t,o){var n=o(98854);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var r=o(39185).Z;r("5acd4ffc",n,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=6482.js.map