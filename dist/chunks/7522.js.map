{"version":3,"file":"chunks/7522.js","mappings":"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","sources":["webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue","webpack://@projuris/justto-web/src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue?514e","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue?68ec","webpack://@projuris/justto-web/./src/plugins/ckeditor/preview.js","webpack://@projuris/justto-web/./src/plugins/ckeditor/imageAttachment.js","webpack://@projuris/justto-web/./src/plugins/ckeditor/mentionCustomization.js","webpack://@projuris/justto-web/./src/utils/mixins/ckeditor.js","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue?621d","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue?0b2c","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue?7ab1","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue?78f1"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.isInPreNegotiation && !_vm.isPaused && !_vm.isCanceled)?_c('section',{staticClass:\"messages-container jus-ckeditor__parent\",class:{\n    'email': _vm.messageType === 'email' && _vm.canColorEditor,\n    'whatsapp': _vm.messageType === 'whatsapp' && _vm.canColorEditor,\n    'negotiator': ['negotiator_message', 'negotiation'].includes(_vm.messageType) && _vm.canColorEditor\n  },attrs:{\"id\":\"messagesTabEditorOmnichannelNegotiation\"}},[(_vm.showCKEditor)?_c('ckeditor',{ref:\"messageEditor\",attrs:{\"editor\":_vm.editor,\"config\":_vm.editorConfig,\"type\":\"classic\"},model:{value:(_vm.body),callback:function ($$v) {_vm.body=$$v},expression:\"body\"}}):_c('el-input',{ref:\"messageEditorTextOnly\",attrs:{\"id\":\"messageEditorTextOnly\",\"value\":_vm.editorTextScaped,\"rows\":5,\"type\":\"textarea\",\"resize\":\"none\"},on:{\"input\":_vm.setEditorText}}),(_vm.messageType === 'email')?_c('Attachments',{staticClass:\"messages-container__attachments\"}):_vm._e(),_c('span',{staticClass:\"messages-container__full-screen\",on:{\"click\":_vm.openFullScreenEditor}},[_c('i',{staticClass:\"el-icon-full-screen\"})]),_c('span',{staticClass:\"messages-container__button\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":!_vm.canSendMessage},on:{\"click\":_vm.send}},[(!_vm.localLoading)?_c('span',[_vm._v(\" \"+_vm._s(_vm.sendMessagetext)+\" \")]):_c('i',{staticClass:\"el-icon-loading\"})])],1),_c('DialogEditor',{ref:\"fullScreenEditor\",attrs:{\"text-only\":!_vm.showCKEditor,\"fullscreen\":_vm.isFullscreenDialog,\"can-send-message\":Boolean(_vm.canSendMessage),\"button-confirm\":_vm.sendMessagetext,\"custom-class\":\"negotiator-fullscreen-editor\"},on:{\"confirm\":_vm.send,\"input\":_vm.setEditorText}},[_c('div',{staticClass:\"title-slot\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Recipients',{attrs:{\"is-reversed\":\"\"}}),_c('QuickReply',{attrs:{\"show-title\":\"\"},on:{\"input\":_vm.openFullScreenEditor}})],1)]),_c('ExpiredDisputeAlert',{ref:\"expiredDisputeAlert\"})],1):_c('section',{staticClass:\"messages-container\"},[_c('span',{staticClass:\"messages-container__pre-negotiation-alert\"},[_vm._v(\" \"+_vm._s(_vm.loadingText)+\" \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section\n    v-if=\"!isInPreNegotiation && !isPaused && !isCanceled\"\n    id=\"messagesTabEditorOmnichannelNegotiation\"\n    class=\"messages-container jus-ckeditor__parent\"\n    :class=\"{\n      'email': messageType === 'email' && canColorEditor,\n      'whatsapp': messageType === 'whatsapp' && canColorEditor,\n      'negotiator': ['negotiator_message', 'negotiation'].includes(messageType) && canColorEditor\n    }\"\n  >\n    <ckeditor\n      v-if=\"showCKEditor\"\n      ref=\"messageEditor\"\n      v-model=\"body\"\n      :editor=\"editor\"\n      :config=\"editorConfig\"\n      type=\"classic\"\n    />\n\n    <el-input\n      v-else\n      id=\"messageEditorTextOnly\"\n      ref=\"messageEditorTextOnly\"\n      :value=\"editorTextScaped\"\n      :rows=\"5\"\n      type=\"textarea\"\n      resize=\"none\"\n      @input=\"setEditorText\"\n    />\n\n    <Attachments\n      v-if=\"messageType === 'email'\"\n      class=\"messages-container__attachments\"\n    />\n\n    <span\n      class=\"messages-container__full-screen\"\n      @click=\"openFullScreenEditor\"\n    >\n      <i class=\"el-icon-full-screen\" />\n    </span>\n\n    <span class=\"messages-container__button\">\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        :disabled=\"!canSendMessage\"\n        @click=\"send\"\n      >\n        <span v-if=\"!localLoading\">\n          {{ sendMessagetext }}\n        </span>\n\n        <i\n          v-else\n          class=\"el-icon-loading\"\n        />\n      </el-button>\n    </span>\n\n    <DialogEditor\n      ref=\"fullScreenEditor\"\n      :text-only=\"!showCKEditor\"\n      :fullscreen=\"isFullscreenDialog\"\n      :can-send-message=\"Boolean(canSendMessage)\"\n      :button-confirm=\"sendMessagetext\"\n      custom-class=\"negotiator-fullscreen-editor\"\n      @confirm=\"send\"\n      @input=\"setEditorText\"\n    >\n      <div\n        slot=\"title\"\n        class=\"title-slot\"\n      >\n        <Recipients is-reversed />\n\n        <QuickReply\n          show-title\n          @input=\"openFullScreenEditor\"\n        />\n      </div>\n    </DialogEditor>\n\n    <ExpiredDisputeAlert ref=\"expiredDisputeAlert\" />\n  </section>\n\n  <section\n    v-else\n    class=\"messages-container\"\n  >\n    <span class=\"messages-container__pre-negotiation-alert\">\n      {{ loadingText }}\n    </span>\n  </section>\n</template>\n\n<script>\nimport events from '@/constants/negotiationEvents'\nimport { eventBus, extractMentions } from '@/utils'\nimport ckeditor from '@/utils/mixins/ckeditor'\n\nimport { mapActions, mapGetters } from 'vuex'\n\nexport default {\n  components: {\n    QuickReply: () => import('./QuickReply'),\n    Recipients: () => import('./Recipients'),\n    Attachments: () => import('./AttachemntsIndicator'),\n    DialogEditor: () => import('@/components/dialogs/DialogEditor'),\n    ExpiredDisputeAlert: () => import('@/components/dialogs/ExpiredDisputeAlert')\n  },\n\n  mixins: [ckeditor],\n\n  props: {\n    focusOnStartup: {\n      type: Boolean,\n      default: false\n    },\n    isInPreNegotiation: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      localLoading: false,\n      useMentionPlugin: true,\n      usePreviewPlugin: false\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      attachment: 'getTicketOverviewAttachments',\n      editorTextScaped: 'getEditorTextScaped',\n      editorRecipients: 'getEditorRecipients',\n      messageType: 'getEditorMessageType',\n      editorText: 'getEditorText',\n      ticket: 'getTicketOverview',\n      isJusttoAdmin: 'isJusttoAdmin',\n      isRecovery: 'isWorkspaceRecovery',\n      userProperties: 'userProperties',\n      usingColors: 'isOmnichannelUsingColors'\n    }),\n\n    sendMessagetext() {\n      return this.editorRecipients.length ? 'Enviar mensagem' : 'Selecione um destinatário'\n    },\n\n    body: {\n      get() {\n        return this.editorText\n      },\n      set(text) {\n        this.setEditorText(text)\n      }\n    },\n\n    isPaused() {\n      return this.ticket.paused\n    },\n\n    isCanceled() {\n      const { status } = this.ticket\n      return status === 'CANCELED'\n    },\n\n    loadingText() {\n      if (this.isPaused || this.isCanceled) {\n        return `Disputa ${this.isPaused ? 'pausada' : 'cancelada'}. Retome a disputa para enviar mensagens`\n      } else return 'Disputa em pré negociação. Inicie a disputa para enviar mensagens'\n    },\n\n    showCKEditor() {\n      return !['sms', 'whatsapp'].includes(this.messageType)\n    },\n\n    canSendMessage() {\n      const { editorRecipients, localLoading } = this\n      return editorRecipients.length && !localLoading\n    },\n\n    isFullscreenDialog() {\n      return window.innerWidth <= 900\n    },\n\n    editorInstance() {\n      return this.$refs.messageEditor\n    },\n\n    canColorEditor() {\n      return this.usingColors && this.editorRecipients.length > 0\n    }\n  },\n\n  mounted() {\n    eventBus.$on(events.EDITOR_FOCUS.callback, this.focusOnEditor)\n  },\n\n  beforeDestroy() {\n    eventBus.$off(events.EDITOR_FOCUS.callback, this.focusOnEditor)\n  },\n\n  methods: {\n    ...mapActions([\n      'resetRecipients',\n      'sendDisputeNote',\n      'disfavorTicket',\n      'setEditorText',\n      'sendMessage',\n      'setSignature'\n    ]),\n\n    openFullScreenEditor() {\n      this.$refs.fullScreenEditor.openDialogEditor(this.showCKEditor ? this.editorText : this.editorTextScaped)\n    },\n\n    validateSendMessage() {\n      if (['EXPIRED'].includes(this.ticket.status)) {\n        return this.$refs.expiredDisputeAlert.open()\n      } else if (this.ticket?.favorite) {\n        return new Promise((resolve, reject) => {\n          const text = `<p>Olá Lucas, esta disputa está marcada como <b>Aguardando análise da empresa</b>.<br><br>Estamos respondendo todas as mensagens d${this.$tc('ARTICLE', this.isRecovery)} ${this.$tc('fields.claimantParty', this.isRecovery)} informando que o processo está em análise pela empresa.<br><br>Gostaria de desmarcar esta opção?</p>`\n\n          this.$confirm(text, 'Aguardando análise pela empresa', {\n            cancelButtonText: 'Desmarcar e enviar',\n            confirmButtonText: 'Não enviar',\n            dangerouslyUseHTMLString: true,\n            closeOnPressEscape: false,\n            closeOnClickModal: false,\n            showClose: false,\n            center: true\n          }).then(() => {\n            reject(new Error('Ticket aguardando análise da empresa.'))\n          }).catch(() => {\n            this.disfavorTicket(Number(this.ticket?.disputeId || this.$route.params.id))\n            resolve()\n          })\n        })\n      } else if (extractMentions(this.editorText).length) {\n        return new Promise((resolve, reject) => {\n          const message = '<p>Você está enviando uma mensagem mencionando pessoas do seu time.<br><br>Sua intenção é registrar uma nota privada para seu time ou realmente deseja enviar uma mensagem mencionando pessoas do seu time?</p>'\n          this.$confirm(message, 'Menção detectada', {\n            confirmButtonText: 'Registrar nota',\n            cancelButtonText: 'Enviar mensagem',\n            dangerouslyUseHTMLString: true,\n            center: true\n          }).then(() => {\n            // TODO: Enviar nota.\n            this.sendNote()\n            reject(new Error('Registrando nota'))\n          }).catch(() => {\n            // TODO: Enviar mensagem\n            resolve()\n          })\n        })\n      } else {\n        return new Promise(resolve => resolve())\n      }\n    },\n\n    sendNote() {\n      this.sendDisputeNote({\n        disputeId: Number(this.$route.params.id),\n        note: this.editorText\n      }).then(() => {\n        this.$jusNotification({\n          title: 'Yay!',\n          message: 'Nota gravada com sucesso.',\n          type: 'success'\n        })\n      }).catch(error => this.$jusNotification({ error })).finally(() => {\n        this.resetRecipients()\n        this.setEditorText('')\n      })\n    },\n\n    send() {\n      this.localLoading = true\n      const { id } = this.$route.params\n\n      this.validateSendMessage().then(() => {\n        this.sendMessage(Number(id)).then(res => {\n          this.setEditorText('')\n          this.$jusNotification({\n            title: 'Yay!',\n            message: 'Mensagem enviado com sucesso.',\n            type: 'success'\n          })\n        }).catch(error => {\n          try {\n            const parsedError = JSON.parse(error)\n            this.$jusNotification(parsedError)\n          } catch (e) {}\n        }).finally(() => {\n          this.setSignature()\n          this.localLoading = false\n        })\n      }).finally(() => {\n        this.localLoading = false\n      }).catch(() => {})\n    },\n\n    focusOnEditor() {\n      if (this.showCKEditor) {\n        this.ckeditorFocus()\n      } else {\n        if (this.$refs.messageEditorTextOnly) {\n          this.$refs.messageEditorTextOnly.focus()\n        }\n      }\n    },\n\n    pasteText() {\n      navigator.clipboard.readText().then(text => {\n        if (this.showCKEditor && this.editor) {\n          this.editor.insertText(text)\n        } else if (!this.showCKEditor) {\n          const target = document.getElementById('messageEditorTextOnly')\n\n          if (target.setRangeText) {\n            target.setRangeText(text)\n          } else {\n            target.focus()\n            document.execCommand('insertText', false, text)\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  @import '~projuris-acordos-theme/src/common/colors.scss';\n\n  .negotiator-fullscreen-editor {\n    .el-dialog__header {\n      margin: 10px 0px;\n      height: 40px;\n\n      .dialog-title > .title-slot {\n        display: flex;\n        justify-content: flex-start;\n        gap: 12px;\n        align-items: center;\n      }\n\n      .el-dialog__headerbtn {\n        top: 20px;\n      }\n    }\n\n    .el-dialog__body {\n      margin: 0px 0px 20px;\n\n      .el-textarea > .el-textarea__inner {\n        border-radius: 6px;\n      }\n    }\n  }\n\n  .messages-container {\n    .cke_top { border: none; }\n\n    .cke.cke_chrome, .el-textarea__inner {\n      border: 2px solid $--color-light-gray;\n      border-radius: 6px;\n    }\n  }\n\n  @media (max-width: 900px) {\n    .messages-container {\n      .el-textarea__inner {\n        margin: 6px;\n        width: calc(100% - 12px);\n      }\n    }\n  }\n</style>\n\n<style lang=\"scss\" scoped>\n  @import '~projuris-acordos-theme/src/common/colors';\n\n  .messages-container {\n    padding: 6px;\n    display: flex;\n    flex-direction: column;\n\n    .messages-container__pre-negotiation-alert {\n      margin: 24px 0px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      color: $--color-text-secondary;\n      font-style: italic;\n    }\n\n    .messages-container__editor {\n      margin: 0px;\n    }\n\n    .messages-container__full-screen {\n      position: absolute;\n      top: 0;\n      right: 0;\n      margin: 16px;\n\n      cursor: pointer;\n    }\n\n    .messages-container__attachments {\n      position: absolute;\n      top: 0;\n      right: 0;\n      margin: 16px 40px 0px 0px;\n    }\n\n    .messages-container__paste {\n      position: absolute;\n      top: 20px;\n      left: 140px;\n      cursor: pointer;\n    }\n\n    .messages-container__button {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 6px;\n    }\n  }\n\n  @media (max-width: 900px) {\n    .messages-container {\n      padding: 0;\n\n      .messages-container__editor {\n        margin: 6px;\n      }\n\n      .messages-container__button {\n        .el-button {\n          width: 100%;\n          border-radius: 0;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Messages.vue?vue&type=template&id=7b4f905e&scoped=true&\"\nimport script from \"./Messages.vue?vue&type=script&lang=js&\"\nexport * from \"./Messages.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Messages.vue?vue&type=style&index=0&id=7b4f905e&prod&lang=scss&\"\nimport style1 from \"./Messages.vue?vue&type=style&index=1&id=7b4f905e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b4f905e\",\n  null\n  \n)\n\nexport default component.exports","import Plugin from '@ckeditor/ckeditor5-core/src/plugin'\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview'\nimport store from '@/store'\nimport { eventBus } from '@/utils'\n\nexport default class Preview extends Plugin {\n  constructor(editor) {\n    super(editor)\n\n    this.editor = editor\n    this.buttonView = null\n\n    this.createButton()\n\n    this.editor.ui.componentFactory.add('preview', () => this.buttonView)\n  }\n\n  createButton() {\n    const previewIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18.409\" height=\"18\"><path data-name=\"Retângulo 67\" fill=\"none\" d=\"M.204 0h18v18h-18z\"/><g data-name=\"Grupo 3101\"><g data-name=\"Grupo 26\"><path data-name=\"Caminho 253\" d=\"M9.205 12.018a3.043 3.043 0 10-3.019-3.043 3.031 3.031 0 003.019 3.043z\" fill=\"none\" stroke=\"#000\" stroke-width=\".8\"/><path data-name=\"Caminho 254\" d=\"M9.204 10.745a1.839 1.839 0 10-1.781-1.838 1.814 1.814 0 001.781 1.838z\" fill=\"#191919\" fill-rule=\"evenodd\"/><path data-name=\"Caminho 11629\" d=\"M9.761 9.397a1.032 1.032 0 10-1-1.032 1.019 1.019 0 001 1.032z\" fill=\"#fff\" fill-rule=\"evenodd\"/><path data-name=\"Caminho 255\" d=\"M17.909 8.902a10.174 10.174 0 00-17.409 0 10.174 10.174 0 0017.409 0z\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></g></g></svg>'\n\n    this.buttonView = new ButtonView()\n    this.buttonView.set({\n      label: 'Visualizar Mensagem',\n      icon: previewIcon,\n      tooltip: true\n    })\n\n    this.buttonView.on('execute', () => {\n      const editor = Array(...document.querySelectorAll('.ck-content')).pop()\n\n      if (editor) {\n        const { getSelectedIds: ids } = store.getters\n        const disputeId = ids.length ? ids[0] : Number(location.href.split('/').pop())\n        const template = editor.innerHTML\n\n        eventBus.$emit('SEE-PREVIEW', { template, disputeId })\n      }\n    })\n  }\n}\n","import Plugin from '@ckeditor/ckeditor5-core/src/plugin'\nimport ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview'\nimport store from '@/store'\n\nexport default class ImageAttachment extends Plugin {\n  constructor(editor) {\n    super(editor)\n\n    this.editor = editor\n    this.buttonView = null\n\n    this.createButton()\n\n    this.editor.ui.componentFactory.add('imageAttachment', () => this.buttonView)\n  }\n\n  createButton() {\n    const imageIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" style=\"margin-left: 10px !important;\" height=\"18\"><path data-name=\"Caminho 13974\" d=\"M8.948 4.948a.611.611 0 10-1.222 0c0 .009.005.017.005.026V13.5a3.254 3.254 0 11-6.508 0V3.273a2.034 2.034 0 114.067 0v8.591a.813.813 0 11-1.626 0V4.942a.106.106 0 000-.017.611.611 0 10-1.222 0 .106.106 0 000 .017v6.922a2.034 2.034 0 104.068 0V3.273a3.254 3.254 0 11-6.508 0V13.5a4.474 4.474 0 108.948 0V4.974h-.005c-.002-.009.003-.017.003-.026z\"/></svg>'\n\n    this.buttonView = new ButtonView()\n    this.buttonView.set({\n      label: 'Inserir Imagem',\n      icon: imageIcon,\n      tooltip: true,\n      withText: false\n    })\n\n    this.buttonView.on('execute', () => store.dispatch('toggleImageUploadDialog', true))\n  }\n}\n","import Plugin from '@ckeditor/ckeditor5-core/src/plugin'\n\nexport default class MentionCustomization extends Plugin {\n  constructor(editor) {\n    super(editor)\n\n    this.editor = editor\n\n    this.registerConverters()\n  }\n\n  registerConverters() {\n    this.editor.conversion.for('upcast').elementToAttribute({\n      view: {\n        name: '',\n        key: 'data-mention',\n        classes: '',\n        attributes: {\n          href: true,\n          'data-user-id': true\n        }\n      },\n      model: {\n        key: 'mention',\n        value: viewItem => {\n          const mentionAttribute = this.editor.plugins\n            .get('Mention')\n            .toMentionAttribute(viewItem, {\n              link: viewItem.getAttribute('href'),\n              userId: viewItem.getAttribute('data-user-id')\n            })\n\n          return mentionAttribute\n        }\n      },\n      converterPriority: 'high'\n    })\n\n    this.editor.conversion.for('downcast').attributeToElement({\n      model: 'mention',\n      view: (modelAttributeValue, { writer }) => {\n        if (!modelAttributeValue) {\n          return\n        }\n        const isImage = modelAttributeValue.type === 'image'\n        const isMemberMention = modelAttributeValue.type === 'memberMention'\n\n        return writer.createAttributeElement(\n          isImage ? 'img' : (isMemberMention ? 'em' : 'span'),\n          {\n            class: 'justto-variable',\n            'data-mention': modelAttributeValue.id,\n            src: modelAttributeValue.id,\n            ...(isMemberMention ? {\n              class: 'justto-mention',\n              'account-id': modelAttributeValue.accountId\n            } : {})\n          },\n          {\n            priority: 20,\n            id: modelAttributeValue.uid\n          }\n        )\n      },\n      converterPriority: 'high'\n    })\n  }\n}\n","/* eslint-disable indent */\nimport ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor'\nimport Alignment from '@ckeditor/ckeditor5-alignment/src/alignment'\nimport Autoformat from '@ckeditor/ckeditor5-autoformat/src/autoformat'\nimport BlockQuote from '@ckeditor/ckeditor5-block-quote/src/blockquote'\nimport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold'\nimport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials'\nimport Highlight from '@ckeditor/ckeditor5-highlight/src/highlight'\nimport Indent from '@ckeditor/ckeditor5-indent/src/indent'\nimport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic'\nimport List from '@ckeditor/ckeditor5-list/src/list'\nimport Link from '@ckeditor/ckeditor5-link/src/link'\nimport Image from '@ckeditor/ckeditor5-image/src/image'\nimport ImageToolbar from '@ckeditor/ckeditor5-image/src/imagetoolbar'\nimport ImageStyle from '@ckeditor/ckeditor5-image/src/imagestyle'\nimport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph'\nimport RemoveFormat from '@ckeditor/ckeditor5-remove-format/src/removeformat'\nimport TextTransformation from '@ckeditor/ckeditor5-typing/src/texttransformation'\nimport Underline from '@ckeditor/ckeditor5-basic-styles/src/underline'\nimport Mention from '@ckeditor/ckeditor5-mention/src/mention'\nimport Table from '@ckeditor/ckeditor5-table/src/table'\nimport TableToolbar from '@ckeditor/ckeditor5-table/src/tabletoolbar'\nimport Preview from '@/plugins/ckeditor/preview'\nimport ImageAttachment from '@/plugins/ckeditor/imageAttachment'\nimport MentionCustomization from '@/plugins/ckeditor/mentionCustomization'\nimport { normalizeString } from '@/utils'\nimport { mapActions, mapGetters } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      editor: ClassicEditor\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      variables: 'getAvaliableVariablesToTemplate',\n      members: 'workspaceMembersByDispute'\n    }),\n\n    editorConfig() {\n      return {\n        plugins: [\n          ...[\n            Alignment,\n            Autoformat,\n            BlockQuote,\n            Bold,\n            Image,\n            ImageToolbar,\n            ImageStyle,\n            Essentials,\n            Highlight,\n            Indent,\n            Italic,\n            List,\n            Link,\n            Paragraph,\n            RemoveFormat,\n            TextTransformation,\n            Underline\n          ],\n          ...(this.dontUseTablePlugin ? [] : [Table, TableToolbar]),\n          ...(this.useImageAttachmentPlugin ? [ImageAttachment] : []),\n          ...(this.useMentionPlugin ? [Mention, MentionCustomization] : []),\n          ...(this.usePreviewPlugin ? [Preview] : [])\n        ],\n        mention: this.useMentionPlugin ? {\n          feeds: [\n            {\n              marker: '{',\n              feed: this.getFeedItems,\n              minimumCharacters: 1,\n              itemRenderer: this.customItemRenderer\n            },\n            {\n              marker: '@',\n              feed: this.getFeedPersonItems,\n              minimumCharacters: 0,\n              itemRenderer: this.customMemberItemRenderer\n            }\n          ]\n        } : {},\n        toolbar: {\n          items: [\n            ...[\n              'bold',\n              'italic',\n              'underline',\n              'removeFormat',\n              'link',\n              'bulletedList',\n              'numberedList',\n              '|',\n              'insertTable',\n              '|',\n              'outdent',\n              'indent',\n              '|',\n              'blockQuote',\n              'undo',\n              'redo',\n              'imageStyle'\n            ],\n            ...(this.useImageAttachmentPlugin ? ['imageAttachment'] : []),\n            ...(this.usePreviewPlugin ? ['preview'] : [])\n          ],\n          viewportTopOffset: 30,\n          shouldNotGroupWhenFull: true\n        },\n        table: {\n          contentToolbar: ['tableColumn', 'tableRow', 'mergeTableCells']\n        }\n      }\n    },\n\n    variablesList() {\n      const imgKeys = []\n      const linkKeys = []\n\n      return Object.keys(this.variables).map(key => {\n        return {\n          id: `{{${key}}}`,\n          name: `${this.variables[key]}`,\n          type: imgKeys.includes(key) ? 'img' : linkKeys.includes(key) ? 'link' : 'text'\n        }\n      })\n    }\n  },\n\n  beforeMount() {\n    this.getAvaliableVariablesToTemplate()\n  },\n\n  methods: {\n    ...mapActions([\n      'getAvaliableVariablesToTemplate'\n    ]),\n\n    setImgTag(src) {\n      this.$nextTick(() => {\n        const editor = document.querySelector('.ck-editor__editable').ckeditorInstance\n\n        editor.model.change(writer => {\n          const imageElement = writer.createElement('image', { src })\n          editor.model.insertContent(imageElement, editor.model.document.selection)\n        })\n      })\n    },\n\n    customItemRenderer(item) {\n      return item.name\n    },\n\n    customMemberItemRenderer(item) {\n      return item.person?.name || item.accountEmail\n    },\n\n    getFeedItems(queryText) {\n      function isItemMatching({ name, id }) {\n        const searchString = normalizeString(queryText).replace(/{/g, '')\n\n        return normalizeString(name).includes(searchString) || normalizeString(id).includes(searchString)\n      }\n\n      return this.variablesList.filter(isItemMatching)\n    },\n\n    getFeedPersonItems(queryText) {\n      function isItemMatching({ name, person }) {\n        const searchString = normalizeString(queryText).replace(/{/g, '')\n\n        if (person) {\n          return normalizeString(person.name).includes(searchString)\n        } else {\n          return normalizeString(name).includes(searchString)\n        }\n      }\n\n      return this.members.filter(isItemMatching).map(member => ({\n        ...member,\n        type: 'memberMention',\n        id: `@${this.customMemberItemRenderer(member)}`\n      }))\n    },\n\n    ckeditorFocus(editorInstance) {\n      // TODO: Rever foco do CKEditor.\n      // if (editorInstance) {\n      //   editorInstance.$_instance.editing.view.focus()\n      // } else if (this.editorInstance) {\n      //   this.editorInstance.$_instance.editing.view.focus()\n      // }\n    }\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".negotiator-fullscreen-editor .el-dialog__header{margin:10px 0;height:40px}.negotiator-fullscreen-editor .el-dialog__header .dialog-title>.title-slot{display:flex;justify-content:flex-start;gap:12px;align-items:center}.negotiator-fullscreen-editor .el-dialog__header .el-dialog__headerbtn{top:20px}.negotiator-fullscreen-editor .el-dialog__body{margin:0 0 20px}.negotiator-fullscreen-editor .el-dialog__body .el-textarea>.el-textarea__inner{border-radius:6px}.messages-container .cke_top{border:none}.messages-container .cke.cke_chrome,.messages-container .el-textarea__inner{border:2px solid #f3f4f5;border-radius:6px}@media(max-width:900px){.messages-container .el-textarea__inner{margin:6px;width:calc(100% - 12px)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue\"],\"names\":[],\"mappings\":\"AAIE,iDACE,aAAA,CACA,WAAA,CAEA,2EACE,YAAA,CACA,0BAAA,CACA,QAAA,CACA,kBAAA,CAGF,uEACE,QAAA,CAIJ,+CACE,eAAA,CAEA,gFACE,iBAAA,CAMJ,6BAAA,WAAA,CAEA,4EACE,wBAAA,CACA,iBAAA,CAIJ,wBAEI,wCACE,UAAA,CACA,uBAAA,CAAA\",\"sourcesContent\":[\"\\n@import '~projuris-acordos-theme/src/common/colors.scss';\\n\\n.negotiator-fullscreen-editor {\\n  .el-dialog__header {\\n    margin: 10px 0px;\\n    height: 40px;\\n\\n    .dialog-title > .title-slot {\\n      display: flex;\\n      justify-content: flex-start;\\n      gap: 12px;\\n      align-items: center;\\n    }\\n\\n    .el-dialog__headerbtn {\\n      top: 20px;\\n    }\\n  }\\n\\n  .el-dialog__body {\\n    margin: 0px 0px 20px;\\n\\n    .el-textarea > .el-textarea__inner {\\n      border-radius: 6px;\\n    }\\n  }\\n}\\n\\n.messages-container {\\n  .cke_top { border: none; }\\n\\n  .cke.cke_chrome, .el-textarea__inner {\\n    border: 2px solid $--color-light-gray;\\n    border-radius: 6px;\\n  }\\n}\\n\\n@media (max-width: 900px) {\\n  .messages-container {\\n    .el-textarea__inner {\\n      margin: 6px;\\n      width: calc(100% - 12px);\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".messages-container[data-v-7b4f905e]{padding:6px;display:flex;flex-direction:column}.messages-container .messages-container__pre-negotiation-alert[data-v-7b4f905e]{margin:24px 0;display:flex;justify-content:center;align-items:center;color:#979797;font-style:italic}.messages-container .messages-container__editor[data-v-7b4f905e]{margin:0}.messages-container .messages-container__full-screen[data-v-7b4f905e]{position:absolute;top:0;right:0;margin:16px;cursor:pointer}.messages-container .messages-container__attachments[data-v-7b4f905e]{position:absolute;top:0;right:0;margin:16px 40px 0 0}.messages-container .messages-container__paste[data-v-7b4f905e]{position:absolute;top:20px;left:140px;cursor:pointer}.messages-container .messages-container__button[data-v-7b4f905e]{display:flex;justify-content:flex-end;margin-top:6px}@media(max-width:900px){.messages-container[data-v-7b4f905e]{padding:0}.messages-container .messages-container__editor[data-v-7b4f905e]{margin:6px}.messages-container .messages-container__button .el-button[data-v-7b4f905e]{width:100%;border-radius:0}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/main/negotiation/partials/ticket/omnichannel/editor/partials/Messages.vue\",\"webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss\"],\"names\":[],\"mappings\":\"AAGA,qCACE,WAAA,CACA,YAAA,CACA,qBAAA,CAEA,gFACE,aAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,aCRW,CDSX,iBAAA,CAGF,iEACE,QAAA,CAGF,sEACE,iBAAA,CACA,KAAA,CACA,OAAA,CACA,WAAA,CAEA,cAAA,CAGF,sEACE,iBAAA,CACA,KAAA,CACA,OAAA,CACA,oBAAA,CAGF,gEACE,iBAAA,CACA,QAAA,CACA,UAAA,CACA,cAAA,CAGF,iEACE,YAAA,CACA,wBAAA,CACA,cAAA,CAIJ,wBACE,qCACE,SAAA,CAEA,iEACE,UAAA,CAIA,4EACE,UAAA,CACA,eAAA,CAAA\",\"sourcesContent\":[\"\\n@import '~projuris-acordos-theme/src/common/colors';\\n\\n.messages-container {\\n  padding: 6px;\\n  display: flex;\\n  flex-direction: column;\\n\\n  .messages-container__pre-negotiation-alert {\\n    margin: 24px 0px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    color: $--color-text-secondary;\\n    font-style: italic;\\n  }\\n\\n  .messages-container__editor {\\n    margin: 0px;\\n  }\\n\\n  .messages-container__full-screen {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    margin: 16px;\\n\\n    cursor: pointer;\\n  }\\n\\n  .messages-container__attachments {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    margin: 16px 40px 0px 0px;\\n  }\\n\\n  .messages-container__paste {\\n    position: absolute;\\n    top: 20px;\\n    left: 140px;\\n    cursor: pointer;\\n  }\\n\\n  .messages-container__button {\\n    display: flex;\\n    justify-content: flex-end;\\n    margin-top: 6px;\\n  }\\n}\\n\\n@media (max-width: 900px) {\\n  .messages-container {\\n    padding: 0;\\n\\n    .messages-container__editor {\\n      margin: 6px;\\n    }\\n\\n    .messages-container__button {\\n      .el-button {\\n        width: 100%;\\n        border-radius: 0;\\n      }\\n    }\\n  }\\n}\\n\",\"/* Colors\\n-------------------------- */\\n\\n$--color-white: #fff !default;\\n$--color-black: #424242 !default;\\n$--color-gray: #979797 !default;\\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\\n$--color-light-gray: #f3f4f5 !default;\\n$--color-whatsapp: #075E54 !default;\\n\\n$--pj-color-darker-blue: #0A0022 !default;\\n$--pj-color-dark-blue: #280BA0 !default;\\n$--pj-color-blue: #0756e4 !default;\\n$--pj-color-light-blue: #018EF0 !default;\\n$--pj-color-lighter-blue: #30A9FB !default;\\n$--pj-color-white-blue: #F0F9FE !default;\\n$--pj-color-disabled-blue: #9ad2f9 !default;\\n\\n$-pg-color-overlay: #19415F !default;\\n\\n$--pj-color-red: #CC4148 !default;\\n$--pj-color-light-red: #EC767C !default;\\n$--pj-color-disable-red: #FFF2F3 !default;\\n\\n$--color-primary: $--pj-color-blue !default;\\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\\n\\n$--color-secondary: $--pj-color-light-blue !default;\\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\\n\\n$--color-primary-dark: $--pj-color-dark-blue !default;\\n$--color-success: #14CC30 !default;\\n$--color-warning: #FFC900 !default;\\n$--color-danger: #FF4B54 !default;\\n$--color-info: #2FBBEC !default;\\n\\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\\n\\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\\n\\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\\n\\n$--color-text-primary: $--color-black !default;\\n$--color-text-secondary: $--color-gray !default;\\n\\n$--color-nps-promoter: #14CC30 !default;\\n$--color-nps-neutral: #979797 !default;\\n$--color-nps-detractor: #FF4B54 !default;\\n\\n$--color-negotiator-bg: #9461f74f !default;\\n$--color-email-bg: $--color-info-light !default;\\n$--color-whatsapp-bg: $--color-success-light-5 !default;\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Messages.vue?vue&type=style&index=0&id=7b4f905e&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ceef18a0\", content, true, {\"sourceMap\":true,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Messages.vue?vue&type=style&index=1&id=7b4f905e&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"10134a7c\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","isInPreNegotiation","isPaused","isCanceled","staticClass","_v","_s","loadingText","class","messageType","canColorEditor","includes","attrs","showCKEditor","ref","editor","editorConfig","model","value","body","callback","$$v","expression","editorTextScaped","on","setEditorText","_e","openFullScreenEditor","canSendMessage","send","localLoading","sendMessagetext","isFullscreenDialog","Boolean","slot","staticRenderFns","components","QuickReply","Recipients","Attachments","DialogEditor","ExpiredDisputeAlert","mixins","ckeditor","props","focusOnStartup","type","default","data","useMentionPlugin","usePreviewPlugin","computed","mapGetters","attachment","editorRecipients","editorText","ticket","isJusttoAdmin","isRecovery","userProperties","usingColors","length","get","set","text","paused","status","window","innerWidth","editorInstance","$refs","messageEditor","mounted","eventBus","$on","events","EDITOR_FOCUS","focusOnEditor","beforeDestroy","$off","methods","mapActions","fullScreenEditor","openDialogEditor","validateSendMessage","expiredDisputeAlert","open","favorite","Promise","resolve","reject","$tc","$confirm","cancelButtonText","confirmButtonText","dangerouslyUseHTMLString","closeOnPressEscape","closeOnClickModal","showClose","center","then","Error","catch","disfavorTicket","Number","disputeId","$route","params","id","extractMentions","message","sendNote","sendDisputeNote","note","$jusNotification","title","error","finally","resetRecipients","sendMessage","res","parsedError","JSON","parse","e","setSignature","ckeditorFocus","messageEditorTextOnly","focus","pasteText","navigator","clipboard","readText","insertText","target","document","getElementById","setRangeText","execCommand","component","Preview","Plugin","constructor","super","buttonView","createButton","ui","componentFactory","add","previewIcon","ButtonView","label","icon","tooltip","Array","querySelectorAll","pop","getSelectedIds","ids","store","getters","location","href","split","template","innerHTML","$emit","ImageAttachment","imageIcon","withText","dispatch","MentionCustomization","registerConverters","conversion","for","elementToAttribute","view","name","key","classes","attributes","viewItem","mentionAttribute","plugins","toMentionAttribute","link","getAttribute","userId","converterPriority","attributeToElement","modelAttributeValue","writer","isImage","isMemberMention","createAttributeElement","src","accountId","priority","uid","ClassicEditor","variables","members","Alignment","Autoformat","BlockQuote","Bold","Image","ImageToolbar","ImageStyle","Essentials","Highlight","Indent","Italic","List","Link","Paragraph","RemoveFormat","TextTransformation","Underline","dontUseTablePlugin","Table","TableToolbar","useImageAttachmentPlugin","Mention","mention","feeds","marker","feed","getFeedItems","minimumCharacters","itemRenderer","customItemRenderer","getFeedPersonItems","customMemberItemRenderer","toolbar","items","viewportTopOffset","shouldNotGroupWhenFull","table","contentToolbar","variablesList","imgKeys","linkKeys","Object","keys","map","beforeMount","getAvaliableVariablesToTemplate","setImgTag","$nextTick","querySelector","ckeditorInstance","change","imageElement","createElement","insertContent","selection","item","person","accountEmail","queryText","isItemMatching","searchString","normalizeString","replace","filter","member","___CSS_LOADER_EXPORT___","push","module","content","__esModule","locals","exports"],"sourceRoot":""}