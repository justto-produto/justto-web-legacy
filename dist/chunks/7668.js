(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[7668],{47668:function(t,o,e){"use strict";e.r(o),e.d(o,{default:function(){return p}});var n=function(){var t=this,o=t._self._c;return o("section",{staticClass:"negotiator-container"},[t.toPrint?o("div",{staticClass:"date-to-print"},[t._v(" "+t._s(t._f("moment")(t.sendDate,"[Em] DD/MM [-] HH:mm"))+" ")]):t._e(),o("div",{staticClass:"negotiator-container__contact"},[o("JusIcon",{staticClass:"negotiator-container__email-icon",attrs:{icon:"negotiator-message-2"}}),t.contact.length?o("span",{staticClass:"negotiator-container__email-prefix"},[t._v(" "+t._s(t.prefix)+" ")]):t._e(),t._v(" "+t._s(t.contact)+" ")],1),o("div",{staticClass:"negotiator-container__content",domProps:{innerHTML:t._s(t.message)}}),t.toPrint?t._e():o("span",{staticClass:"negotiator-container__about negotiation-occurrence-about"},[o("span",{staticClass:"negotiator-container__about__time"},[t._v(" "+t._s(t._f("moment")(t.sendDate,"HH:mm"))+" ")]),t.status.icon?o("span",[t._v(" • ")]):t._e(),o("el-tooltip",{attrs:{"open-delay":600,content:t.status.tooltip}},[o("jus-icon",{staticClass:"negotiator-container__about__icon",attrs:{icon:t.status.icon}})],1)],1),t.showRegisterBankAccountButton?o("PartyBankAccountDialog",{ref:"partyBankAccountDialog",attrs:{placement:"right"},on:{create:t.handleAddAccount}},[o("el-button",{staticClass:"negotiator-container__checkout_btn",class:{"has-error":t.denyRegister},attrs:{disabled:t.denyRegister,type:"text",size:"small"},on:{click:function(o){return t.registerBankAccount()}}},[t.denyRegister?o("span",[t._v(" Esta disputa não permite cadastro de conta poupança ")]):o("span",[t._v(" Cadastrar ")])])],1):t._e(),!t.showRegisterBankAccountButton&&t.isBankAccountCheckout&&t.partyBankAccount.length?o("el-button",{staticClass:"negotiator-container__checkout_btn",class:{registered:!t.needAssociate.length},attrs:{disabled:!t.needAssociate.length,type:"text",size:"small"},on:{click:function(o){return t.assicateBankAccount()}}},[o("span",[t._v(" "+t._s(t.needAssociate.length>0?"Associar":"Conta associada!")+" ")])]):t._e(),o("SavingsAccountAlert",{ref:"savingAccountAlert",on:{save:t.addBankAccount,close:function(o){return t.hideBankAccountDialog()}}})],1)},r=[],i=e(4593),a=e(90408),c=e(40917),s={components:{SavingsAccountAlert:()=>e.e(3666).then(e.bind(e,43666)),PartyBankAccountDialog:()=>e.e(645).then(e.bind(e,70645))},mixins:[i.Z],props:{value:{type:Object,required:!0},occurrence:{type:Object,required:!0}},computed:{...(0,a.Se)({ticketParties:"getTicketOverviewParties",ticketInfo:"getTicketOverviewInfo"}),interaction(){return this.value},denyRegister(){return this.ticketInfo?.denySavingDeposit&&"SAVING"===this.bankAccount.type},isPix(){return"PIX"===this.bankAccount.type},pixKey(){return this.isPix?this.bankAccount?.number||this.bankAccount?.email||this.bankAccount?.document:""},isBankAccountCheckout(){return["NEGOTIATOR_CHECKOUT"].includes(this.interaction.type)},bankAccount(){function t(t,o,e=""){return t.includes(o)&&(t||"").split(`${o}: `)[1].split(",")[0]||e}const o={Corrente:"CHECKING","Poupança":"SAVING",PIX:"PIX"},e="PIX"===o[t(this.interaction.properties.BANK_INFO,"Tipo")];return this.isBankAccountCheckout?e?{email:t(this.interaction.properties.BANK_INFO,"E-mail"),document:t(this.interaction.properties.BANK_INFO,"Documento"),number:t(this.interaction.properties.BANK_INFO,"Telefone"),type:o[t(this.interaction.properties.BANK_INFO,"Tipo")]}:{name:t(this.interaction.properties.BANK_INFO,"Nome"),email:t(this.interaction.properties.BANK_INFO,"E-mail"),document:t(this.interaction.properties.BANK_INFO,"Documento"),agency:t(this.interaction.properties.BANK_INFO,"Agência"),bank:t(this.interaction.properties.BANK_INFO,"Banco"),number:t(this.interaction.properties.BANK_INFO,"Conta"),type:o[t(this.interaction.properties.BANK_INFO,"Tipo")]}:{}},partyBankAccount(){return this.ticketParties.filter((t=>(t.documentNumber===this.bankAccount.document||"PIX"===this.bankAccount?.type)&&"CLAIMANT"===t.polarity&&Object.keys(t).includes("bankAccountsDto"))).map((({bankAccountsDto:t})=>t||[]))},showRegisterBankAccountButton(){return this.isBankAccountCheckout&&this.partyBankAccount.length&&!this.partyBankAccount.filter((t=>t.filter((t=>this.isSameBankAccount(t,this.bankAccount))).length)).length},needAssociate(){return this.partyBankAccount.length?this.partyBankAccount.find((t=>t.filter((t=>t.associatedInDispute)))).filter((t=>!t.associatedInDispute&&this.isSameBankAccount(t,this.bankAccount))):[]},message(){const{PERSON_NAME:t,VALUE:o,NOTE:e,BANK_INFO:n}=this.interaction.properties;let r=`<b>${this.interaction.type}</b>`;switch(this.interaction.type){case"NEGOTIATOR_COUNTERPROSAL":r=`Contraproposta realizada por <b>${t}</b>, no valor de <b>${o}</b>`,r+=e?`, com a nota: ${e}`:".";break;case"NEGOTIATOR_PROPOSAL":r=`Proposta realizada por <b>${t}</b>, no valor de <b>${o}</b>`,r+=e?`, com a nota: ${e}`:".";break;case"NEGOTIATOR_ACCEPTED":r=`Proposta no valor de <b>${o}</b> foi aceita através do portal de negociações da JUSTTO por <b>${t}</b>`;break;case"NEGOTIATOR_CHECKOUT":r=this.isPix?`<b>Dados Bancários</b>:</br>\n            Tipo: Pix</br>\n            Chave: ${this.pixKey}\n            `:`<b>Dados Bancários</b>:</br>${n}`.replace(/,/g,"</br>");break}return r},messageType(){const t={EMAIL:"email",WHATSAPP:"whatsapp",NEGOTIATOR_MESSAGE:"negotiator-message-2"};if(this.interaction?.message?.communicationType){const{communicationType:o}=this.interaction.message;if(Object.keys(t).includes(o))return t[o]}return"email"},prefix(){return this.directionIn?"de":"para"},contact(){return this.interaction?.properties?.PERSON_EMAIL||""},status(){const t=this.value?.properties?.DISPUTE_STATUS;return{icon:t?.toLowerCase()||"",tooltip:t?`No momento desta ocorrência, esta disputa estava ${this.$tc("dispute.status."+t)}.`:""}}},updated(){this.$set(this.occurrence,"renderCompleted",!0)},mounted(){this.$set(this.value,"renderCompleted",!0)},methods:{...(0,a.nv)(["getTicketOverviewParties","setTicketRoleBankAccount","createTicketRoleBankAccount"]),isSameBankAccount:c.Kv,registerBankAccount(){this.$refs.partyBankAccountDialog.openBankAccountDialog(this.bankAccount)},handleAddAccount(t){"SAVING"===t.account.type&&t.associate?this.$refs.savingAccountAlert.open(t):this.addBankAccount(t)},addBankAccount({account:t,associate:o}){const{cpfCnpj:e}=this.$options.filters,n=Number(this.$route.params.id),r=this.ticketParties.find((({documentNumber:o,polarity:n,emailsDto:r})=>"CLAIMANT"===n&&(e(o)===e(t.document)||r.filter((({address:t})=>t===this.interaction?.properties?.PERSON_EMAIL))))),i=r?.person?.id;this.handleCreateTicketRoleBankAccount({account:t,personId:i,disputeId:n,associate:o})},handleCreateTicketRoleBankAccount({account:t,personId:o,disputeId:e,associate:n}){this.createTicketRoleBankAccount({account:t,personId:o,disputeId:e}).then((r=>{if(n){const n=r.bankAccounts.find((o=>(0,c.Kv)(o,t)));this.setTicketRoleBankAccount({bankAccountId:n.id,personId:o,disputeId:e})}})).finally((()=>{this.hideBankAccountDialog()}))},assicateBankAccount(){const t=Number(this.$route.params.id);this.needAssociate.forEach((o=>{const{personId:e,id:n}=o;this.setTicketRoleBankAccount({bankAccountId:n,personId:e,disputeId:t})}))},hideBankAccountDialog(){this.$refs.partyBankAccountDialog.closeDialog()}}},l=s,u=(e(16345),e(1001)),d=(0,u.Z)(l,n,r,!1,null,"133f4886",null),p=d.exports},4593:function(t,o,e){"use strict";var n=e(40917),r=e(90408);o.Z={computed:{...(0,r.Se)({toPrint:"getExportTicketModalVisible"}),person(){const t=this.directionIn?"SENDER_NAME":"RECEIVER_NAME";if(this.interaction?.message?.parameters[t]){const o=this.interaction?.message?.parameters[t];return this.$options.filters.resumedName(o||"")}return this?.interaction?.properties?.PERSON_NAME?this.$options.filters.resumedName(this?.interaction?.properties?.PERSON_NAME):""},isSimilarName(){return(0,n.z_)(this.person,this.contact,75)},directionIn(){return"INBOUND"===this.interaction?.direction},sendDate(){return this.occurrence.updateAt?.dateTime||this.occurrence.createAt?.dateTime},sendStatus(){const t=this.interaction?.message?.parameters||{},o=Object.keys(t);return o.includes("READ_DATE")?"readed":o.includes("RECEIVER_DATE")?"recived":(o.includes("SEND_DATE"),"sent")},sendStatusDate(){const t=this.interaction?.message?.parameters||{},o=Object.keys(t);return o.includes("READ_DATE")?t?.READ_DATE?.includes("[UTC]")?this.$moment(t?.READ_DATE.slice(t?.READ_DATE.indexOf("[UTC]"))):(0,n.be)(t.READ_DATE):o.includes("RECEIVER_DATE")?t?.RECEIVER_DATE?.includes("[UTC]")?this.$moment(t?.RECEIVER_DATE.slice(t?.RECEIVER_DATE.indexOf("[UTC]"))):(0,n.be)(t.RECEIVER_DATE):o.includes("SEND_DATE")?t?.SEND_DATE?.includes("[UTC]")?this.$moment(t?.SEND_DATE.slice(t?.SEND_DATE.indexOf("[UTC]"))):(0,n.be)(t.SEND_DATE):this.interaction?.createAt?.dateTime},properties(){return this.occurrence?.properties},groupedOccurrences(){try{return this.occurrence?.properties?.GROUPED_OCCURRENCES?.length>2?JSON.parse(this.occurrence?.properties?.GROUPED_OCCURRENCES.replace(/'/g,'"')):[]}catch(t){return[]}},haveGroupedOccurrences(){return this.groupedOccurrences.length>0}}}},28224:function(t,o,e){"use strict";e.r(o);var n=e(87537),r=e.n(n),i=e(23645),a=e.n(i),c=a()(r());c.push([t.id,".negotiator-container[data-v-133f4886]{overflow-y:hidden;margin:12px}.negotiator-container .negotiator-container__content[data-v-133f4886]{display:block;font-size:16px;color:#424242}@media(max-height:900px){.negotiator-container .negotiator-container__content[data-v-133f4886]{font-size:14px}}.negotiator-container .negotiator-container__contact[data-v-133f4886]{display:flex;align-items:center;justify-content:flex-start;gap:6px;font-weight:600;color:#424242}.negotiator-container .negotiator-container__contact .negotiator-container__email-icon[data-v-133f4886]{width:16px;margin-bottom:-3px}.negotiator-container .negotiator-container__about[data-v-133f4886]{color:#3c3b3b}.negotiator-container .negotiator-container__about .negotiator-container__about__time[data-v-133f4886]{word-break:keep-all}.negotiator-container .negotiator-container__about .negotiator-container__about__icon[data-v-133f4886]{width:14px}.negotiator-container .negotiator-container__checkout_btn[data-v-133f4886]{display:flex;margin:0 auto}.negotiator-container .negotiator-container__checkout_btn.has-error[data-v-133f4886]{color:#ff4b54}.negotiator-container .negotiator-container__checkout_btn.registered[data-v-133f4886]{color:#14cc30}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/omnichannel/occurrences/occurrence/interaction/partials/Negotiator.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAGA,uCACE,iBAAA,CACA,WAAA,CAEA,sEACE,aAAA,CACA,cAAA,CACA,aCNY,CDQZ,yBALF,sEAMI,cAAA,CAAA,CAIJ,sEACE,YAAA,CACA,kBAAA,CACA,0BAAA,CACA,OAAA,CACA,eAAA,CACA,aCnBY,CDqBZ,wGACE,UAAA,CACA,kBAAA,CAIJ,oEACE,aAAA,CAEA,uGACE,mBAAA,CAGF,uGACE,UAAA,CAIJ,2EACE,YAAA,CACA,aAAA,CAEA,qFACE,aCCW,CDEb,sFACE,aCLY",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.negotiator-container {\n  overflow-y: hidden;\n  margin: 12px;\n\n  .negotiator-container__content {\n    display: block;\n    font-size: 16px;\n    color: $--color-text-primary;\n\n    @media (max-height: 900px) {\n      font-size: 14px;\n    }\n  }\n\n  .negotiator-container__contact {\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 6px;\n    font-weight: 600;\n    color: $--color-text-primary;\n\n    .negotiator-container__email-icon {\n      width: 16px;\n      margin-bottom: -3px;\n    }\n  }\n\n  .negotiator-container__about {\n    color: #3C3B3B;\n\n    .negotiator-container__about__time {\n      word-break: keep-all;\n    }\n\n    .negotiator-container__about__icon {\n      width: 14px;\n    }\n  }\n\n  .negotiator-container__checkout_btn {\n    display: flex;\n    margin: 0 auto;\n\n    &.has-error {\n      color: $--color-danger;\n    }\n\n    &.registered {\n      color: $--color-success;\n    }\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),o["default"]=c},16345:function(t,o,e){var n=e(28224);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var r=e(39185).Z;r("4060363c",n,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=7668.js.map