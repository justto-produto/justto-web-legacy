(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[7750],{87750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible,"append-to-body":"",title:"Cadastrar parte",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.searchLoading||e.registerLoading,expression:"searchLoading || registerLoading"}],ref:"newRole",staticClass:"new-rule__form",attrs:{model:e.newRole,rules:e.newRoleRules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"Parte"}},[t("el-select",{staticStyle:{width:"100%"},on:{change:e.clearDocuments},model:{value:e.newRole.party,callback:function(t){e.$set(e.newRole,"party",t)},expression:"newRole.party"}},e._l(e.roleParty,(function(n,s){return t("el-option",{key:`${s}-${n}`,attrs:{label:e.$tc(`fields.${n}`,e.isRecovery),value:n}})})),1)],1),e.secondStep?t("div",{staticClass:"new-rule__form__without-doc"},[t("el-form-item",{attrs:{label:"CPF/CNPJ",prop:"documentNumber"}},[t("el-input",{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##","##.###.###/####-##"],expression:"['###.###.###-##', '##.###.###/####-##']"}],attrs:{disabled:e.disableDocumentNumber},model:{value:e.newRole.documentNumber,callback:function(t){e.$set(e.newRole,"documentNumber",t)},expression:"newRole.documentNumber"}})],1),t("el-form-item",{attrs:{label:"Nome",prop:"name"}},[t("el-input",{model:{value:e.newRole.name,callback:function(t){e.$set(e.newRole,"name",t)},expression:"newRole.name"}})],1),t("el-form-item",{attrs:{label:"Telefone",prop:"phone"}},[t("el-input",{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],on:{blur:function(t){return e.addPhone()}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPhone()}},model:{value:e.newRole.phone,callback:function(t){e.$set(e.newRole,"phone",t)},expression:"newRole.phone"}},[t("el-button",{attrs:{slot:"append",type:"transparent"},on:{click:function(t){return e.addPhone()}},slot:"append"},[t("i",{staticClass:"el-icon-plus icon--active"})])],1)],1),t("el-table",{staticClass:"el-table--list",attrs:{data:e.phonesList,"show-header":!1,fit:""}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("phoneNumber")(t.row.number))+" ")]}}])}),t("el-table-column",{attrs:{fixed:"right",align:"right",width:"48px","class-name":"visible"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("a",{on:{click:function(t){return t.preventDefault(),e.removePhone(n.$index)}}},[t("jus-icon",{attrs:{icon:"trash"}})],1)]}}])})],1),t("el-form-item",{attrs:{label:"E-mail",prop:"email"}},[t("el-input",{attrs:{"data-testid":"input-email"},on:{blur:function(t){return e.addEmail()}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addEmail()}},model:{value:e.newRole.email,callback:function(t){e.$set(e.newRole,"email",t)},expression:"newRole.email"}},[t("el-button",{attrs:{slot:"append",type:"transparent","data-testid":"add-email"},on:{click:function(t){return e.addEmail()}},slot:"append"},[t("i",{staticClass:"el-icon-plus icon--active"})])],1)],1),t("el-table",{staticClass:"el-table--list",attrs:{data:e.emailsList,"show-header":!1,fit:""}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(" "+e._s(n.row.address)+" ")])]}}])}),t("el-table-column",{attrs:{fixed:"right",align:"right",width:"48px","class-name":"visible"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("a",{on:{click:function(t){return t.preventDefault(),e.removeEmail(n.$index)}}},[t("jus-icon",{attrs:{icon:"trash"}})],1)]}}])})],1),t("el-row",{staticClass:"dispute-overview-view__oab-form",attrs:{gutter:16,type:"flex",align:"middle"}},[t("el-col",{attrs:{span:20}},[t("el-form-item",{staticClass:"oab",attrs:{label:"OAB",prop:"oab"}},[t("el-input",{on:{input:function(t){return e.$forceUpdate()},blur:function(t){return e.addOab(e.newRole.personId,e.newRole.oabs)}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addOab(e.newRole.personId,e.newRole.oabs)}},model:{value:e.newRole.oab,callback:function(t){e.$set(e.newRole,"oab",t)},expression:"newRole.oab"}})],1)],1),t("el-col",{attrs:{span:20}},[t("el-form-item",{staticClass:"state",attrs:{label:"Estado",prop:"state"}},[t("el-select",{attrs:{"default-first-option":!0,autocomplete:"off",filterable:""},on:{input:function(t){return e.$forceUpdate()},change:function(t){return e.addOab(e.newRole.personId,e.newRole.oabs)},blur:function(t){return e.addOab(e.newRole.personId,e.newRole.oabs)}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addOab(e.newRole.personId,e.newRole.oabs)}},model:{value:e.newRole.state,callback:function(t){e.$set(e.newRole,"state",t)},expression:"newRole.state"}},e._l(e.$store.state.brazilianStates,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{staticClass:"hidde-label",attrs:{label:"Ação"}},[t("el-button",{staticClass:"button",attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addOab(e.newRole.personId,e.newRole.oabs)}}})],1)],1)],1),t("el-table",{staticClass:"el-table--list",attrs:{data:e.newRole.oabs,"show-header":!1,fit:""}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(n){return t("div",{},[e._v(" "+e._s(n.row.number)+" - "+e._s(n.row.state)+" ")])}}])}),t("el-table-column",{attrs:{fixed:"right",align:"right",width:"48px","class-name":"visible"},scopedSlots:e._u([{key:"default",fn:function(n){return t("div",{},[t("a",{on:{click:function(t){return t.preventDefault(),e.removeOab(n.$index)}}},[t("jus-icon",{attrs:{icon:"trash"}})],1)])}}])})],1)],1):t("div",{staticClass:"new-rule__form__with-doc"},[t("div",{staticClass:"dispute-add-role__search"},[t("el-row",{attrs:{gutter:8,type:"flex",align:"bottom"}},[["claimantParty","respondentParty"].includes(e.newRole.party)?t("el-col",{attrs:{span:21}},[t("el-form-item",{attrs:{label:"CPF/CNPJ",prop:"searchDocumentNumber"}},[t("el-input",{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##","##.###.###/####-##"],expression:"['###.###.###-##', '##.###.###/####-##']"}],nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchPerson.apply(null,arguments)}},model:{value:e.newRole.searchDocumentNumber,callback:function(t){e.$set(e.newRole,"searchDocumentNumber",t)},expression:"newRole.searchDocumentNumber"}})],1)],1):e.newRole.party?t("el-col",{attrs:{span:21}},[t("el-row",{attrs:{gutter:8,type:"flex",align:"bottom"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"oab",attrs:{label:"OAB",prop:"searchOabNumber"}},[t("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchPerson.apply(null,arguments)}},model:{value:e.newRole.searchOabNumber,callback:function(t){e.$set(e.newRole,"searchOabNumber",t)},expression:"newRole.searchOabNumber"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"state",attrs:{label:"Estado",prop:"searchOabState"}},[t("el-select",{attrs:{autocomplete:"off",filterable:""},model:{value:e.newRole.searchOabState,callback:function(t){e.$set(e.newRole,"searchOabState",t)},expression:"newRole.searchOabState"}},e._l(e.$store.state.brazilianStates,(function(n){return t("el-option",{key:n.value,attrs:{label:n.value,value:n.value},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchPerson.apply(null,arguments)}}})})),1)],1)],1)],1)],1):e._e(),e.newRole.party?t("el-col",{attrs:{span:3}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchPerson}},[t("jus-icon",{attrs:{icon:"right"}})],1)],1):e._e()],1)],1),e.newRole.party?t("el-button",{attrs:{type:"text"},on:{click:e.continueWithoutDocument}},[e._v(" Continuar sem documento ")]):e._e()],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Cancelar ")]),t("el-button",{attrs:{loading:e.registerLoading,disabled:!e.secondStep,type:"primary"},on:{click:e.registerRole}},[e._v(" Cadastrar ")])],1)],1)},a=[],o=(n(57658),n(18814)),i=n(90408),l={name:"DisputeAddRole",props:{visible:{type:Boolean,default:!1},disputeId:{type:Number,default:0},documentNumbers:{type:Array,default:()=>[]},oabs:{type:Array,default:()=>[]}},data(){return{secondStep:!1,searchLoading:!1,registerLoading:!1,disableDocumentNumber:!1,emailsList:[],phonesList:[],newRole:{name:"",phone:"",email:"",documentNumber:"",searchDocumentNumber:"",searchOabNumber:"",searchOabState:""},newRoleRules:{name:[{required:!0,message:"Campo obrigatório",trigger:"submit"},{validator:o.Ol,message:"Nome precisa conter mais de 3 caracteres",trigger:"submit"}],phone:[{validator:o.a$,message:"Telefone inválido",trigger:"submit"}],email:[{type:"email",message:"E-mail inválido",trigger:"submit"}],documentNumber:[{validator:o.II,message:"CPF/CNPJ inválido",trigger:"submit"}],searchDocumentNumber:[{validator:o.II,message:"CPF/CNPJ inválido",trigger:"submit"},{required:!0,message:"Campo obrigatório",trigger:"submit"}],searchOabNumber:[{required:!0,message:"Campo obrigatório",trigger:"submit"}],searchOabState:[{required:!0,message:"Campo obrigatório",trigger:"submit"}]}}},computed:{...(0,i.Se)({isRecovery:"isWorkspaceRecovery"}),dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},roleParty:()=>["claimantParty","claimantLawyer","respondentParty","respondentLawyer"],partySelected(){if(this.newRole.party)return!!["claimantParty","respondentParty"].includes(this.newRole.party)}},watch:{dialogVisible(){this.secondStep=!1,this.disableDocumentNumber=!1,this.newRole={name:"",searchDocumentNumber:"",documentNumber:"",searchOabState:"",searchOabNumber:""}}},methods:{continueWithoutDocument(){this.newRole.documentNumber=this.newRole.searchDocumentNumber,this.newRole.oab=this.newRole.searchOabNumber,this.newRole.state=this.newRole.searchOabState,this.secondStep=!0},searchPerson(){let e,t,n=!0;if(!0===this.partySelected)e=["searchDocumentNumber"];else{if(!1!==this.partySelected)return;e=["searchOabNumber","searchOabState"]}if(this.$refs.newRole.validateField(e,(e=>{e&&(n=!1)})),n){this.searchLoading=!0,this.disableDocumentNumber=!1,this.newRole.oabs=[],this.emailsList=[],this.phonesList=[];const e={};if(this.newRole.searchDocumentNumber){if(this.documentNumbers.includes(this.newRole.searchDocumentNumber.replace(/\D/g,"")))return setTimeout(function(){this.$jusNotification({title:"Ops!",message:"Parte já cadastrada nesta disputa.",type:"warning"}),this.searchLoading=!1}.bind(this),300),0;e.document=this.newRole.searchDocumentNumber.replace(/\D/g,""),t="searchPersonByDocument",this.newRole.documentNumber=this.newRole.searchDocumentNumber,this.disableDocumentNumber=!0}else if(this.newRole.searchOabNumber&&this.newRole.searchOabState){if(this.oabs.includes(this.newRole.searchOabNumber.replace(/\D/g,"")+this.newRole.searchOabState))return setTimeout(function(){this.$jusNotification({title:"Ops!",message:"Parte já cadastrada nesta disputa.",type:"warning"}),this.searchLoading=!1}.bind(this),300),0;e.oabState=this.newRole.searchOabState,e.oabNumber=this.newRole.searchOabNumber.replace(/\D/g,""),t="searchPersonByOab"}this.$store.dispatch(t,e).then((e=>{if(e){const t=this;this.$confirm("Já existem informações no sistema da parte a ser cadastrada. Deseja utilizar os dados existentes?","Parte encontrada no sistema",{confirmButtonText:"Sim, utilizar",cancelButtonText:"Não",type:"info"}).then((()=>{t.newRole.name=e.name,e.documentNumber&&(t.newRole.documentNumber=this.$options.filters.cpfCnpj(e.documentNumber)),t.newRole.oabs=e.oabs,t.emailsList=e.emails,t.phonesList=e.phones})),this.newRole.personId=e.id}this.secondStep=!0})).catch((e=>{console.error(e)})).finally((()=>{this.newRole.searchOabNumber&&this.newRole.searchOabState&&this.newRole.oabs.push({number:this.newRole.searchOabNumber,state:this.newRole.searchOabState}),setTimeout(function(){this.searchLoading=!1}.bind(this),500)}))}},clearDocuments(){this.newRole.searchDocumentNumber="",this.newRole.documentNumber="",this.newRole.searchOabState="",this.newRole.searchOabNumber="",this.newRole.name="",this.secondStep=!1,this.disableDocumentNumber=!1},addOab(e,t){let n=!0;if(this.$refs.newRole.validateField(["oab","state"],(e=>{!e&&this.newRole.oab&&this.newRole.state||(n=!1)})),n){const n=this;this.newRole.oab=this.newRole.oab.replace(/ /g,""),this.newRole.personId=e,this.newRole.oabs=t||[];const s=this.newRole.oabs.findIndex((e=>e.number===n.newRole.oab&&e.state===n.newRole.state));s<0&&this.newRole.oabs.push({number:this.newRole.oab,state:this.newRole.state}),this.newRole.oab="",this.newRole.state=""}},removeOab(e){this.newRole.oabs.splice(e,1)},addPhone(){let e=!0;if(this.$refs.newRole.validateField("phone",(t=>{!t&&this.newRole.phone||(e=!1)})),e){this.newRole.phone=this.newRole.phone.replace(/ /g,"").replace(/\D/g,"");const e=this.phonesList.findIndex((e=>{const t=e.number.startsWith("55")?e.number.replace("55",""):e.number;return t===this.newRole.phone}));e<0&&this.phonesList.push({number:this.newRole.phone,isMain:!0}),this.newRole.phone=""}},removePhone(e){this.phonesList.splice(e,1)},addEmail(){let e=!0;if(this.newRole.email=this.newRole.email.trim(),this.$refs.newRole.validateField("email",(t=>{!t&&this.newRole.email||(e=!1)})),e){const e=this,t=this.emailsList.findIndex((t=>t.address===e.newRole.email));t<0&&this.emailsList.push({address:this.newRole.email}),this.newRole.email=""}},removeEmail(e){this.emailsList.splice(e,1)},registerRole(){let e=!0;if(this.$refs.newRole.validateField(["documentNumber","name"],(t=>{t&&(e=!1)})),e){this.registerLoading=!0;const e={},t=this.disputeId;e.main=!0,this.newRole.documentNumber&&(e.documentNumber=this.newRole.documentNumber.replace(/\D/g,"")),this.newRole.oabs&&(e.oabs=this.newRole.oabs),this.emailsList&&(e.emails=this.emailsList),this.phonesList&&(e.phones=this.phonesList),this.newRole.name&&(e.name=this.newRole.name),this.newRole.personId&&(e.personId=this.newRole.personId),e.party=this.newRole.party.startsWith("respondent")?"RESPONDENT":"CLAIMANT",e.roles=[this.newRole.party.endsWith("Party")?"PARTY":"LAWYER"],this.$store.dispatch("newDisputeRole",{role:e,disputeId:t}).then((t=>{this.$jusSegment("Cadastrar nova parte",{description:`Nome: ${e.name}, documento: ${e.documentNumber}`}),this.dialogVisible=!1,this.$jusNotification({title:"Yay!",message:"Nova parte cadastrada com sucesso.",type:"success"}),this.$store.dispatch("getDispute",this.disputeId),this.$confirm("Deseja iniciar o engajamento para esta parte?","Atenção!",{confirmButtonText:"Engajar",cancelButtonText:"Não",type:"info"}).then((()=>{this.$store.dispatch("restartDisputeRoleEngagement",{disputeId:this.disputeId,disputeRoleId:t.id}).then((()=>{this.$jusNotification({title:"Yay!",message:"Engajamento realizado com sucesso.",type:"success"})}))}))})).catch((e=>{this.$jusNotification({error:e})})).finally((()=>{this.registerLoading=!1}))}}}},r=l,u=(n(50840),n(1001)),c=(0,u.Z)(r,s,a,!1,null,null,null),d=c.exports},69187:function(e,t,n){"use strict";n.r(t);var s=n(87537),a=n.n(s),o=n(23645),i=n.n(o),l=i()(a());l.push([e.id,".dispute-add-role__search{display:flex;justify-content:space-between;align-items:center}.dispute-add-role__search .el-form-item,.dispute-add-role__search .el-row{width:100%}.dispute-add-role__search .el-row--flex .el-col{display:flex;justify-content:flex-end}.dispute-add-role__search .el-row--flex .el-col .el-form-item{margin-bottom:0}.dispute-add-role__search .el-row--flex .el-col .el-form-item .el-form-item__content{line-height:14px;height:40px}.dispute-add-role__search .el-row--flex .el-col .el-form-item .el-form-item__content .el-select{width:100%}.dispute-add-role__search .el-button{height:40px}.new-rule__form .new-rule__form__without-doc .dispute-overview-view__oab-form .el-col .el-form-item .el-form-item__content{display:flex}.new-rule__form .new-rule__form__without-doc .dispute-overview-view__oab-form .el-col .el-form-item .el-form-item__content .el-select{width:100%}.new-rule__form .new-rule__form__without-doc .dispute-overview-view__oab-form .el-col .el-form-item .el-form-item__content .el-select .el-input{overflow:hidden}.new-rule__form .new-rule__form__without-doc .dispute-overview-view__oab-form .el-col .el-form-item.hidde-label .el-form-item__label{visibility:hidden}","",{version:3,sources:["webpack://./src/components/dialogs/DisputeAddRole.vue"],names:[],mappings:"AAEE,0BACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAEA,0EACE,UAAA,CAIA,gDACE,YAAA,CACA,wBAAA,CAEA,8DACE,eAAA,CAEA,qFACE,gBAAA,CACA,WAAA,CAEA,gGACE,UAAA,CAOV,qCACE,WAAA,CAUI,2HACE,YAAA,CAEA,sIACE,UAAA,CAEA,gJACE,eAAA,CAMJ,qIACE,iBAAA",sourcesContent:["\n.dispute-add-role {\n  &__search {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .el-form-item, .el-row {\n      width: 100%;\n    }\n\n    .el-row--flex {\n      .el-col {\n        display: flex;\n        justify-content: flex-end;\n\n        .el-form-item {\n          margin-bottom: 0;\n\n          .el-form-item__content {\n            line-height: 14px;\n            height: 40px;\n\n            .el-select {\n              width: 100%;\n            }\n          }\n        }\n      }\n    }\n\n    .el-button {\n      height: 40px;\n    }\n  }\n}\n\n.new-rule__form {\n  .new-rule__form__without-doc {\n    .dispute-overview-view__oab-form {\n      .el-col {\n        .el-form-item {\n          .el-form-item__content {\n            display: flex;\n\n            .el-select {\n              width: 100%;\n\n              .el-input {\n                overflow: hidden;\n              }\n            }\n          }\n\n          &.hidde-label {\n            .el-form-item__label {\n              visibility: hidden;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"],sourceRoot:""}]),t["default"]=l},50840:function(e,t,n){var s=n(69187);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=n(39185).Z;a("79730780",s,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=7750.js.map