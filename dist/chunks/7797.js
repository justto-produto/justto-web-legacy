(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[7797],{57797:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return d}});var i=function(){var e=this,o=e._self._c;return o("div",[o("el-dialog",{staticClass:"jus-engagements-dialog",attrs:{"close-on-click-modal":!1,visible:e.dialog,width:"80%"},on:{"update:visible":function(o){e.dialog=o}}},[o("template",{slot:"title"},[o("h2",[e._v("Estratégia de engajamento das partes")]),e.isManual?e._e():o("p",[e._v(" Abaixo, você encontra as mensagens a serem enviadas para às partes das disputas contidas nesta Campanha. Com os dados da sua disputas, nosso sistema escolhe a melhor estratégia de engajamento para as suas disputas. ")])]),e.isManual?o("p",[e._v(" Essa estratégia não possuí mensagens pré-definidas e não envia mensagens automáticas; Todas as mensagens devem ser enviadas manualmente pelo negociador usando a plataforma ProJuris 3DR. ")]):o("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.state.loading,expression:"$store.state.loading"}],ref:"collapse",staticClass:"jus-engagements-dialog__engagement el-collapse--bordered"},e._l(e.strategy.communications,(function(t){return o("div",{key:t.id},[t.archived?e._e():o("div",{on:{click:function(o){return e.getTemplates(t)}}},["DELAY"!=t.type?o("div",{staticClass:"jus-engagements-dialog__step"},[e._v(" Envio ")]):e._e(),"DELAY"!==t.type?o("el-collapse-item",[o("template",{slot:"title"},[o("jus-icon",{attrs:{icon:e.getIcon(t.type)}}),e._v(" "+e._s(e._f("capitalize")(t.name))+" ")],1),t.template?o("div",[o("h3",[e._v(e._s(t.template.title))]),o("span",{domProps:{innerHTML:e._s(t.template.body)}})]):o("div",{staticClass:"jus-engagements-dialog__step-loading"},[o("i",{staticClass:"el-icon-loading"})])],2):o("div",{staticClass:"jus-engagements-dialog__wait"},[o("jus-icon",{attrs:{icon:e.getIcon(t.type),"is-active":""}}),e._v(" "+e._s(t.name)+" ")],1)],1)])})),0)],2),o("el-dialog",{attrs:{visible:e.editDialog,width:"70%"},on:{"update:visible":function(o){e.editDialog=o}}},[e.preview?o("div",[o("h2",{staticStyle:{margin:"20px"}},[e._v(" "+e._s(e.communication.template.title)+" ")]),o("br"),o("br"),o("span",{domProps:{innerHTML:e._s(e.communication.template.body)}})]):o("div",[e.communication.template?o("el-input",{attrs:{disabled:e.editDialogLoading},model:{value:e.communication.template.title,callback:function(o){e.$set(e.communication.template,"title",o)},expression:"communication.template.title"}}):e._e(),o("br"),o("br"),e.communication.template?o("el-input",{staticClass:"jus-engagements-dialog__textarea",attrs:{disabled:e.editDialogLoading,type:"textarea"},model:{value:e.communication.template.body,callback:function(o){e.$set(e.communication.template,"body",o)},expression:"communication.template.body"}}):e._e()],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:e.editDialogLoading,icon:e.preview?"el-icon-edit":"el-icon-view"},on:{click:function(o){e.preview=!e.preview}}},[e._v(" "+e._s(e.preview?"Voltar":"Visualizar")+" ")]),o("el-button",{attrs:{disabled:e.editDialogLoading,type:"secondary"},on:{click:function(o){e.editDialog=!1}}},[e._v(" Cancelar ")]),o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.editDialogLoading,expression:"editDialogLoading"}],attrs:{type:"primary"},on:{click:e.editTemplate}},[e._v(" Editar template ")])],1)])],1)},a=[],n=t(90408),l={name:"JusEngagementsDialog",props:{dialogVisible:{type:Boolean,default:!1},value:{type:Object,required:!0},isManual:{type:Boolean,default:!1}},data(){return{dialog:!1,communication:"",editDialog:!1,editDialogLoading:!1,editorKey:0,preview:!1}},computed:{...(0,n.Se)({strategies:"getMyStrategiesLite"}),strategy(){return this.strategies.find((e=>e.id===this.value.id))||{communications:[]}},strategyId(){return this.value.id}},watch:{dialogVisible(e){this.dialog=e,this.isManual||this.getEngagements()},dialog(e){this.$emit("update:dialogVisible",e)}},methods:{...(0,n.nv)(["getStrategyCommunicationTemplate","getStrategyEngagementLite","showLoading","hideLoading"]),openEditDialog(e){this.preview=!1,this.editDialog=!0,this.communication=e},editTemplate(){this.editDialogLoading=!0,this.$store.dispatch("editStrategyTemplate",{id:this.communication.template.id,contentType:"TEXT",title:this.communication.template.title,body:this.communication.template.body,protocolId:this.communication.template.protocolId}).then((()=>{this.editDialog=!1,this.getEngagements(),this.$jusNotification({title:"Yay!",message:"Template editado com sucesso",type:"success"})})).catch((e=>{this.$jusNotification({error:e})})).finally((()=>{this.editDialogLoading=!1}))},getIcon(e){switch(e){case"WHATSAPP":return"whatsapp";case"EMAIL":return"email";case"EMAIL_CNA":return"email-cna";case"DELAY":return"clock";default:return"sms"}},getEngagements(){this.showLoading(),this.getStrategyEngagementLite(this.strategyId).then((e=>{this.$forceUpdate()})).catch((e=>{this.$jusNotification({error:e})})).finally(this.hideLoading)},getTemplates({id:e}){this.$refs.collapse.activeNames.length&&this.getStrategyCommunicationTemplate({strategyId:this.strategyId,comunicationId:e}).then((()=>{this.$forceUpdate()}))}}},r=l,s=(t(72458),t(1001)),c=(0,s.Z)(r,i,a,!1,null,null,null),d=c.exports},34964:function(e,o,t){"use strict";t.r(o);var i=t(87537),a=t.n(i),n=t(23645),l=t.n(n),r=l()(a());r.push([e.id,".jus-engagements-dialog__step-loading{display:flex;justify-content:center;margin-top:16px}.jus-engagements-dialog__step{color:#dcdfe6;font-weight:700;font-size:12px;margin-top:20px;margin-bottom:10px}.jus-engagements-dialog__engagement{min-height:100px}.jus-engagements-dialog__engagement .el-collapse-item__header{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;font-size:16px;height:100%;line-height:inherit;padding:10px 0;font-size:14px}.jus-engagements-dialog__engagement .el-collapse-item__header img{margin-right:10px}.jus-engagements-dialog__engagement .el-collapse-item__arrow{padding-left:10px;line-height:20px;margin:0}.jus-engagements-dialog__engagement .el-collapse-item__content{border-top:1px solid #eee}.jus-engagements-dialog__wait{display:flex;align-items:center;justify-content:center;margin-top:20px;color:#0756e4}.jus-engagements-dialog__wait :first-child{margin-right:10px}.jus-engagements-dialog .el-dialog__body{padding:10px 20px 40px}.jus-engagements-dialog__textarea .el-textarea__inner{height:50vh;resize:none}","",{version:3,sources:["webpack://./src/components/dialogs/JusEngagementsDialog.vue","webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss"],names:[],mappings:"AAGA,sCACE,YAAA,CACA,sBAAA,CACA,eAAA,CAIA,8BACE,aAAA,CACA,eAAA,CACA,cAAA,CACA,eAAA,CACA,kBAAA,CAEF,oCACE,gBAAA,CACA,8DAKE,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,cAAA,CACA,WAAA,CACA,mBAAA,CACA,cAAA,CACA,cAAA,CACA,kEACE,iBAAA,CAGJ,6DACE,iBAAA,CACA,gBAAA,CACA,QAAA,CAEF,+DACE,yBAAA,CAGJ,8BACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,aCtCc,CDuCd,2CACE,iBAAA,CAGJ,yCACE,sBAAA,CAEF,sDACE,WAAA,CACA,WAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.jus-engagements-dialog__step-loading {\n  display: flex;\n  justify-content: center;\n  margin-top: 16px;\n}\n\n.jus-engagements-dialog {\n  &__step {\n    color: #dcdfe6;\n    font-weight: bold;\n    font-size: 12px;\n    margin-top: 20px;\n    margin-bottom: 10px;\n  }\n  &__engagement {\n    min-height: 100px;\n    .el-collapse-item__header {\n      height: 100%;\n      line-height: inherit;\n      padding: 10px 0;\n      font-size: 14px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n      font-size: 16px;\n      height: 100%;\n      line-height: inherit;\n      padding: 10px 0;\n      font-size: 14px;\n      img {\n        margin-right: 10px;\n      }\n    }\n    .el-collapse-item__arrow {\n      padding-left: 10px;\n      line-height: 20px;\n      margin: 0;\n    }\n    .el-collapse-item__content {\n      border-top: 1px solid #eeeeee;\n    }\n  }\n  &__wait {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 20px;\n    color: $--color-primary;\n    :first-child {\n      margin-right: 10px;\n    }\n  }\n  .el-dialog__body {\n    padding: 10px 20px 40px;\n  }\n  &__textarea .el-textarea__inner {\n    height: 50vh;\n    resize: none;\n  }\n}\n","/* Colors\n-------------------------- */\n\n$--color-white: #fff !default;\n$--color-black: #424242 !default;\n$--color-gray: #979797 !default;\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\n$--color-light-gray: #f3f4f5 !default;\n$--color-whatsapp: #075E54 !default;\n\n$--pj-color-darker-blue: #0A0022 !default;\n$--pj-color-dark-blue: #280BA0 !default;\n$--pj-color-blue: #0756e4 !default;\n$--pj-color-light-blue: #018EF0 !default;\n$--pj-color-lighter-blue: #30A9FB !default;\n$--pj-color-white-blue: #F0F9FE !default;\n$--pj-color-disabled-blue: #9ad2f9 !default;\n\n$-pg-color-overlay: #19415F !default;\n\n$--pj-color-red: #CC4148 !default;\n$--pj-color-light-red: #EC767C !default;\n$--pj-color-disable-red: #FFF2F3 !default;\n\n$--color-primary: $--pj-color-blue !default;\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\n\n$--color-secondary: $--pj-color-light-blue !default;\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\n\n$--color-primary-dark: $--pj-color-dark-blue !default;\n$--color-success: #14CC30 !default;\n$--color-warning: #FFC900 !default;\n$--color-danger: #FF4B54 !default;\n$--color-info: #2FBBEC !default;\n\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\n\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\n\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\n\n$--color-text-primary: $--color-black !default;\n$--color-text-secondary: $--color-gray !default;\n\n$--color-nps-promoter: #14CC30 !default;\n$--color-nps-neutral: #979797 !default;\n$--color-nps-detractor: #FF4B54 !default;\n\n$--color-negotiator-bg: #9461f74f !default;\n$--color-email-bg: $--color-info-light !default;\n$--color-whatsapp-bg: $--color-success-light-5 !default;"],sourceRoot:""}]),o["default"]=r},72458:function(e,o,t){var i=t(34964);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var a=t(39185).Z;a("ed803ea2",i,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=7797.js.map