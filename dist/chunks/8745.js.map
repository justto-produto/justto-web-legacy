{"version":3,"file":"chunks/8745.js","mappings":"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","sources":["webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue","webpack://@projuris/justto-web/src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue?4ba3","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue?dc0d","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue?53ff","webpack://@projuris/justto-web/./src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue?bf9e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"visible\":_vm.visible,\"title\":\"Exportar disputa\",\"custom-class\":\"export-ticket-modal\",\"append-to-body\":\"\",\"fullscreen\":\"\"},on:{\"update:visible\":_vm.toggleExportTicketModalVisible}},[(_vm.progress < 100)?_c('el-progress',{attrs:{\"percentage\":_vm.progress,\"color\":\"#9461f7\",\"type\":\"dashboard\"}}):_vm._e(),_c('vue-html2pdf',{ref:\"html2Pdf\",attrs:{\"show-layout\":\"\",\"paginate-elements-by-height\":1400,\"filename\":_vm.filename,\"pdf-quality\":2,\"html-to-pdf-options\":_vm.htmlOptions,\"margin\":0,\"manual-pagination\":\"\",\"pdf-content-width\":\"100%\",\"pdf-format\":\"a4\",\"pdf-orientation\":\"portrait\"},on:{\"progress\":_vm.setProgress,\"hasDownloaded\":_vm.handleClose}},[(_vm.visible)?_c('section',{attrs:{\"slot\":\"pdf-content\"},slot:\"pdf-content\"},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"padding\":\"0px 16px\"}},[_c('OverviewResume'),_c('OmnichannelResume')],1)]):_vm._e()])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :visible=\"visible\"\n    title=\"Exportar disputa\"\n    custom-class=\"export-ticket-modal\"\n    append-to-body\n    fullscreen\n    @update:visible=\"toggleExportTicketModalVisible\"\n  >\n    <el-progress\n      v-if=\"progress < 100\"\n      :percentage=\"progress\"\n      color=\"#9461f7\"\n      type=\"dashboard\"\n    />\n    <vue-html2pdf\n      ref=\"html2Pdf\"\n      show-layout\n      :paginate-elements-by-height=\"1400\"\n      :filename=\"filename\"\n      :pdf-quality=\"2\"\n      :html-to-pdf-options=\"htmlOptions\"\n      :margin=\"0\"\n      manual-pagination\n      pdf-content-width=\"100%\"\n      pdf-format=\"a4\"\n      pdf-orientation=\"portrait\"\n      @progress=\"setProgress\"\n      @hasDownloaded=\"handleClose\"\n    >\n      <section\n        v-if=\"visible\"\n        slot=\"pdf-content\"\n      >\n        <div style=\"display: flex; flex-direction: column; padding: 0px 16px;\">\n          <OverviewResume />\n          <OmnichannelResume />\n        </div>\n      </section>\n    </vue-html2pdf>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\n\nexport default {\n  components: {\n    OmnichannelResume: () => import('./omnichannel/OmnichannelResume'),\n    OverviewResume: () => import('./overview/OverviewResume')\n  },\n\n  data: () => ({\n    progress: 0\n  }),\n\n  computed: {\n    ...mapGetters({\n      visible: 'getExportTicketModalVisible',\n      activeTab: 'getActiveTab',\n      width: 'getWindowWidth'\n    }),\n\n    tabHaveMessages() {\n      return ['MESSAGES', 'OCCURRENCES'].includes(this.activeTab)\n    },\n\n    tab() {\n      switch (this.activeTab) {\n        case 'MESSAGES':\n          return this.$tc('negotiation.ticket.omnichannel.editor.tab.message', 1)\n        case 'NOTES':\n          return this.$tc('negotiation.ticket.omnichannel.editor.tab.note', 1)\n        case 'OCCURRENCES':\n          return this.$tc('negotiation.ticket.omnichannel.editor.tab.occurrence', 1)\n      }\n      return ''\n    },\n\n    filename() {\n      return `JUSTTO - Negociação - #${this.$route.params.id} - ${this.tab}`\n    },\n\n    htmlOptions() {\n      return {\n        filename: this.filename,\n        jsPDF: { format: 'a4', orientation: 'portrait' }\n      }\n    }\n  },\n\n  watch: {\n    visible(isVisible) {\n      if (isVisible) {\n        this.progress = 0\n        if (this.tabHaveMessages) {\n          Promise.all([\n            this.resetOccurrences()\n          ]).then(() => {\n            this.setProgress(10)\n            this.getAllOccurrences(this.$route.params.id).then(({ content: occurrences }) => {\n              Promise.all(\n                occurrences.filter(\n                  ({ id, interaction }) => id && interaction?.message?.messageId\n                ).map(\n                  ({ interaction }) => this.getFullMessage(interaction?.message?.messageId)\n                )\n              )\n            }).then(() => this.setProgress(50)).finally(() => this.startPrint())\n          })\n        } else {\n          this.startPrint()\n        }\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'toggleExportTicketModalVisible',\n      'getAllOccurrences',\n      'resetOccurrences',\n      'getFullMessage',\n      'getOccurrences'\n    ]),\n\n    startPrint() {\n      this.$nextTick().then(() => {\n        setTimeout(this.print, 2500)\n      })\n    },\n\n    print() {\n      if (this.visible) {\n        this.$refs.html2Pdf.generatePdf()\n      }\n    },\n\n    handleClose() {\n      if (this.tabHaveMessages) {\n        this.resetOccurrences()\n        this.getOccurrences(this.$route.params.id).finally(() => this.toggleExportTicketModalVisible(false))\n      } else {\n        this.toggleExportTicketModalVisible(false)\n      }\n    },\n\n    setProgress(progress) {\n      this.progress = progress\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '~projuris-acordos-theme/src/common/colors';\n\n.export-ticket-modal {\n  position: relative;\n\n  .el-dialog__body {\n    .el-progress {\n      position: absolute;\n      z-index: 99999;\n      bottom: 0;\n      right: 0;\n    }\n\n    .vue-html2pdf {\n      .layout-container {\n        background-color: $--color-white;\n\n        .content-wrapper {\n          width: 100% !important;\n\n          section {\n            max-width: 80vw;\n            margin: 0px auto;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TicketResumeDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TicketResumeDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TicketResumeDialog.vue?vue&type=template&id=58bb7ff2&\"\nimport script from \"./TicketResumeDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./TicketResumeDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TicketResumeDialog.vue?vue&type=style&index=0&id=58bb7ff2&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".export-ticket-modal{position:relative}.export-ticket-modal .el-dialog__body .el-progress{position:absolute;z-index:99999;bottom:0;right:0}.export-ticket-modal .el-dialog__body .vue-html2pdf .layout-container{background-color:#fff}.export-ticket-modal .el-dialog__body .vue-html2pdf .layout-container .content-wrapper{width:100%!important}.export-ticket-modal .el-dialog__body .vue-html2pdf .layout-container .content-wrapper section{max-width:80vw;margin:0 auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/main/negotiation/partials/ticket/TicketResumeDialog.vue\",\"webpack://./node_modules/projuris-acordos-theme/src/common/colors.scss\"],\"names\":[],\"mappings\":\"AAGA,qBACE,iBAAA,CAGE,mDACE,iBAAA,CACA,aAAA,CACA,QAAA,CACA,OAAA,CAIA,sEACE,qBCbQ,CDeR,uFACE,oBAAA,CAEA,+FACE,cAAA,CACA,aAAA\",\"sourcesContent\":[\"\\n@import '~projuris-acordos-theme/src/common/colors';\\n\\n.export-ticket-modal {\\n  position: relative;\\n\\n  .el-dialog__body {\\n    .el-progress {\\n      position: absolute;\\n      z-index: 99999;\\n      bottom: 0;\\n      right: 0;\\n    }\\n\\n    .vue-html2pdf {\\n      .layout-container {\\n        background-color: $--color-white;\\n\\n        .content-wrapper {\\n          width: 100% !important;\\n\\n          section {\\n            max-width: 80vw;\\n            margin: 0px auto;\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n\",\"/* Colors\\n-------------------------- */\\n\\n$--color-white: #fff !default;\\n$--color-black: #424242 !default;\\n$--color-gray: #979797 !default;\\n$--color-gray-light-1: mix($--color-white, $--color-gray, 10%) !default;\\n$--color-light-gray: #f3f4f5 !default;\\n$--color-whatsapp: #075E54 !default;\\n\\n$--pj-color-darker-blue: #0A0022 !default;\\n$--pj-color-dark-blue: #280BA0 !default;\\n$--pj-color-blue: #0756e4 !default;\\n$--pj-color-light-blue: #018EF0 !default;\\n$--pj-color-lighter-blue: #30A9FB !default;\\n$--pj-color-white-blue: #F0F9FE !default;\\n$--pj-color-disabled-blue: #9ad2f9 !default;\\n\\n$-pg-color-overlay: #19415F !default;\\n\\n$--pj-color-red: #CC4148 !default;\\n$--pj-color-light-red: #EC767C !default;\\n$--pj-color-disable-red: #FFF2F3 !default;\\n\\n$--color-primary: $--pj-color-blue !default;\\n$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default;\\n$--color-primary-light-2: mix($--color-white, $--color-primary, 20%) !default;\\n$--color-primary-light-3: mix($--color-white, $--color-primary, 30%) !default;\\n$--color-primary-light-4: mix($--color-white, $--color-primary, 40%) !default;\\n$--color-primary-light-5: mix($--color-white, $--color-primary, 50%) !default;\\n$--color-primary-light-6: mix($--color-white, $--color-primary, 60%) !default;\\n$--color-primary-light-7: mix($--color-white, $--color-primary, 70%) !default;\\n$--color-primary-light-8: mix($--color-white, $--color-primary, 80%) !default;\\n$--color-primary-light-9: mix($--color-white, $--color-primary, 90%) !default;\\n\\n$--color-secondary: $--pj-color-light-blue !default;\\n$--color-secondary-light-1: mix($--color-white, $--color-secondary, 10%) !default;\\n$--color-secondary-light-2: mix($--color-white, $--color-secondary, 20%) !default;\\n$--color-secondary-light-3: mix($--color-white, $--color-secondary, 30%) !default;\\n$--color-secondary-light-4: mix($--color-white, $--color-secondary, 40%) !default;\\n$--color-secondary-light-5: mix($--color-white, $--color-secondary, 50%) !default;\\n$--color-secondary-light-6: mix($--color-white, $--color-secondary, 60%) !default;\\n$--color-secondary-light-7: mix($--color-white, $--color-secondary, 70%) !default;\\n$--color-secondary-light-8: mix($--color-white, $--color-secondary, 80%) !default;\\n$--color-secondary-light-9: mix($--color-white, $--color-secondary, 90%) !default;\\n\\n$--color-primary-dark: $--pj-color-dark-blue !default;\\n$--color-success: #14CC30 !default;\\n$--color-warning: #FFC900 !default;\\n$--color-danger: #FF4B54 !default;\\n$--color-info: #2FBBEC !default;\\n\\n$--color-success-light-1: mix($--color-white, $--color-success, 10%) !default;\\n$--color-success-light-5: mix($--color-white, $--color-success, 50%) !default;\\n$--color-warning-light-5: mix($--color-white, $--color-warning, 50%) !default;\\n$--color-danger-light-5: mix($--color-white, $--color-danger, 50%) !default;\\n$--color-danger-light-3: mix($--color-white, $--color-danger, 30%) !default;\\n$--color-info-light-5: mix($--color-white, $--color-info, 50%) !default;\\n\\n$--color-success-light: mix($--color-white, $--color-success, 80%) !default;\\n$--color-warning-light: mix($--color-white, $--color-warning, 80%) !default;\\n$--color-danger-light: mix($--color-white, $--color-danger, 80%) !default;\\n$--color-info-light: mix($--color-white, $--color-info, 80%) !default;\\n\\n$--color-success-lighter: mix($--color-white, $--color-success, 90%) !default;\\n$--color-warning-lighter: mix($--color-white, $--color-warning, 90%) !default;\\n$--color-danger-lighter: mix($--color-white, $--color-danger, 90%) !default;\\n$--color-info-lighter: mix($--color-white, $--color-info, 90%) !default;\\n\\n$--color-text-primary: $--color-black !default;\\n$--color-text-secondary: $--color-gray !default;\\n\\n$--color-nps-promoter: #14CC30 !default;\\n$--color-nps-neutral: #979797 !default;\\n$--color-nps-detractor: #FF4B54 !default;\\n\\n$--color-negotiator-bg: #9461f74f !default;\\n$--color-email-bg: $--color-info-light !default;\\n$--color-whatsapp-bg: $--color-success-light-5 !default;\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TicketResumeDialog.vue?vue&type=style&index=0&id=58bb7ff2&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0a2386ac\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","attrs","visible","on","toggleExportTicketModalVisible","progress","_e","ref","filename","htmlOptions","setProgress","handleClose","slot","staticStyle","staticRenderFns","components","OmnichannelResume","OverviewResume","data","computed","mapGetters","activeTab","width","tabHaveMessages","includes","tab","$tc","$route","params","id","jsPDF","format","orientation","watch","isVisible","Promise","all","resetOccurrences","then","getAllOccurrences","content","occurrences","filter","interaction","message","messageId","map","getFullMessage","finally","startPrint","methods","mapActions","$nextTick","setTimeout","print","$refs","html2Pdf","generatePdf","getOccurrences","component","___CSS_LOADER_EXPORT___","push","module","__esModule","default","locals","exports","add"],"sourceRoot":""}