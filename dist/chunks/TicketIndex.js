(self["webpackChunk_projuris_justto_web"]=self["webpackChunk_projuris_justto_web"]||[]).push([[7350],{48067:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("section",{staticClass:"ticket-container"},[t("section",{staticClass:"ticket-container__omnichannel"},[t("TicketHeader",{attrs:{"show-overview":e.showOverview},on:{"toggle-show-overview":e.toggleShowOverview}}),t("Omnichannel",{attrs:{"show-overview":e.showOverview}}),e.width<=1200&&e.showOverview?t("div",{staticClass:"ticket-container__omnichannel-overlay"}):e._e()],1),t("section",{staticClass:"ticket-container__overview",class:{"ticket-container__overview--active":e.showOverview}},[t("Overview",{attrs:{"show-overview":e.showOverview},on:{"toggle-show-overview":e.toggleShowOverview}})],1),t("TicketResume")],1)},s=[],a=i(32715),o=i(40917),c=i(90408),r={computed:{...(0,c.Se)(["getDisputesNeedsRestart"])},methods:{...(0,c.nv)(["sendDisputeAction"]),...(0,c.OI)(["deleteRestartDisputeFlag"])},beforeRouteLeave(e,t,i){this.getDisputesNeedsRestart[this.$route.params?.id]?this.$confirm("Detectamos alteração nos dados da disputa. Deseja reiniciar a disputa?","Reiniciar disputa",{confirmButtonText:"Sim",cancelButtonText:"Não",type:"warning",center:!0}).then((()=>{this.sendDisputeAction({action:"restart-engagement",disputeId:this.$route.params?.id}).then((()=>{this.$jusNotification({title:"Yay!",message:"Disputa reiniciada com sucesso.",type:"success"})})).catch((e=>this.$jusNotification({error:e}))).finally((()=>{this.deleteRestartDisputeFlag(this.$route.params?.id)}))})).catch((()=>{this.deleteRestartDisputeFlag(this.$route.params?.id)})).finally(i):i()}},A={name:"Ticket",components:{Omnichannel:()=>i.e(8993).then(i.bind(i,88993)),Overview:()=>i.e(9367).then(i.bind(i,29367)),TicketHeader:()=>i.e(9290).then(i.bind(i,99290)),TicketResume:()=>i.e(8745).then(i.bind(i,58745))},mixins:[r],data:()=>({showOverview:!1}),computed:{...(0,c.Se)({isGhost:"ghostMode",width:"getWindowWidth",authorization:"accountToken",isJusttoAdmin:"isJusttoAdmin",workspace:"workspaceSubdomain",loggedPersonId:"loggedPersonId",backups:"getMessagesBackupById"}),socketHeaders(){return{workspace:this.workspace,authorization:this.authorization}}},$route:{deep:!0,handler:"resetTicket"},mounted(){this.fetchData(Number(this.$route.params.id)),o.YB.$on(a["default"].TICKET_CHANGE.callback,this.fetchData),o.YB.$on(a["default"].TICKET_WEB_SOCKET_DISCONNECT.callback,this.socketAction)},beforeDestroy(){o.YB.$off(a["default"].TICKET_CHANGE.callback,this.fetchData),o.YB.$off(a["default"].TICKET_WEB_SOCKET_DISCONNECT.callback,this.socketAction)},methods:{...(0,c.nv)(["setTicketVisualized","getTicketOverview","getDisputeTags","getLastTicketOffers","cleanRecentMessages","getAssociatedContacts","getQuickReplyTemplates","getTicketOverviewParties","getTicketMetadata","setDisputeProperty","getTicketOverviewInfo","setAccountProperty","setEditorBackup","resetRecipients"]),async fetchData(e){this.setAccountProperty({PREFERRED_INTERFACE:"NEGOTIATION"}),this.socketAction("subscribe",e),await this.cleanRecentMessages(),this.getTicketOverview(e).catch((e=>this.$jusNotification({error:e}))).finally((()=>{this.backups(e).tab||this.setEditorBackup()})),this.getTicketOverviewInfo(e),this.getTicketOverviewParties(e).then((()=>{this.getTicketMetadata(e).then((()=>{this.getAssociatedContacts(e).then((t=>{"MAIS TARDE"===t["CONTATOS ASSOCIADOS"]&&this.setDisputeProperty({key:"CONTATOS ASSOCIADOS",disputeId:e,value:"NAO"}).then((()=>{this.getAssociatedContacts(e)}))}))}))})),this.getDisputeTags(e),this.getLastTicketOffers(e),this.getQuickReplyTemplates(e),this.setTicketVisualized({visualized:!0,disputeId:Number(e),anonymous:this.isJusttoAdmin&&this.isGhost})},socketAction(e,t){if(this.workspace&&this.loggedPersonId){const i="/topic/"+this.workspace+"/"+this.loggedPersonId+"/dispute/"+t+"/occurrence";this.$socket.emit(e,{headers:this.socketHeaders,channel:i})}},toggleShowOverview(){this.showOverview=!this.showOverview},resetTicket(){this.resetRecipients()}}},h=A,d=(i(96055),i(1001)),l=(0,d.Z)(h,n,s,!1,null,"6ba8f5bf",null),u=l.exports},68035:function(e,t,i){"use strict";i.r(t);var n=i(87537),s=i.n(n),a=i(23645),o=i.n(a),c=o()(s());c.push([e.id,".ticket-container[data-v-6ba8f5bf]{display:flex;position:relative;overflow:hidden;height:100%}.ticket-container .ticket-container__omnichannel[data-v-6ba8f5bf]{display:flex;position:relative;flex-direction:column;flex:1;height:100%}.ticket-container .ticket-container__omnichannel .ticket-container__omnichannel-overlay[data-v-6ba8f5bf]{position:absolute;background-color:#000;opacity:.75;width:100%;height:100%;z-index:10}.ticket-container .ticket-container__overview[data-v-6ba8f5bf]{width:310px;max-width:310px;height:100%;background-color:#fff;border-left:1px solid #f3f4f5;transition:.6s cubic-bezier(.19,1,.22,1)}.ticket-container .ticket-container__overview--active[data-v-6ba8f5bf]{width:0}@media(max-width:1200px){.ticket-container[data-v-6ba8f5bf]{overflow-x:hidden}.ticket-container .ticket-container__overview[data-v-6ba8f5bf]{position:absolute;z-index:100;right:0;transform:translateX(100%);width:300px;max-width:300px}.ticket-container .ticket-container__overview--active[data-v-6ba8f5bf]{transform:translateX(0)}}@media(max-width:600px){.ticket-container .ticket-container__overview[data-v-6ba8f5bf]{width:calc(100% - 48px)}}","",{version:3,sources:["webpack://./src/views/main/negotiation/partials/ticket/Ticket.vue"],names:[],mappings:"AAGA,mCACE,YAAA,CACA,iBAAA,CACA,eAAA,CACA,WAAA,CAEA,kEACE,YAAA,CACA,iBAAA,CACA,qBAAA,CACA,MAAA,CACA,WAAA,CAEA,yGACE,iBAAA,CACA,qBAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CACA,UAAA,CAIJ,+DACE,WAAA,CACA,eAAA,CACA,WAAA,CACA,qBAAA,CACA,6BAAA,CACA,wCAAA,CACA,uEAAA,OAAA,CAIJ,yBACE,mCACE,iBAAA,CAEA,+DACE,iBAAA,CACA,WAAA,CACA,OAAA,CACA,0BAAA,CACA,WAAA,CACA,eAAA,CAEA,uEACE,uBAAA,CAAA,CAMR,wBAEI,+DACE,uBAAA,CAAA",sourcesContent:["\n@import '~projuris-acordos-theme/src/common/colors.scss';\n\n.ticket-container {\n  display: flex;\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n\n  .ticket-container__omnichannel {\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    flex: 1;\n    height: 100%;\n\n    .ticket-container__omnichannel-overlay {\n      position: absolute;\n      background-color: #000000;\n      opacity: .75;\n      width: 100%;\n      height: 100%;\n      z-index: 10;\n    }\n  }\n\n  .ticket-container__overview {\n    width: 310px;\n    max-width: 310px;\n    height: 100%;\n    background-color: #fff;\n    border-left: 1px solid $--color-light-gray;\n    transition: .6s cubic-bezier(0.19, 1, 0.22, 1);\n    &--active { width: 0; }\n  }\n}\n\n@media (max-width: 1200px) {\n  .ticket-container {\n    overflow-x: hidden;\n\n    .ticket-container__overview {\n      position: absolute;\n      z-index: 100;\n      right: 0;\n      transform: translateX(100%);\n      width: 300px;\n      max-width: 300px;\n\n      &--active {\n        transform: translateX(0);\n      }\n    }\n  }\n}\n\n@media (max-width: 600px) {\n  .ticket-container {\n    .ticket-container__overview {\n      width: calc(100% - 48px);\n    }\n  }\n}\n\n"],sourceRoot:""}]),t["default"]=c},96055:function(e,t,i){var n=i(68035);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var s=i(39185).Z;s("1ff49f0d",n,!0,{sourceMap:!0,shadowMode:!1})}}]);
//# sourceMappingURL=TicketIndex.js.map