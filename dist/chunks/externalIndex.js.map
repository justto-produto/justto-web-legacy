{"version":3,"file":"chunks/externalIndex.js","mappings":"mMAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,eAAe,CAACA,EAAG,WAAW,CAACE,YAAY,eAAeC,MAAM,CAAC,MAAQ,QAAQ,CAAGL,EAAIM,WAAWC,OAA+sFL,EAAG,UAAU,CAACM,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOX,EAAIY,YAAaC,WAAW,gBAAgBC,IAAI,gBAAgBV,YAAY,sBAAsBC,MAAM,CAAC,MAAQL,EAAIe,cAAc,MAAQf,EAAIgB,eAAe,iBAAiB,OAAOC,SAAS,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBnB,EAAIoB,gBAAgBC,MAAM,KAAMC,UAAU,IAAI,CAACpB,EAAG,KAAK,CAACE,YAAY,wBAAwB,CAACJ,EAAIuB,GAAG,cAAcrB,EAAG,IAAI,CAACF,EAAIuB,GAAG,4DAA4DrB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,KAAO,2BAA2B,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,YAAY,WAAa,GAAG,cAAc,oBAAoBmB,MAAM,CAACb,MAAOX,EAAIe,cAAcU,uBAAwBC,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIe,cAAe,yBAA0BY,EAAI,EAAEd,WAAW,yCAAyCb,EAAI6B,GAAI7B,EAAIM,YAAY,SAASwB,EAAEC,GAAO,OAAO7B,EAAG,YAAY,CAAC8B,IAAID,EAAM1B,MAAM,CAAC,MAAQ0B,EAAM,MAAQD,EAAEG,UAAUC,SAAS,cAAc,0BAA0B,IAAG,IAAI,GAAGhC,EAAG,YAAY,CAACE,YAAY,wBAAwBC,MAAM,CAAC,cAAc,SAAS,KAAO,UAAU,cAAc,qBAAqB,CAACL,EAAIuB,GAAG,2BAA2BrB,EAAG,MAAMA,EAAG,MAAOF,EAAImC,OAAOC,QAAQC,cAAenC,EAAG,YAAY,CAACE,YAAY,wBAAwBC,MAAM,CAAC,KAAO,YAAY,KAAO,uBAAuBiC,GAAG,CAAC,MAAQ,SAASpB,GAAQ,OAAOlB,EAAIuC,QAAQC,KAAK,cAAc,IAAI,CAACxC,EAAIuB,GAAG,6BAA6BvB,EAAIyC,MAAM,GAAnqIvC,EAAG,UAAU,CAACM,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOX,EAAIY,YAAaC,WAAW,gBAAgBC,IAAI,YAAYV,YAAY,sBAAsBC,MAAM,CAAC,uBAAuBL,EAAI0C,YAAY,MAAQ1C,EAAI2C,UAAU,MAAQ3C,EAAI4C,MAAM,iBAAiB,OAAO3B,SAAS,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBnB,EAAI6C,QAAQxB,MAAM,KAAMC,UAAU,IAAI,CAACpB,EAAG,KAAK,CAACE,YAAY,+BAA+B,CAACJ,EAAIuB,GAAG,oBAAoBrB,EAAG,WAAW,CAACM,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOX,EAAI8C,UAAWjC,WAAW,cAAcR,MAAM,CAAC,MAAQL,EAAI+C,aAAa,KAAO,QAAQ,cAAc,iBAAiBT,GAAG,CAAC,MAAQ,SAASpB,GAAQlB,EAAI8C,WAAY,CAAK,KAAK5C,EAAG,WAAW,CAACM,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOX,EAAIgD,YAAanC,WAAW,gBAAgBR,MAAM,CAAC,MAAQ,gCAAgC,KAAO,UAAU,cAAc,oBAAoBiC,GAAG,CAAC,MAAQ,SAASpB,GAAQlB,EAAIgD,aAAc,CAAK,KAAK9C,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAO,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,cAAc,cAAc,eAAemB,MAAM,CAACb,MAAOX,EAAI2C,UAAUM,MAAOvB,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAI2C,UAAW,QAAShB,EAAI,EAAEd,WAAW,sBAAsB,GAAGX,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAO,aAAa,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOL,EAAIkD,aAAa,KAAO,iBAAiB,cAAc,kBAAkB1B,MAAM,CAACb,MAAOX,EAAI2C,UAAUQ,SAAUzB,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAI2C,UAAW,WAAYhB,EAAI,EAAEd,WAAW,wBAAwBX,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,WAAW,CAACE,YAAY,+BAA+BC,MAAM,CAAC,KAAOL,EAAIoD,aAAe,OAAS,OAAOnC,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIqD,mBAAmBhC,MAAM,KAAMC,UAAU,KAAKpB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,SAAW,KAAK,cAAc,mBAAmBiC,GAAG,CAAC,MAAQ,SAASpB,GAAQ,OAAOlB,EAAIuC,QAAQC,KAAK,kBAAkB,IAAI,CAACxC,EAAIuB,GAAG,4BAA4B,IAAI,GAAGrB,EAAG,YAAY,CAACE,YAAY,wBAAwBC,MAAM,CAAC,cAAc,SAAS,KAAO,UAAU,cAAc,iBAAiB,CAACL,EAAIuB,GAAG,cAAcrB,EAAG,SAAS,CAACE,YAAY,uBAAuB,CAACJ,EAAIuB,GAAG,6CAA6CrB,EAAG,IAAI,CAACG,MAAM,CAAC,cAAc,YAAY,KAAO,uCAAuC,OAAS,WAAW,CAACL,EAAIuB,GAAG,oBAAoBvB,EAAIuB,GAAG,aAAarB,EAAG,IAAI,CAACG,MAAM,CAAC,cAAc,iBAAiB,KAAO,+CAA+C,OAAS,WAAW,CAACL,EAAIuB,GAAG,kCAAkCvB,EAAIuB,GAAG,SAASrB,EAAG,IAAI,CAACG,MAAM,CAAC,cAAc,iBAAiB,KAAO,8CAA8C,OAAS,WAAW,CAACL,EAAIuB,GAAG,6BAA6BvB,EAAIuB,GAAG,SAAS,IAAm+C,GAAGrB,EAAG,UAAU,CAACE,YAAY,sBAAsB,CAACF,EAAG,6BAA6B,IAAI,IAAI,EAC59I,EACIoD,EAAkB,G,8DCqKtB,GACA7C,KAAA,QAEA8C,WAAA,CACAC,yBAAAA,IAAA,iCAGAC,IAAAA,GACA,OACAf,YAAA,kBACAgB,aAAA,EACApD,WAAA,GACA8C,cAAA,EACAN,WAAA,EACAE,aAAA,EACApC,aAAA,EACAmC,aAAA,GACAJ,UAAA,CACAM,MAAA,GACAE,SAAA,IAEAP,MAAA,CACAK,MAAA,CACA,CAAAU,UAAA,EAAAC,QAAA,oBAAAC,QAAA,UACA,CAAAC,KAAA,QAAAH,UAAA,EAAAC,QAAA,0BAAAC,QAAA,aAEAV,SAAA,CACA,CAAAQ,UAAA,EAAAC,QAAA,oBAAAC,QAAA,YAGA9C,cAAA,CACAU,uBAAA,IAEAT,eAAA,CACAS,uBACA,EAAAkC,UAAA,EAAAC,QAAA,oBAAAC,QAAA,YAGA,EAEAE,SAAA,CACAb,YAAAA,GACA,YAAAE,aAAA,iBACA,GAGAY,WAAAA,GACA,MAAAC,EAAAC,OAAAC,KAAAC,cAAAC,QAAArC,GAAAA,EAAAsC,WAAA,kBAAA/D,OAAA,EAEA0D,KAAAM,EAAAA,EAAAA,MACA,KAAAC,kBACA,KAAArC,OAAAC,QAAAqC,YACA,KAAAtC,OAAAuC,SAAA,UAGAC,SAAAC,iBAAA,kDAAAC,SAAAC,GAAAA,EAAAC,SACA,EAEAC,OAAAA,GACA,KAAAC,OAAAC,MAAAC,OACA,KAAAhD,OAAAuC,SAAA,gBAAAO,OAAAC,MAAAC,OACAC,MAAA,KACA,KAAApC,aAAA,KAEAqC,SAAA,KACA,KAAA9C,QAAAC,KAAA,WAGA,EAEA8C,QAAA,KACAC,EAAAA,EAAAA,IAAA,CACAC,UAAA,kBACAC,mBAAA,uBAGAC,eAAAA,GACA,MAAAC,EAAA,CACA,kDACA,sGACA,oDAEAC,EAAAD,EAAA,KAAAjC,aAAA,GAEA,OADA,KAAAA,cAAA,EACAkC,CACA,EAEA/C,OAAAA,GACA,KAAAgD,MAAAlD,UAAAmD,UAAAC,IACA,IAAAA,EAiCA,SAhCA,KAAAjD,WAAA,EACA,KAAAlC,aAAA,EAEA,KAAAuB,OAAAuC,SAAA,aAAA/B,WACAyC,MAAA,KACA,KAAAjD,OAAAuC,SAAA,aAAAU,KAAA,KAAAZ,iBAAAwB,OAAAC,IACA,KAAAC,iBAAA,CAAAD,UACA,KAAArF,aAAA,IACA,IAEAoF,OAAAC,IACA7B,aAAA+B,WAAA,aACAF,EAAAG,UAAA,MAAAH,EAAAG,UAAAC,QAAA,wBAAAJ,EAAAG,SAAA3C,KAAA6C,KAEA,2BAAAL,GAAAG,UAAA3C,MAAA8C,QACA,KAAAL,iBAAA,CACAM,MAAA,OACA5C,QAAA,oCACAE,KAAA,UAEA,KAAAvB,QAAAC,KAAA,CACAiE,KAAA,kBACAvB,MAAA,CAAAjC,MAAA,KAAAN,UAAAM,WAGA,KAAAP,YAAA,KAAAgD,kBAEA,KAAA9E,aAAA,EACA,KAAAsF,iBAAA,CAAAD,WAfA,KAAAS,WAAA,4CAgBA,GAIA,GAEA,EAEAlC,eAAAA,GACA,WAAAmC,SAAA,CAAAC,EAAAC,KACA,KAAA1E,OAAAuC,SAAA,eAAAU,MAAAgB,IAGA,GAFA,KAAAU,YAAA,kBAEA5C,OAAAC,KAAAC,cAAA2C,SAAA,gBACA,UAAAC,EAAA,IAAAC,GAAAC,KAAAC,MAAA/C,aAAAgD,QAAA,gBAEAC,EAAAjB,EAAAkB,WAAA,EAAArF,WAAAsF,SAAAC,OAAAD,KAAAC,OAAAR,KAEAK,GAAA,GAAAJ,EACA,KAAAQ,YAAArC,MAAA,KACA,KAAArE,cAAAU,uBAAA4F,EACA,KAAAjG,iBAAA,KAGAgD,aAAA+B,WAAA,eACA,KAAAuB,SAAA,qEACAC,oBAAA,EACAC,mBAAA,EACAC,kBAAA,KACAC,kBAAA,EACAC,WAAA,EACAjE,KAAA,UACAkE,QAAA,IAGA,CAEA5B,EAAA7F,OAAA,GACA,KAAAK,aAAA,EACA,KAAAN,WAAA8F,GACA,IAAAA,EAAA7F,OACA,KAAAmH,SAAA,6HACAO,0BAAA,EACAN,oBAAA,EACAC,mBAAA,EACAC,kBAAA,KACAC,kBAAA,EACAC,WAAA,EACAC,QAAA,IACA5C,MAAA,KACA,KAAAI,UAAA,CACA0C,QAAA,wBACAC,QAAA,uBACAC,QAAA,+BAAAzF,UAAAM,4FAGAoF,SAAAC,QAAA,IAGA,KAAAC,sBAAAnC,EAAA,IAEAQ,EAAAR,EAAA,IACAJ,OAAAC,IACA,KAAAC,iBAAA,CAAAD,UACA,KAAArF,aAAA,EACAiG,EAAAZ,EAAA,GACA,GAEA,EAEA,2BAAAsC,CAAAnC,GAUA,GARA,KAAAU,YAAA,wBACA7E,UAAAmE,EAAAnE,UAAAxB,KACA+H,KAAApC,EAAAnE,UAAAC,WAEAkE,EAAAnE,iBAAA,KAAAE,OAAAsG,OAAA,eAAArC,EAAAnE,iBACA,KAAAwF,YACArB,EAAAsC,SAAA,KAAAvG,OAAAsG,OAAA,aAAArC,EAAAsC,eACA,KAAAjB,YACArB,EAAAuC,OAAA,CACA,KAAAxG,OAAAsG,OAAA,kBAAArC,EAAAuC,QAEA,MAAAC,OAAAC,IAAAzC,EAAAuC,OAAAG,QAAAC,MAAA,EAAAZ,UAAAa,eAAAA,IAAAC,EAAAA,EAAAA,IAAAd,WAEA,KAAAV,YAEA,KAAA7G,aAAA,EACA,KAAAuB,OAAAuC,SAAA,uBACAU,MAAA,KACA,KAAAK,mBAAA,eAAAL,MAAA,EAAA8D,kBACA,MAAAC,EAAAC,eAAAhC,QAAA,YACAgC,eAAAjD,WAAA,YAEA,IAAAkD,EAAA,eAEA,GAAAnF,OAAAC,KAAAC,cAAA2C,SAAA,gBACA,MAAAuC,EAAApC,KAAAC,MAAA/C,aAAAgD,QAAA,gBACAmC,EAAA,IAAAC,gBAAAF,GAAAG,WAEAJ,EAAA,aAAAE,GACA,MACAF,EADAF,EACAjC,KAAAC,MAAAgC,GACAD,IAEA,kBAAA9C,EAAAsC,SAAAE,EAGA,eAFA,KAKA,KAAAhI,aAAA,EACA,KAAA2B,QAAAC,KAAA6G,GAAAjE,MAAAsE,QAAA1D,OAAAC,IACA0D,QAAA1D,MAAA,QAAAA,EAAA,IACAZ,SAAA,KACA,KAAAzE,aAAA,IACA,GACA,IACAoF,OAAAC,IACA0D,QAAA1D,MAAAA,GACA,KAAAS,aACA,KAAApG,WAAA,MACA+E,SAAA,KACA,KAAAzE,aAAA,IAEA,MACA,KAAA2B,QAAAC,KAAA,IAEA,EACApB,eAAAA,GACA,KAAAyE,MAAA9E,cAAA+E,UAAAC,IACA,GAAAA,EAAA,CACA,MAAA6D,EAAA,KAAAtJ,WAAA,KAAAS,cAAAU,wBACAmI,EAAAjB,QAAAiB,EAAAjB,OAAApB,GACA,KAAAgB,sBAAAqB,GAEA,KAAAzH,OAAAuC,SAAA,yBAAAkF,EAAA3H,UAAAsF,IAAAnC,MAAAyE,IACA,KAAA1H,OAAAsG,OAAA,WAAAoB,GACA,KAAArF,kBAAAY,MAAAgB,IACA,KAAAmC,sBAAAnC,EAAA,KAAArF,cAAAU,wBAAA,GACA,GAGA,IAEA,EACA4B,kBAAAA,GACA,KAAAD,cAAA,KAAAA,YACA,EACAsD,UAAAA,CAAA9C,GACA,KAAAb,aAAAa,GAAA,wHAEA,KAAAd,WAAA,EACA,KAAAlC,aAAA,CACA,ICxb8P,I,qBCQ1PkJ,GAAY,OACd,EACA/J,EACAuD,GACA,EACA,KACA,KACA,MAIF,EAAewG,EAAiB,O,wFChB5BC,EAA0B,IAA4B,KAE1DA,EAAwBvH,KAAK,CAACwH,EAAOzC,GAAI,ovBAAqvB,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,gDAAgD,MAAQ,GAAG,SAAW,+RAA+R,eAAiB,CAAC,43BAA43B,WAAa,MAEzjE,c,wBCJA,IAAIa,EAAU,EAAQ,OACnBA,EAAQ6B,aAAY7B,EAAUA,EAAQ8B,SACnB,kBAAZ9B,IAAsBA,EAAU,CAAC,CAAC4B,EAAOzC,GAAIa,EAAS,MAC7DA,EAAQ+B,SAAQH,EAAOI,QAAUhC,EAAQ+B,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYjC,GAAS,EAAM,CAAC,WAAY,EAAK,YAAa,G","sources":["webpack://@projuris/justto-web/./src/views/external/Login.vue","webpack://@projuris/justto-web/src/views/external/Login.vue","webpack://@projuris/justto-web/./src/views/external/Login.vue?3703","webpack://@projuris/justto-web/./src/views/external/Login.vue?0bf6","webpack://@projuris/justto-web/./src/views/external/Login.vue?f86c","webpack://@projuris/justto-web/./src/views/external/Login.vue?971e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"external-view\"},[_c('el-container',[_c('el-aside',{staticClass:\"display-flex\",attrs:{\"width\":\"40%\"}},[(!_vm.workspaces.length)?_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.showLoading),expression:\"showLoading\"}],ref:\"loginForm\",staticClass:\"external-view__form\",attrs:{\"element-loading-text\":_vm.loadingText,\"model\":_vm.loginForm,\"rules\":_vm.rules,\"label-position\":\"top\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.doLogin.apply(null, arguments)}}},[_c('h1',{staticClass:\"external-view__title center\"},[_vm._v(\" Autenticação \")]),_c('el-alert',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showError),expression:\"showError\"}],attrs:{\"title\":_vm.errorMessage,\"type\":\"error\",\"data-testid\":\"login-failure\"},on:{\"close\":function($event){_vm.showError = false}}}),_c('el-alert',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSuccess),expression:\"showSuccess\"}],attrs:{\"title\":\"Cadastro ativado com sucesso!\",\"type\":\"success\",\"data-testid\":\"register-success\"},on:{\"close\":function($event){_vm.showSuccess = false}}}),_c('el-form-item',{attrs:{\"label\":\"Email\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"email\",\"name\":\"login-email\",\"data-testid\":\"login-email\"},model:{value:(_vm.loginForm.email),callback:function ($$v) {_vm.$set(_vm.loginForm, \"email\", $$v)},expression:\"loginForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Senha\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":_vm.passwordType,\"name\":\"login-password\",\"data-testid\":\"login-password\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_c('div',{staticClass:\"el-button--input-float\"},[_c('jus-icon',{staticClass:\"external-view__show-password\",attrs:{\"icon\":_vm.showPassword ? 'hide' : 'eye'},nativeOn:{\"click\":function($event){return _vm.switchShowPassword.apply(null, arguments)}}}),_c('el-button',{attrs:{\"type\":\"text\",\"tabindex\":\"-1\",\"data-testid\":\"forgot-password\"},on:{\"click\":function($event){return _vm.$router.push('forgot-password')}}},[_vm._v(\" Esqueceu sua senha? \")])],1)],1),_c('el-button',{staticClass:\"external-view__submit\",attrs:{\"native-type\":\"submit\",\"type\":\"primary\",\"data-testid\":\"submit-login\"}},[_vm._v(\" Entrar \")]),_c('el-row',{staticClass:\"external-view__info\"},[_vm._v(\" Ao clicar em Entrar, eu concordo com os \"),_c('a',{attrs:{\"data-testid\":\"use-terms\",\"href\":\"https://justto.com.br/termos-de-uso/\",\"target\":\"_blank\"}},[_vm._v(\" Termos de Uso\")]),_vm._v(\", com os \"),_c('a',{attrs:{\"data-testid\":\"contract-terms\",\"href\":\"https://justto.com.br/termos-de-contratacao/\",\"target\":\"_blank\"}},[_vm._v(\"Termos Gerais de Contratação\")]),_vm._v(\" e a \"),_c('a',{attrs:{\"data-testid\":\"contract-terms\",\"href\":\"https://justto.com.br/politica-privacidade/\",\"target\":\"_blank\"}},[_vm._v(\"Política de Privacidade\")]),_vm._v(\". \")])],1):_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.showLoading),expression:\"showLoading\"}],ref:\"workspaceForm\",staticClass:\"external-view__form\",attrs:{\"model\":_vm.workspaceForm,\"rules\":_vm.workspaceRules,\"label-position\":\"top\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.selectWorkspace.apply(null, arguments)}}},[_c('h1',{staticClass:\"external-view__title\"},[_vm._v(\" Equipe \")]),_c('p',[_vm._v(\"Selecione uma de suas equipes de trabalho para entrar.\")]),_c('el-form-item',{attrs:{\"label\":\"Equipe\",\"prop\":\"selectedWorkspaceIndex\"}},[_c('el-select',{attrs:{\"placeholder\":\"Selecione\",\"filterable\":\"\",\"data-testid\":\"select-workspace\"},model:{value:(_vm.workspaceForm.selectedWorkspaceIndex),callback:function ($$v) {_vm.$set(_vm.workspaceForm, \"selectedWorkspaceIndex\", $$v)},expression:\"workspaceForm.selectedWorkspaceIndex\"}},_vm._l((_vm.workspaces),function(w,index){return _c('el-option',{key:index,attrs:{\"value\":index,\"label\":w.workspace.teamName,\"data-testid\":\"select-workspace-item\"}})}),1)],1),_c('el-button',{staticClass:\"external-view__submit\",attrs:{\"native-type\":\"submit\",\"type\":\"primary\",\"data-testid\":\"submit-workspace\"}},[_vm._v(\" Selecionar e entrar \")]),_c('br'),_c('br'),(_vm.$store.getters.isJusttoAdmin)?_c('el-button',{staticClass:\"external-view__submit\",attrs:{\"type\":\"secondary\",\"icon\":\"el-icon-s-operation\"},on:{\"click\":function($event){return _vm.$router.push('admin-panel')}}},[_vm._v(\" Painel administrativo \")]):_vm._e()],1)],1),_c('el-main',{staticClass:\"hidden-sm-and-down\"},[_c('ProjusrisSidenavExternal')],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"external-view\">\n    <el-container>\n      <el-aside\n        class=\"display-flex\"\n        width=\"40%\"\n      >\n        <el-form\n          v-if=\"!workspaces.length\"\n          ref=\"loginForm\"\n          v-loading=\"showLoading\"\n          :element-loading-text=\"loadingText\"\n          :model=\"loginForm\"\n          :rules=\"rules\"\n          label-position=\"top\"\n          class=\"external-view__form\"\n          @submit.native.prevent=\"doLogin\"\n        >\n          <h1 class=\"external-view__title center\">\n            Autenticação\n          </h1>\n\n          <el-alert\n            v-show=\"showError\"\n            :title=\"errorMessage\"\n            type=\"error\"\n            data-testid=\"login-failure\"\n            @close=\"showError = false\"\n          />\n          <el-alert\n            v-show=\"showSuccess\"\n            title=\"Cadastro ativado com sucesso!\"\n            type=\"success\"\n            data-testid=\"register-success\"\n            @close=\"showSuccess = false\"\n          />\n          <el-form-item\n            label=\"Email\"\n            prop=\"email\"\n          >\n            <el-input\n              v-model=\"loginForm.email\"\n              type=\"email\"\n              name=\"login-email\"\n              data-testid=\"login-email\"\n            />\n          </el-form-item>\n          <el-form-item\n            label=\"Senha\"\n            prop=\"password\"\n          >\n            <el-input\n              v-model=\"loginForm.password\"\n              :type=\"passwordType\"\n              name=\"login-password\"\n              data-testid=\"login-password\"\n            />\n            <div class=\"el-button--input-float\">\n              <jus-icon\n                :icon=\"showPassword ? 'hide' : 'eye'\"\n                class=\"external-view__show-password\"\n                @click.native=\"switchShowPassword\"\n              />\n              <el-button\n                type=\"text\"\n                tabindex=\"-1\"\n                data-testid=\"forgot-password\"\n                @click=\"$router.push('forgot-password')\"\n              >\n                Esqueceu sua senha?\n              </el-button>\n            </div>\n          </el-form-item>\n          <el-button\n            native-type=\"submit\"\n            class=\"external-view__submit\"\n            type=\"primary\"\n            data-testid=\"submit-login\"\n          >\n            Entrar\n          </el-button>\n          <el-row class=\"external-view__info\">\n            Ao clicar em Entrar, eu concordo com os\n            <a\n              data-testid=\"use-terms\"\n              href=\"https://justto.com.br/termos-de-uso/\"\n              target=\"_blank\"\n            > Termos de Uso</a>, com os\n            <a\n              data-testid=\"contract-terms\"\n              href=\"https://justto.com.br/termos-de-contratacao/\"\n              target=\"_blank\"\n            >Termos Gerais de Contratação</a> e a\n            <a\n              data-testid=\"contract-terms\"\n              href=\"https://justto.com.br/politica-privacidade/\"\n              target=\"_blank\"\n            >Política de Privacidade</a>.\n          </el-row>\n        </el-form>\n\n        <el-form\n          v-else\n          ref=\"workspaceForm\"\n          v-loading=\"showLoading\"\n          :model=\"workspaceForm\"\n          :rules=\"workspaceRules\"\n          label-position=\"top\"\n          class=\"external-view__form\"\n          @submit.native.prevent=\"selectWorkspace\"\n        >\n          <h1 class=\"external-view__title\">\n            Equipe\n          </h1>\n          <p>Selecione uma de suas equipes de trabalho para entrar.</p>\n          <el-form-item\n            label=\"Equipe\"\n            prop=\"selectedWorkspaceIndex\"\n          >\n            <el-select\n              v-model=\"workspaceForm.selectedWorkspaceIndex\"\n              placeholder=\"Selecione\"\n              filterable\n              data-testid=\"select-workspace\"\n            >\n              <el-option\n                v-for=\"(w, index) in workspaces\"\n                :key=\"index\"\n                :value=\"index\"\n                :label=\"w.workspace.teamName\"\n                data-testid=\"select-workspace-item\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-button\n            native-type=\"submit\"\n            class=\"external-view__submit\"\n            type=\"primary\"\n            data-testid=\"submit-workspace\"\n          >\n            Selecionar e entrar\n          </el-button>\n          <br><br>\n          <el-button\n            v-if=\"$store.getters.isJusttoAdmin\"\n            class=\"external-view__submit\"\n            type=\"secondary\"\n            icon=\"el-icon-s-operation\"\n            @click=\"$router.push('admin-panel')\"\n          >\n            Painel administrativo\n          </el-button>\n        </el-form>\n      </el-aside>\n\n      <el-main class=\"hidden-sm-and-down\">\n        <ProjusrisSidenavExternal />\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport { validateLocalWorkspace } from '@/utils'\nimport { isJusttoUser } from '@/utils/validations'\nimport { mapActions } from 'vuex'\n\nexport default {\n  name: 'Login',\n\n  components: {\n    ProjusrisSidenavExternal: () => import('@/components/layouts/ProjusrisSidenavExternal')\n  },\n\n  data() {\n    return {\n      loadingText: 'Autenticando...',\n      loadingIndex: 0,\n      workspaces: [],\n      showPassword: false,\n      showError: false,\n      showSuccess: false,\n      showLoading: false,\n      errorMessage: '',\n      loginForm: {\n        email: '',\n        password: ''\n      },\n      rules: {\n        email: [\n          { required: true, message: 'Campo obrigatório', trigger: 'submit' },\n          { type: 'email', required: true, message: 'Insira um e-mail válido', trigger: ['submit'] }\n        ],\n        password: [\n          { required: true, message: 'Campo obrigatório', trigger: 'submit' }\n        ]\n      },\n      workspaceForm: {\n        selectedWorkspaceIndex: ''\n      },\n      workspaceRules: {\n        selectedWorkspaceIndex:\n        [{ required: true, message: 'Campo obrigatório', trigger: 'submit' }]\n      }\n    }\n  },\n\n  computed: {\n    passwordType() {\n      return this.showPassword ? 'text' : 'password'\n    }\n  },\n\n  beforeMount() {\n    const hasWorkspaces = Object.keys(localStorage).filter(key => key.startsWith('jusworkspace')).length > 0\n\n    if (hasWorkspaces && !validateLocalWorkspace()) {\n      this.getMyWorkspaces()\n    } else if (this.$store.getters.isLoggedIn) {\n      this.$store.dispatch('logout')\n    }\n\n    document.querySelectorAll('.prompt-insert-name .el-message-box__headerbtn').forEach(btn => btn.click())\n  },\n\n  created() {\n    if (this.$route.query.token) {\n      this.$store.dispatch('activate', this.$route.query.token)\n        .then(() => {\n          this.showSuccess = true\n        })\n        .finally(() => {\n          this.$router.push('login')\n        })\n    }\n  },\n\n  methods: {\n    ...mapActions({\n      sendEmail: 'sendCustomEmail',\n      getAccountProperty: 'getAccountProperty'\n    }),\n\n    getErrorMessage() {\n      const messages = [\n        'Aguarde um momento que já iremos lhe autenticar',\n        'O serviço de autenticação de usuários está sendo atualizado para aplicar melhorias e mais segurança',\n        'Atualizando o serviço de autenticação de usuário'\n      ]\n      const msg = messages[this.loadingIndex % 3]\n      this.loadingIndex += 1\n      return msg\n    },\n\n    doLogin() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          this.showError = false\n          this.showLoading = true\n\n          this.$store.dispatch('login', this.loginForm)\n            .then(() => {\n              this.$store.dispatch('myAccount').then(this.getMyWorkspaces).catch(error => {\n                this.$jusNotification({ error })\n                this.showLoading = false\n              })\n            })\n            .catch(error => {\n              localStorage.removeItem('justoken')\n              if (error.response && (error.response?.status === 401 || error.response.data.code === 'INVALID_CREDENTIALS')) {\n                this.mountError('E-mail não cadastrado ou senha incorreta.')\n              } else if (error?.response?.data?.reason === 'User account is locked') {\n                this.$jusNotification({\n                  title: 'Ops!',\n                  message: 'Iniciamos a recuperação de conta.',\n                  type: 'error'\n                })\n                this.$router.push({\n                  path: 'recover-account',\n                  query: { email: this.loginForm.email }\n                })\n              } else {\n                this.loadingText = this.getErrorMessage()\n                // setTimeout(this.doLogin, 6000)\n                this.showLoading = false\n                this.$jusNotification({ error })\n              }\n            })\n        } else {\n          return false\n        }\n      })\n    },\n\n    getMyWorkspaces() {\n      return new Promise((resolve, reject) => {\n        this.$store.dispatch('myWorkspace').then(response => {\n          this.$jusSegment('Usuário logado')\n          // Encontra Workspace que vai logar.\n          if (Object.keys(localStorage).includes('jusredirect')) {\n            const { wid, did } = JSON.parse(localStorage.getItem('jusredirect'))\n\n            const workspaceIndex = response.findIndex(({ workspace: { id } }) => Number(id) === Number(wid))\n\n            if (workspaceIndex >= 0 && did) {\n              this.$nextTick().then(() => {\n                this.workspaceForm.selectedWorkspaceIndex = workspaceIndex\n                this.selectWorkspace()\n              })\n            } else {\n              localStorage.removeItem('jusredirect')\n              this.$confirm('Você não possui privilégios para visualizar esta página', 'Warning', {\n                closeOnPressEscape: false,\n                closeOnClickModal: false,\n                confirmButtonText: 'OK',\n                showCancelButton: false,\n                showClose: false,\n                type: 'warning',\n                center: true\n              })\n            }\n          }\n          // Encontra Workspace que vai logar.\n          if (response.length > 1) {\n            this.showLoading = false\n            this.workspaces = response\n          } else if (response.length === 0) {\n            this.$confirm('Não encontramos nenhuma Workspace ativa ativa para o seu usuário.<br>Favor entrar em contato com o seu Gerente de Contas.', {\n              dangerouslyUseHTMLString: true,\n              closeOnPressEscape: false,\n              closeOnClickModal: false,\n              confirmButtonText: 'OK',\n              showCancelButton: false,\n              showClose: false,\n              center: true\n            }).then(() => {\n              this.sendEmail({\n                subject: 'Usuário sem Workspace',\n                address: 'deivid@justto.com.br',\n                content: `Usuário com o email <b>${this.loginForm.email}</b> tentou fazer login na plataforma, mas não pertence a nenhuma Workspace ativa.`\n              })\n\n              location.reload()\n            })\n          } else {\n            this.getMembersAndRedirect(response[0])\n          }\n          resolve(response)\n        }).catch(error => {\n          this.$jusNotification({ error })\n          this.showLoading = false\n          reject(error)\n        })\n      })\n    },\n\n    async getMembersAndRedirect(response) {\n      // SEGMENT TRACK\n      this.$jusSegment('Seleção de Workspace', {\n        workspace: response.workspace.name,\n        team: response.workspace.teamName\n      })\n      if (response.workspace) await this.$store.commit('setWorkspace', response.workspace)\n      await this.$nextTick()\n      if (response.profile) this.$store.commit('setProfile', response.profile)\n      await this.$nextTick()\n      if (response.person) {\n        this.$store.commit('setLoggedPerson', response.person)\n\n        const isJustto = response.person.emails?.find(({ address, archived }) => (!archived && isJusttoUser(address))) !== undefined\n\n        await this.$nextTick()\n\n        this.showLoading = true\n        this.$store.dispatch('getWorkspaceMembers')\n          .then(() => {\n            this.getAccountProperty('CUSTOM_HOME').then(({ CUSTOM_HOME }) => {\n              const sessionRedirect = sessionStorage.getItem('redirect')\n              sessionStorage.removeItem('redirect')\n\n              let route = '/negotiation'\n\n              if (Object.keys(localStorage).includes('jusredirect')) {\n                const redirect = JSON.parse(localStorage.getItem('jusredirect'))\n                const params = new URLSearchParams(redirect).toString()\n\n                route = `/redirect?${params}`\n              } else if (sessionRedirect) {\n                route = JSON.parse(sessionRedirect)\n              } else if (CUSTOM_HOME) {\n                route = CUSTOM_HOME\n              } else if (response.profile === 'ADMINISTRATOR' && !isJustto) {\n                route = '/'\n              } else {\n                route = '/negotiation'\n              }\n\n              this.showLoading = true\n              this.$router.push(route).then(event => {}).catch(error => {\n                console.error('LOGIN', error)\n              }).finally(() => {\n                this.showLoading = false\n              })\n            })\n          }).catch(error => {\n            console.error(error)\n            this.mountError()\n            this.workspaces = []\n          }).finally(() => {\n            this.showLoading = false\n          })\n      } else {\n        this.$router.push('/')\n      }\n    },\n    selectWorkspace() {\n      this.$refs.workspaceForm.validate(valid => {\n        if (valid) {\n          const selectedWorkspace = this.workspaces[this.workspaceForm.selectedWorkspaceIndex]\n          if (selectedWorkspace.person && selectedWorkspace.person.id) {\n            this.getMembersAndRedirect(selectedWorkspace)\n          } else {\n            this.$store.dispatch('ensureWorkspaceAccesss', selectedWorkspace.workspace.id).then((res) => {\n              this.$store.commit('setToken', res)\n              this.getMyWorkspaces().then((response) => {\n                this.getMembersAndRedirect(response[this.workspaceForm.selectedWorkspaceIndex])\n              })\n            })\n          }\n        }\n      })\n    },\n    switchShowPassword() {\n      this.showPassword = !this.showPassword\n    },\n    mountError(message) {\n      this.errorMessage = message || `Houve uma falha de conexão com o servidor.\n      Tente novamente ou entre em contato com o administrador do sistema.`\n      this.showError = true\n      this.showLoading = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  @import 'external.scss';\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=57cf7452&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=57cf7452&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".external-view{height:100%}.external-view main{background-color:#fff!important}.external-view .external-view__title{margin-bottom:40px;font-weight:700}.external-view .external-view__form{margin:auto;width:440px;padding:20px}.external-view .external-view__submit{width:100%}.external-view .external-view__info{font-size:12px;text-align:center;margin-top:20px}.external-view .external-view__show-password{vertical-align:text-bottom;margin-right:6px;cursor:pointer}.external-view .external-view__show-password+button{border-left:1px solid #dcdfe6;padding:3px 0;padding-left:6px}.external-view .el-alert{margin-bottom:10px}.external-view .el-select{width:100%}@media screen and (max-width:991px){.external-view .el-container .el-aside{width:100%!important}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/external/external.scss\"],\"names\":[],\"mappings\":\"AAAA,eACE,WAAA,CAEA,oBACE,+BAAA,CAGF,qCACE,kBAAA,CACA,eAAA,CAGF,oCACE,WAAA,CACA,WAAA,CACA,YAAA,CAGF,sCACE,UAAA,CAGF,oCACE,cAAA,CACA,iBAAA,CACA,eAAA,CAGF,6CACE,0BAAA,CACA,gBAAA,CACA,cAAA,CAEA,oDACE,6BAAA,CACA,aAAA,CACA,gBAAA,CAIJ,yBACE,kBAAA,CAGF,0BACE,UAAA,CAGF,oCAEI,uCACE,oBAAA,CAAA\",\"sourcesContent\":[\".external-view {\\n  height: 100%;\\n\\n  main{\\n    background-color: #fff !important;\\n  }\\n\\n  .external-view__title {\\n    margin-bottom: 40px;\\n    font-weight: 700;\\n  }\\n\\n  .external-view__form {\\n    margin: auto;\\n    width: 440px;\\n    padding: 20px;\\n  }\\n\\n  .external-view__submit {\\n    width: 100%;\\n  }\\n\\n  .external-view__info {\\n    font-size: 12px;\\n    text-align: center;\\n    margin-top: 20px;\\n  }\\n\\n  .external-view__show-password {\\n    vertical-align: text-bottom;\\n    margin-right: 6px;\\n    cursor: pointer;\\n\\n    &+button {\\n      border-left: 1px solid #dcdfe6;\\n      padding: 3px 0px;\\n      padding-left: 6px;\\n    }\\n  }\\n\\n  .el-alert {\\n    margin-bottom: 10px;\\n  }\\n\\n  .el-select {\\n    width: 100%;\\n  }\\n\\n  @media screen and (max-width: 991px) {\\n    .el-container {\\n      .el-aside {\\n        width: 100% !important;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=57cf7452&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a11da6e6\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","staticClass","attrs","workspaces","length","directives","name","rawName","value","showLoading","expression","ref","workspaceForm","workspaceRules","nativeOn","$event","preventDefault","selectWorkspace","apply","arguments","_v","model","selectedWorkspaceIndex","callback","$$v","$set","_l","w","index","key","workspace","teamName","$store","getters","isJusttoAdmin","on","$router","push","_e","loadingText","loginForm","rules","doLogin","showError","errorMessage","showSuccess","email","passwordType","password","showPassword","switchShowPassword","staticRenderFns","components","ProjusrisSidenavExternal","data","loadingIndex","required","message","trigger","type","computed","beforeMount","hasWorkspaces","Object","keys","localStorage","filter","startsWith","validateLocalWorkspace","getMyWorkspaces","isLoggedIn","dispatch","document","querySelectorAll","forEach","btn","click","created","$route","query","token","then","finally","methods","mapActions","sendEmail","getAccountProperty","getErrorMessage","messages","msg","$refs","validate","valid","catch","error","$jusNotification","removeItem","response","status","code","reason","title","path","mountError","Promise","resolve","reject","$jusSegment","includes","wid","did","JSON","parse","getItem","workspaceIndex","findIndex","id","Number","$nextTick","$confirm","closeOnPressEscape","closeOnClickModal","confirmButtonText","showCancelButton","showClose","center","dangerouslyUseHTMLString","subject","address","content","location","reload","getMembersAndRedirect","team","commit","profile","person","isJustto","undefined","emails","find","archived","isJusttoUser","CUSTOM_HOME","sessionRedirect","sessionStorage","route","redirect","params","URLSearchParams","toString","event","console","selectedWorkspace","res","component","___CSS_LOADER_EXPORT___","module","__esModule","default","locals","exports","add"],"sourceRoot":""}