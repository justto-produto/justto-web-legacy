{"version":3,"file":"chunks/redirect.js","mappings":"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","sources":["webpack://@projuris/justto-web/./src/views/main/Redirect.vue","webpack://@projuris/justto-web/./src/utils/mixins/goToWorkspace.js","webpack://@projuris/justto-web/src/views/main/Redirect.vue","webpack://@projuris/justto-web/./src/views/main/Redirect.vue?384f","webpack://@projuris/justto-web/./src/views/main/Redirect.vue?ea72","webpack://@projuris/justto-web/./src/views/main/Redirect.vue?ee73","webpack://@projuris/justto-web/./src/views/main/Redirect.vue?e334"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{directives:[{name:\"loading\",rawName:\"v-loading\"}],staticClass:\"redirect-container\"},[_c('jusChangeWorkspace',{ref:\"workspaceSwitcher\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n  methods: {\n    goToWorkspace(workspace, specificDispute = null) {\n      const loading = this.$loading({\n        lock: true,\n        text: 'Alterando Equipe...'\n      })\n\n      const oldWorkspace = this.$store.getters.workspaceTeamName\n\n      if (workspace.workspace) {\n        this.$store.commit('setWorkspace', workspace.workspace)\n      }\n\n      if (workspace.profile) {\n        this.$store.commit('setProfile', workspace.profile)\n      }\n\n      if (workspace.person) {\n        this.$store.commit('setLoggedPerson', workspace.person)\n      }\n\n      this.$store.dispatch('getWorkspaceMembers')\n        .then(() => {\n          this.$jusSegment('Troca de time/workspace', {\n            description: `Alterado de ${workspace.workspace.name} para ${oldWorkspace}`\n          })\n        }).catch(error => {\n          this.$jusNotification({ error })\n        }).finally(() => {\n          const { href } = window.location\n\n          this.isVisible = false\n\n          setTimeout(() => {\n            loading.close()\n          }, 1000)\n\n          if (specificDispute) {\n            window.location.replace(href.split('#')[0] + `#/negotiation/${specificDispute}`)\n          } else {\n            window.location.replace(href.split('#')[0] + `#${this.$store.getters.getCustomHome || '/negotiation'}`)\n          }\n          window.location.reload()\n        })\n    }\n  }\n}\n","<template>\n  <section\n    v-loading\n    class=\"redirect-container\"\n  >\n    <jusChangeWorkspace ref=\"workspaceSwitcher\" />\n  </section>\n</template>\n\n<script>\nimport { getLocalWorkspace } from '@/utils'\nimport { mapActions } from 'vuex'\nimport goToWorkspace from '@/utils/mixins/goToWorkspace'\n\nexport default {\n  components: {\n    jusChangeWorkspace: () => import('@/components/dialogs/JusChangeWorkspace.vue')\n  },\n\n  mixins: [goToWorkspace],\n\n  beforeMount() {\n    localStorage.removeItem('jusredirect')\n    this.resetOccurrences()\n  },\n\n  mounted() {\n    const { wid: workspaceId, did: disputeId } = this.$route.query\n\n    if (!localStorage.getItem(`jusworkspace_${workspaceId}`)) {\n      localStorage.setItem('jusredirect', JSON.stringify(this.$route.query))\n\n      // Alterar equipe.\n\n      this.redirectToWorkspace(workspaceId, disputeId)\n    } else {\n      const jusWorkspace = getLocalWorkspace()\n\n      // TODO: Dry Run SAAS-4441\n      if (Number(jusWorkspace.id) === Number(workspaceId) && Number(disputeId)) {\n        this.$router.push(`negotiation/${disputeId}`)\n      } else {\n        this.redirectToWorkspace(workspaceId, disputeId)\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions(['myWorkspace', 'resetOccurrences']),\n\n    redirectToWorkspace(workspaceId, disputeId) {\n      this.myWorkspace().then(res => {\n        const destinyWokspace = res.find(({ workspace: { id } }) => Number(id) === Number(workspaceId))\n\n        if (!destinyWokspace || !Number(disputeId)) {\n          this.$confirm('Você não possui privilégios para visualizar esta página!', 'Warning', {\n            closeOnPressEscape: false,\n            closeOnClickModal: false,\n            confirmButtonText: 'OK',\n            showCancelButton: false,\n            showClose: false,\n            type: 'warning',\n            center: true\n          }).then(() => {\n            this.$router.push({ name: 'dashboard' })\n          })\n        } else {\n          this.goToWorkspace(destinyWokspace, disputeId)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.redirect-container {\n  width: 100%;\n  height: 100%;\n  padding: 16vh 8vw;\n\n  .redirect-container__skeleton {\n    .el-skeleton {\n      text-align: center;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Redirect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Redirect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Redirect.vue?vue&type=template&id=e1257c6e&\"\nimport script from \"./Redirect.vue?vue&type=script&lang=js&\"\nexport * from \"./Redirect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Redirect.vue?vue&type=style&index=0&id=e1257c6e&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".redirect-container{width:100%;height:100%;padding:16vh 8vw}.redirect-container .redirect-container__skeleton .el-skeleton{text-align:center}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/main/Redirect.vue\"],\"names\":[],\"mappings\":\"AACA,oBACE,UAAA,CACA,WAAA,CACA,gBAAA,CAGE,+DACE,iBAAA\",\"sourcesContent\":[\"\\n.redirect-container {\\n  width: 100%;\\n  height: 100%;\\n  padding: 16vh 8vw;\\n\\n  .redirect-container__skeleton {\\n    .el-skeleton {\\n      text-align: center;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Redirect.vue?vue&type=style&index=0&id=e1257c6e&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0e484d02\", content, true, {\"sourceMap\":true,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","directives","name","rawName","staticClass","ref","staticRenderFns","methods","goToWorkspace","workspace","specificDispute","loading","$loading","lock","text","oldWorkspace","$store","getters","workspaceTeamName","commit","profile","person","dispatch","then","$jusSegment","description","catch","error","$jusNotification","finally","href","window","location","isVisible","setTimeout","close","replace","split","getCustomHome","reload","components","jusChangeWorkspace","mixins","beforeMount","localStorage","removeItem","resetOccurrences","mounted","wid","workspaceId","did","disputeId","$route","query","getItem","jusWorkspace","getLocalWorkspace","Number","id","$router","push","redirectToWorkspace","setItem","JSON","stringify","mapActions","myWorkspace","res","destinyWokspace","find","$confirm","closeOnPressEscape","closeOnClickModal","confirmButtonText","showCancelButton","showClose","type","center","component","___CSS_LOADER_EXPORT___","module","content","__esModule","default","locals","exports","add"],"sourceRoot":""}